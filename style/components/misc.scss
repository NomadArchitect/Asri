@use '../base' as *;

// resizer
.layout__resize {
    &::after {
        height: 1px;
        width: 100%;
    }
    &--lr {
        &::after {
            height: 100%;
            width: 1px;
        }
        &:hover::after {
            background-color: var(--b3-theme-primary-light) !important;
        }
    }

    .layout__dockl+&--lr::after,
    .layout__center+&--lr::after {
        background-color: transparent;
    }
}

//计数器
.counter {
    font-family: var(--b3-font-family-code);
    margin-left: 0;
    &:hover {
        background-color: transparent !important;
        font-weight: bold;
    }
}

//开关
.b3-switch {
    height: 20px;
    width: 32px;
    transition: all 0.3s;
    box-sizing: border-box;
    border: 1px solid transparent;
    html[data-theme-mode="dark"] & {
        border: 1px solid var(--b3-border-color);
    }
    @include theme-variant-color(background-color, on-surface-gray, 0.15);

    // 关闭状态指示点
    &::after {
        top: 1px;
        left: 1px;
        @include theme-variant-color(background-color, light-components);
        box-shadow: 0 1px 4px -1px #0003;
        border: none;
    }

    &::before {
        display: none !important;
    }

    //开启状态
    &:checked {
        background-color: var(--b3-theme-primary) !important;

        &::after {
            transform: translateX(12px);
            @include theme-variant-color(background-color, light-components);
        box-shadow: 0 1px 4px -1px #0003;
        }
    }

    &:active {
        filter: brightness(1.3);
        transition: all 0.1s;
    }
}

// 按钮
.b3-button--outline {
    @include button-primary;

    &:focus {
        box-shadow: none;
    }
} // 设置面板主按钮


// 文本框
.b3-text-field,
select.b3-select {
    box-shadow: none;
    background-color: var(--b3-list-hover);
    min-height: 28px;
    transition: outline 0.2s;
    outline: 0px solid transparent;
    

    &:not(.b3-text-field--text):hover {
        box-shadow: none;
    }

    &:not(.b3-text-field--text):focus {
        outline: 3px solid var(--b3-theme-primary-light);
        box-shadow: none;
    }


    // 以下解决文本框聚焦时外框被裁切的情况
    .config__panel .config__tab-container .fn__flex-1:has(>&) {
        overflow: visible;
    }    
}
 
select.b3-select {
    &:hover {
        background-color: var(--b3-menu-background);
    }
}

textarea {
    resize: vertical;
}


// 滑动条
.b3-slider {  
    .b3-tooltips:has(>&) {
        overflow: visible;
    }
    
    &::-webkit-slider-runnable-track {
        height: 6px;
        border-radius: 9px;
        transition: all 0.1s ease-out;
    }

    &::-webkit-slider-thumb {
        @include theme-variant-color(background-color, light-components);
        // @include tooltip-shadow;
        outline: 1px solid var(--b3-border-color);
        height: 16px;
        width: 16px;
        margin-top: -5px;
        transition: all 0.1s ease-out;
    }

    &:hover:not(&:focus)::-webkit-slider-thumb {     
        transform: none;
        outline: 2px solid lighten(map-get($map: $theme-light, $key: primary),20%);
        @include darkmode-counterpart {
            outline: 2px solid darken(map-get($map: $theme-dark, $key: primary),10%);;
        }
    }
    &:focus::-webkit-slider-thumb{
        transform: scale(1.1);
        outline: 3px solid var(--b3-theme-primary);
        margin: -2px;
        margin-left: 0.5px;
    } 
    &:focus::-webkit-slider-runnable-track {
        height: 12px;
    }
}

// 提示条
.tooltip {
    pointer-events: none;
}