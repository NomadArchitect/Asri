@use '../base' as *;

body:not(.body--mobile) {
    --topbar-z-index: 1;
    --padding-top-for-docks: calc(var(--toolbar-height) - 6px);

    .toolbar {
        margin-bottom: calc(var(--toolbar-height) * -1);
        z-index: var(--topbar-z-index);
        pointer-events: fill;

        #drag {
            opacity: 0;
            pointer-events: none;
        }
    }

    #toolbar {
        background-color: transparent;
        border-bottom: none;
    }

    .fn__flex-column[data-type=wnd]>.fn__flex:first-child {
        z-index: calc(var(--topbar-z-index) + 1);
    }

    .layout-tab-bar {
        margin: 10px;

        &--readonly {
            margin-left: 0;
        }
    }

    .b3-dialog--open .layout-tab-bar {
        margin: 8px auto;
    }

    // 侧栏 ————————————————————————————
    #dockLeft,
    #dockRight {
        padding-top: var(--padding-top-for-docks);
    }

    // 侧栏面板 ——————————————————————————
    .layout__dockl,
    .layout__dockr {

        >.fn__flex:not(.fn__none):first-child,
        >.fn__flex.fn__none~.fn__flex {
            .layout-tab-container {
                padding-top: var(--padding-top-for-docks);
            }
        }

        &.layout--float {
            height: 100%;
        }
    }

    &.body--mac {
        .layout__dockr.layout--float {

            >.fn__flex:not(.fn__none):first-child,
            >.fn__flex.fn__none~.fn__flex {
                .layout-tab-container {
                    padding-top: 4px;
                }
            }
        }
    }

    &.body--win32,
    &.body--browser {
        .layout--float {

            >.fn__flex:not(.fn__none):first-child,
            >.fn__flex.fn__none~.fn__flex {
                .layout-tab-container {
                    padding-top: 4px;
                }
            }
        }
    }

    // 禁用拖动的区域 ————————————————————————————————————
    // 页签栏
    .layout-tab-bar--readonly .block__icon,
    .layout-tab-bar:not(.layout-tab-bar--readonly),

    //菜单
    .b3-menu,
    .b3-menu__submenu,
    .protyle-hint,

    //对话窗口、浮动窗口
    .block__popover,
    .b3-dialog__body,

    //其他
    .block__icons>.block__icon,

    .block__icons>.search__label,

    .search__header,

    .layout--float,

    .protyle-breadcrumb .block__icon,

    .protyle-breadcrumb__item,

    .protyle-breadcrumb button,

    .b3-snackbar,

    .protyle-toolbar,

    .protyle-util {
        app-region: no-drag;
    }
}