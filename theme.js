(()=>{"use strict";var n={12:function(n,t,o){var e=this&&this.__awaiter||function(n,t,o,e){return new(o||(o=Promise))((function(i,c){function u(n){try{l(e.next(n))}catch(n){c(n)}}function r(n){try{l(e.throw(n))}catch(n){c(n)}}function l(n){var t;n.done?i(n.value):(t=n.value,t instanceof o?t:new o((function(n){n(t)}))).then(u,r)}l((e=e.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.t=void 0,t.o=u,t.i=function(n){return e(this,void 0,void 0,(function*(){const t=n.target,o=t.closest(".ariaLabel");if(!o)return;const e=o.dataset.u,i=t.closest(".protyle-title__icon")?"doc":o.dataset.type;(null!=e?e:i)&&setTimeout(r,0)}))},t.l=r,t.m=function(){null===c.v||void 0===c.v||c.v.forEach((n=>{(n.querySelector(".file-tree")?[]:n.querySelectorAll(".protyle-wysiwyg")).forEach((n=>{n.style.removeProperty("--protyle-spacing"),n.dataset.h=void 0}))}))};const i=o(629),c=o(216);function u(){null===c.v||void 0===c.v||c.v.forEach((n=>{let t=n.querySelector(".file-tree")?[]:n.querySelectorAll(".protyle-wysiwyg");setTimeout((()=>{t.forEach((n=>{let t;t=n.style.paddingLeft,t!==n.dataset.h&&(n.style.setProperty("--protyle-spacing",t),n.dataset.h=t)}))}),300)}))}function r(){const n=document.getElementById("commonMenu");if(!n)return;n.lastChild}t.t=(0,i.p)(u,200)},787:function(n,t,o){var e=this&&this.__awaiter||function(n,t,o,e){return new(o||(o=Promise))((function(i,c){function u(n){try{l(e.next(n))}catch(n){c(n)}}function r(n){try{l(e.throw(n))}catch(n){c(n)}}function l(n){var t;n.done?i(n.value):(t=n.value,t instanceof o?t:new o((function(n){n(t)}))).then(u,r)}l((e=e.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.followSysAccentColor=t._=void 0,t.k=function(){return e(this,void 0,void 0,(function*(){var n;r.S.M||(t._=yield b(),function(){return e(this,void 0,void 0,(function*(){yield(0,i.getFile)("/data/snippets/Asri.config.json").then((n=>n&&200===n.status?n.json():null)).then((n=>{var o,e;n?(t.followSysAccentColor=!!n.followSysAccentColor,l.followSysAccentColor=t.followSysAccentColor,l.chroma=null!==(o=n.chroma)&&void 0!==o?o:"1",l.userCustomColor=null!==(e=n.userCustomColor)&&void 0!==e?e:"#3478f6"):t.followSysAccentColor=l.followSysAccentColor}))}))}().then((()=>{r.S.O&&(r.S.P||r.S.j||r.S.L?(document.documentElement.style.setProperty("--asri-user-custom-accent",l.userCustomColor),k(l.userCustomColor)):t.followSysAccentColor?document.documentElement.style.removeProperty("--asri-user-custom-accent"):(document.documentElement.style.setProperty("--asri-user-custom-accent",l.userCustomColor),k(l.userCustomColor)),document.documentElement.style.setProperty("--asri-c-factor",l.chroma),h="0"===l.chroma,w(l.chroma),g())})),r.S.O&&(null===(n=r.R.T)||void 0===n||n.addEventListener("click",y)))}))},t.A=function(){var n;document.documentElement.style.removeProperty("--asri-user-custom-accent"),document.documentElement.style.removeProperty("--asri-sys-accent-grayscale"),document.documentElement.style.removeProperty("--asri-c-factor"),document.documentElement.style.removeProperty("--asri-sys-accent"),document.documentElement.style.removeProperty("--asri-sys-accent-accessible"),document.documentElement.style.removeProperty("--asri-c-0"),document.documentElement.style.removeProperty("--asri-on-primary-reverse"),null===(n=r.R.T)||void 0===n||n.removeEventListener("click",y),document.querySelectorAll(".asri-config").forEach((n=>n.remove()))},t.C=b,t.B=g;const i=o(613),c=o(571),u=o(629),r=o(49),l={followSysAccentColor:!0,chroma:"1",userCustomColor:""};let a,s,d,f,m,v=!1,h=!1;function b(){return e(this,void 0,void 0,(function*(){if(["zh_CN","zh_CHT","en_US"].includes(r.S.lang)){const n=yield fetch(`/appearance/themes/Asri/i18n/${r.S.lang}.json`);return t._=n.json()}{const n=yield fetch("/appearance/themes/Asri/i18n/en_US.json");return t._=n.json()}}))}function p(){return e(this,void 0,void 0,(function*(){yield(0,i.N)("/data/snippets/Asri.config.json",JSON.stringify(l,void 0,4))}))}function y(){return e(this,void 0,void 0,(function*(){Object.keys(t._).length||(t._=yield b()),setTimeout(_,0)}))}function _(){var n,o;if(document.querySelector(".asri-config"))return;const e=document.querySelector('#commonMenu[data-name="barmode"] .b3-menu__items');if(!e)return;const i=`<button class="b3-menu__separator asri-config"></button>\n<button class="b3-menu__item asri-config" id="pickColor">\n<svg class="b3-menu__icon"></svg>\n<label for="asriColorPicker" class="be-menu__label">${t._.pickColor}\n</label>\n<input id="asriColorPicker" type="color" value="${l.userCustomColor}">\n</button>\n<button class="b3-menu__item asri-config" id="followSysAccent">\n<svg class="b3-menu__icon"></svg>\n<label for="" class="be-menu__label">${t._.followSysAccent}\n</label>\n</button>\n<button class="b3-menu__item asri-config" data-type="nobg" id="asriChroma">\n<svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">\n    <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"\n        d="m19 11l-8-8l-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0zM5 2l5 5m-8 6h15m5 7a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4c.3 1.6 2 2.4 2 4" />\n</svg>\n<div aria-label="${t._.asriChroma+(null!==(o=null!==(n=null==f?void 0:f.value)&&void 0!==n?n:l.chroma)&&void 0!==o?o:"1")}" class="b3-tooltips b3-tooltips__n">\n    <input style="box-sizing: border-box" type="range" id="asriChromaSlider" class="b3-slider fn__block" min="0"\n        max="5" step="0.1" value="1">\n</div>\n</button>`,c=document.createRange().createContextualFragment(i);e.appendChild(c),s=document.getElementById("followSysAccent"),d=document.getElementById("pickColor"),f=document.getElementById("asriChromaSlider"),m=d.lastElementChild,s&&d&&f&&m&&(s.classList.toggle("b3-menu__item--selected",t.followSysAccentColor),d.classList.toggle("b3-menu__item--selected",!t.followSysAccentColor),f.value=l.chroma||"1",f.parentElement.ariaLabel=t._.asriChroma+l.chroma,function(){if(!(s&&d&&f&&m))return;const n=(0,u.p)((()=>p()),200);r.S.P||r.S.j||r.S.L?s.classList.add("fn__none"):s.addEventListener("click",o);function o(){t.followSysAccentColor?(t.followSysAccentColor=!1,s.classList.remove("b3-menu__item--selected"),d.classList.add("b3-menu__item--selected"),document.documentElement.style.setProperty("--asri-user-custom-accent",l.userCustomColor||a||"#3478f6"),w(l.chroma),k(l.userCustomColor||a||"#3478f6"),l.followSysAccentColor=!1):(t.followSysAccentColor=!0,s.classList.add("b3-menu__item--selected"),d.classList.remove("b3-menu__item--selected"),document.documentElement.style.removeProperty("--asri-user-custom-accent"),l.followSysAccentColor=!0,g()),p()}function e(){t.followSysAccentColor&&(t.followSysAccentColor=!1,s.classList.remove("b3-menu__item--selected"),d.classList.add("b3-menu__item--selected"),document.documentElement.style.setProperty("--asri-user-custom-accent",l.userCustomColor),w(l.chroma),k(l.userCustomColor),l.userCustomColor=l.userCustomColor,l.followSysAccentColor=!1,p())}function i(){const n=m.value;document.documentElement.style.setProperty("--asri-user-custom-accent",n),k(n)}function c(){s.classList.remove("b3-menu__item--selected"),d.classList.add("b3-menu__item--selected"),k(m.value),l.userCustomColor=m.value,t.followSysAccentColor=!1,l.followSysAccentColor=!1,p()}function v(){const o=this.value;document.documentElement.style.setProperty("--asri-c-factor",o),this.parentElement.ariaLabel=t._.asriChroma+o,l.chroma=o,h="0"===o,w(o),n()}d.addEventListener("click",e),m.addEventListener("input",i),m.addEventListener("change",c),f.addEventListener("input",v)}())}function g(){if(!(r.S.P||r.S.j||r.S.L)){const n="#"+c.remote.systemPreferences.getAccentColor().slice(0,6),o=(0,u.I)(n);if(!o)return;a!==n&&(document.documentElement.style.setProperty("--asri-sys-accent",n),o.s>.28?document.documentElement.style.setProperty("--asri-sys-accent-accessible",n):document.documentElement.style.removeProperty("--asri-sys-accent-accessible"),v=0===o.s,document.body.classList.add("asri-mode-transition"),setTimeout((()=>{document.body.classList.remove("asri-mode-transition")}),350),a=n),t.followSysAccentColor&&(w(o.s),k(n))}}function w(n){return"0"===String(n)||t.followSysAccentColor&&v||h?(document.documentElement.style.setProperty("--asri-c-0","0"),!0):(document.documentElement.style.removeProperty("--asri-c-0"),!1)}t.followSysAccentColor=!0;const x="light"===r.S.F?.81:.79;function k(n){const t=(0,u.$)(n);t&&(t>x?document.documentElement.style.setProperty("--asri-on-primary-reverse","light"===r.S.F?".4":".3"):document.documentElement.style.removeProperty("--asri-on-primary-reverse"))}},344:(n,t)=>{function o(){document.body.classList.toggle("has-exportimg",!!document.querySelector('[data-key="dialog-exportimage"]'))}Object.defineProperty(t,"__esModule",{value:!0}),t.D=function(n,t){o()},t.U=o},818:function(n,t,o){var e=this&&this.__awaiter||function(n,t,o,e){return new(o||(o=Promise))((function(i,c){function u(n){try{l(e.next(n))}catch(n){c(n)}}function r(n){try{l(e.throw(n))}catch(n){c(n)}}function l(n){var t;n.done?i(n.value):(t=n.value,t instanceof o?t:new o((function(n){n(t)}))).then(u,r)}l((e=e.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.V=function(){return e(this,void 0,void 0,(function*(){const n=c.R.H?c.R.H:yield(0,i.J)("#dockLeft");c.R.K||(yield(0,i.J)(".layout__dockl"));const t=c.R.W;for(let o of[n,t]){let t=(0,u.Y)(o===n?"L":"R"),e=(0,u.q)(o===n?"L":"R");t&&e?null==o||o.classList.add("dock-layout-expanded"):null==o||o.classList.remove("dock-layout-expanded")}}))},t.G=function(){return e(this,void 0,void 0,(function*(){var n,t,o;if(c.S.j)return;const e=yield(0,u.X)(),i=!(0,u.Y)("B")&&(0,u.q)("B");null===(n=c.R.toolbar)||void 0===n||n.nextElementSibling.classList.toggle("has-dockb",e),null===(t=c.R.toolbar)||void 0===t||t.nextElementSibling.classList.toggle("has-layout-dockb-float",i),null===(o=c.R.Z)||void 0===o||o.classList.toggle("has-layout-dockb-float",i)}))},t.nn=function(){var n,t;null===(n=c.R.toolbar)||void 0===n||n.nextElementSibling.classList.remove("has-dockb"),null===(t=c.R.toolbar)||void 0===t||t.nextElementSibling.classList.remove("has-layout-dockb-float")},t.tn=function(){var n;null===(n=document.querySelector(".dock-layout-expanded"))||void 0===n||n.classList.remove("dock-layout-expanded")};const i=o(629),c=o(49),u=o(216)},937:function(n,t,o){var e=this&&this.__awaiter||function(n,t,o,e){return new(o||(o=Promise))((function(i,c){function u(n){try{l(e.next(n))}catch(n){c(n)}}function r(n){try{l(e.throw(n))}catch(n){c(n)}}function l(n){var t;n.done?i(n.value):(t=n.value,t instanceof o?t:new o((function(n){n(t)}))).then(u,r)}l((e=e.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.en=void 0,t.cn=c,t.un=function(){document.querySelectorAll(".protyle .protyle-background.without-icon").forEach((n=>{n.classList.remove("without-icon")}))};const i=o(629);function c(){return e(this,void 0,void 0,(function*(){let n=yield(0,i.rn)(".protyle-top>.protyle-background");null==n||n.forEach((n=>{var t;!(null===(t=n.querySelector(".protyle-background__img img"))||void 0===t?void 0:t.classList.contains("fn__none"))&&n.querySelector(".protyle-background__icon.fn__none")?n.classList.add("without-icon"):n.classList.remove("without-icon")}))}))}t.en=(0,i.p)(c)},261:(n,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ln=function(){i.forEach((({an:n,className:t})=>{n&&document.body.classList.add(t)}))},t.sn=function(){i.forEach((({className:n})=>{document.body.classList.remove(n)}))};const e=o(49),i=[{an:e.S.dn,className:"body-asri--mac"},{an:e.S.L,className:"body-asri--linux"},{an:e.S.j,className:"body-asri--mobile"},{an:e.S.P,className:"body-asri--browser"},{an:e.S.fn,className:"body-asri--android"},{an:e.S.M,className:"body-asri--iosApp"},{an:e.S.mn,className:"body-asri--readOnly"}]},2:function(n,t,o){var e=this&&this.__awaiter||function(n,t,o,e){return new(o||(o=Promise))((function(i,c){function u(n){try{l(e.next(n))}catch(n){c(n)}}function r(n){try{l(e.throw(n))}catch(n){c(n)}}function l(n){var t;n.done?i(n.value):(t=n.value,t instanceof o?t:new o((function(n){n(t)}))).then(u,r)}l((e=e.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.vn=t.hn=t.bn=void 0,t.pn=function(){return e(this,void 0,void 0,(function*(){(0,v.ln)(),(0,h.yn)(),(0,_._n)(),(0,p.gn)(),(0,s.k)(),r.S.j||(yield(0,l.wn)(),yield(0,y.xn)("initials"),(0,y.kn)()),j(),(0,f.G)(),(0,p.Mn)(),g.start(document,"mouseup"),w.start(document,"dragend"),x.start(document,"keyup"),M.observe(document.body,u.Sn),k.observe(document.body,{childList:!0}),r.R.On||(yield(0,c.J)(".layout__center")),r.S.j||(S.observe(r.R.On),O.observe(document.body))}))},t.Pn=function(){return e(this,void 0,void 0,(function*(){(0,v.sn)(),(0,h.jn)(),(0,_.Ln)(),(0,p.Tn)(),r.S.j||(yield(0,y.Rn)()),(0,f.tn)(),(0,b.An)(),(0,m.un)(),(0,a.m)(),(0,f.nn)(),(0,p.Cn)(),g.remove(document,"mouseup"),w.remove(document,"dragend"),x.remove(document,"keyup"),M.disconnect(),k.disconnect((()=>{document.body.classList.remove("has-exportimg")})),document.body.classList.remove("body-asri--fullscreen"),r.S.j||(S.disconnect(),O.disconnect()),(0,s.A)()}))};const i=o(796),c=o(629),u=o(766),r=o(49),l=o(216),a=o(12),s=o(787),d=o(344),f=o(818),m=o(937),v=o(261),h=o(832),b=o(844),p=o(414),y=o(376),_=o(130),g=new i.Bn(P),w=new i.Bn(P),x=new i.Bn(P),k=new u.Nn((0,c.p)(d.D,500)),M=new u.Nn((function(n,t){var o;for(let t of n)t.target.classList.contains("b3-list-item--focus")&&((0,b.In)(),(0,m.en)()),t.target===document.body&&((null===(o=t.oldValue)||void 0===o?void 0:o.includes("body--blur"))||t.target.className.includes("body--blur"))&&(0,l.wn)().then((()=>{j(),!r.S.M&&s.followSysAccentColor&&r.S.O&&(0,s.B)()}))})),S=new u.zn((function(n,o){(0,y.Fn)(0,t.bn,l.$n).then(y.Dn),(0,a.t)(),(0,p.En)()})),O=new u.zn((function(n,o){for(let o of n){t.bn=!0,L();const{inlineSize:n}=o.contentBoxSize[0];if(o.target instanceof HTMLElement){if(!o.target.dataset.Un){o.target.dataset.Un=n+"";continue}const e=n-parseFloat(o.target.dataset.Un);o.target.dataset.Un=n+"",t.vn=e}}}));function P(n){j(n)}function j(n){return e(this,void 0,void 0,(function*(){function t(){setTimeout((()=>e(this,void 0,void 0,(function*(){(0,f.V)(),(0,m.en)(),(0,p.En)(),(0,p.gn)(),yield(0,l.wn)(),(0,a.o)(),(0,f.G)(),(0,p.Mn)(),!r.S.M&&s.followSysAccentColor&&r.S.O&&(0,s.B)()}))),0)}n?(n.type.startsWith("mouse")||n.type.startsWith("drag")||n instanceof KeyboardEvent&&("Control"===n.key||"Alt"===n.key||"Shift"===n.key||"Meta"===n.key))&&(t(),setTimeout((()=>{(0,y.Vn)(),(0,y.Fn)(0,!1,l.$n).then(y.Dn)}),0)):(t(),(0,y.Fn)().then(y.Dn))}))}t.bn=!1,t.vn=0;const L=(0,c.p)((()=>{t.bn=!1,(0,y.Hn)(),(0,l.Jn)(),l.$n||(0,y.Vn)(),(0,y.Fn)(t.vn,t.bn,l.$n).then(y.Dn),t.vn=0}),200)},832:function(n,t,o){var e=this&&this.__awaiter||function(n,t,o,e){return new(o||(o=Promise))((function(i,c){function u(n){try{l(e.next(n))}catch(n){c(n)}}function r(n){try{l(e.throw(n))}catch(n){c(n)}}function l(n){var t;n.done?i(n.value):(t=n.value,t instanceof o?t:new o((function(n){n(t)}))).then(u,r)}l((e=e.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.yn=function(){return e(this,void 0,void 0,(function*(){if(c||u)for(let n=0;n<document.styleSheets.length;n++){let t=document.styleSheets[n];try{for(let n=0;n<t.cssRules.length;n++){let o=t.cssRules[n];o.selectorText&&o.selectorText.includes("::-webkit-scrollbar")&&(o.style.width||o.style.height||o.style.backgroundColor)&&(r.push({styleSheet:t,Kn:o.cssText}),t.deleteRule(n),n--)}}catch(n){}}}))},t.jn=function(){return e(this,void 0,void 0,(function*(){if(r)for(let n=0;n<r.length;n++){let t=r[n];t.styleSheet.insertRule(t.Kn,t.styleSheet.cssRules.length)}}))};const i=o(49),{dn:c,j:u}=i.S,r=[]},844:function(n,t,o){var e=this&&this.__awaiter||function(n,t,o,e){return new(o||(o=Promise))((function(i,c){function u(n){try{l(e.next(n))}catch(n){c(n)}}function r(n){try{l(e.throw(n))}catch(n){c(n)}}function l(n){var t;n.done?i(n.value):(t=n.value,t instanceof o?t:new o((function(n){n(t)}))).then(u,r)}l((e=e.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.In=void 0,t.Wn=r,t.An=function(){document.querySelectorAll(".file-tree .has-focus").forEach((n=>n.classList.remove("has-focus")))};const i=o(629),c=o(49),{j:u}=c.S;function r(){return e(this,void 0,void 0,(function*(){if(u)return;c.R.K||(yield(0,i.J)(".layout__dockl"));let n=document.querySelectorAll(".file-tree .b3-list-item--focus");n.length&&(document.querySelectorAll(".file-tree .has-focus").forEach((n=>n.classList.remove("has-focus"))),n.forEach((n=>{n.nextElementSibling&&"UL"===n.nextElementSibling.tagName&&!n.nextElementSibling.classList.contains("fn__none")||n.parentNode instanceof Element&&n.parentNode.classList.add("has-focus")})))}))}t.In=(0,i.p)(r)},414:function(n,t,o){var e=this&&this.__awaiter||function(n,t,o,e){return new(o||(o=Promise))((function(i,c){function u(n){try{l(e.next(n))}catch(n){c(n)}}function r(n){try{l(e.throw(n))}catch(n){c(n)}}function l(n){var t;n.done?i(n.value):(t=n.value,t instanceof o?t:new o((function(n){n(t)}))).then(u,r)}l((e=e.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.En=void 0,t.Yn=r,t.gn=function(){const n=(0,i.qn)()?0:32;document.body.style.setProperty("--status-height",`${n}px`)},t.Tn=function(){document.body.style.removeProperty("--status-height"),setTimeout((()=>{var n,t;null===(n=document.getElementById("status"))||void 0===n||n.style.removeProperty("max-width"),null===(t=document.getElementById("status"))||void 0===t||t.style.removeProperty("transform")}),200)},t.Mn=function(){var n,t;if(!(0,i.qn)()){const o=null===(n=c.R.Gn)||void 0===n?void 0:n.querySelectorAll(".layout__center .layout-tab-container"),e=c.R.status;null==o||o.forEach((n=>{let t=n.querySelector(".file-tree");t&&!t.classList.contains("fn__none")&&(0,u.Qn)(n,e)?n.style.paddingBottom="35px":n.style.removeProperty("padding-bottom")}));const i=document.getElementById("searchList"),r=document.getElementById("searchPreview");(i||r)&&((0,u.Qn)(i,e)?i.style.paddingBottom="35px":i.style.removeProperty("padding-bottom"),(0,u.Qn)(r,e)?r.style.paddingBottom="35px":r.style.removeProperty("padding-bottom"));const l=document.getElementById("viewerContainer");l&&((0,u.Qn)(l,e)?l.style.paddingBottom="35px":l.style.removeProperty("padding-bottom")),null===(t=c.R.Gn)||void 0===t||t.querySelectorAll(".card__main").forEach((n=>{n&&((0,u.Qn)(n,e)?n.style.paddingBottom="35px":n.style.removeProperty("padding-bottom"))}))}},t.Cn=function(){var n,t;null===(n=c.R.Gn)||void 0===n||n.querySelectorAll(".layout__center .layout-tab-container").forEach((n=>{n.style.removeProperty("padding-bottom")})),null===(t=c.R.Gn)||void 0===t||t.querySelectorAll(".card__main").forEach((n=>{n.style.removeProperty("padding-bottom")}));const o=document.getElementById("searchList"),e=document.getElementById("searchPreview"),i=document.getElementById("viewerContainer");for(const n of[o,e,i])n&&n.style.removeProperty("padding-bottom")};const i=o(216),c=o(49),u=o(629);function r(){return e(this,void 0,void 0,(function*(){var n,t;if(!c.S.j&&!c.S.Xn)if(c.R.status||(yield(0,u.J)("#status")),yield(0,i.X)())null===(n=c.R.status)||void 0===n||n.style.removeProperty("max-width"),null===(t=c.R.status)||void 0===t||t.style.removeProperty("transform");else{function o(n,t){c.R.status.style.transform=`translate(${n}px, ${t}px)`}let e=(c.R.Gn||(yield(0,u.J)("#layouts"))).querySelector(".layout__center");if(e&&c.R.Zn&&!c.R.status.classList.contains(".fn__none")){let r=c.R.Zn.clientWidth,l=e.clientWidth,a=0;c.R.nt||(yield(0,u.J)(".layout__dockb")),a=c.R.nt&&!c.R.nt.classList.contains(".fn__none")&&(0,i.Y)("B")?-1*c.R.nt.clientHeight:0,c.R.status.style.maxWidth=l-12+"px";let s=(0,i.tt)("R"),d=!(0,i.Y)("R")&&(0,i.q)("R");s&&d?o(0,a):!s&&d?o(-40,a):s||d?s&&!d&&o(-1*r,a):o(-1*(r+40),a)}}}))}t.En=(0,u.p)(r)},376:function(n,t,o){var e=this&&this.__awaiter||function(n,t,o,e){return new(o||(o=Promise))((function(i,c){function u(n){try{l(e.next(n))}catch(n){c(n)}}function r(n){try{l(e.throw(n))}catch(n){c(n)}}function l(n){var t;n.done?i(n.value):(t=n.value,t instanceof o?t:new o((function(n){n(t)}))).then(u,r)}l((e=e.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.xn=_,t.Hn=function(){return e(this,void 0,void 0,(function*(){c.S.dn&&((0,u.isFullScreen)()?(document.body.classList.add("body-asri--fullscreen"),h-=y?0:88,y=!0):(document.body.classList.remove("body-asri--fullscreen"),null==l||l.style.setProperty("width","0px"),h=yield _("initials","L"),null==l||l.style.removeProperty("width"),y=!1))}))},t.Fn=function(){return e(this,arguments,void 0,(function*(n=0,t=!1,o=!1){if(c.S.Xn||c.S.j)return{ot:!1,et:0};let u=c.R.On||(yield(0,i.J)(".layout__center"));return new Promise((i=>e(this,void 0,void 0,(function*(){var e,r,a,s,d,g;t&&(b+=n),h&&b||(yield _("initials")),f=u.getBoundingClientRect(),v=c.R.it.getBoundingClientRect(),m=c.R.ct.getBoundingClientRect();let w=f.left,x=f.right,k=c.R.ut.getBoundingClientRect().left;t||(w>h+8?(null==p||p.style.setProperty("--topbar-left-spacing","0"),c.S.dn&&y||(yield _("initials","L")),null==l||l.classList.remove("asri-expanded")):c.S.dn&&!c.S.P?(p.style.setProperty("--topbar-left-spacing",w-v.right+4+"px"),null==l||l.classList.add("asri-expanded")):(p.style.setProperty("--topbar-left-spacing",w-m.right+4+"px"),null==l||l.classList.add("asri-expanded")),x<b-8&&!o?(p.style.setProperty("--topbar-right-spacing","0"),yield _("initials","R"),null===(e=c.R.W)||void 0===e||e.style.removeProperty("--avoid-topbar"),null===(r=c.R.Zn)||void 0===r||r.style.removeProperty("--avoid-topbar")):c.S.dn||c.S.P?(p.style.setProperty("--topbar-right-spacing",window.innerWidth-x+1+"px"),null===(a=c.R.W)||void 0===a||a.style.setProperty("--avoid-topbar","4px"),null===(s=c.R.Zn)||void 0===s||s.style.setProperty("--avoid-topbar","4px")):(p.style.setProperty("--topbar-right-spacing",k-x+6+"px"),null===(d=c.R.W)||void 0===d||d.style.setProperty("--avoid-topbar","calc(var(--toolbar-height) - 6px)"),null===(g=c.R.Zn)||void 0===g||g.style.setProperty("--avoid-topbar","calc(var(--toolbar-height) - 6px)"))),i({ot:!0,et:x})}))))}))},t.Dn=function(){return e(this,arguments,void 0,(function*({ot:n,et:t}={ot:!1,et:0}){var o,l;n&&(s=null===(o=c.R.toolbar)||void 0===o?void 0:o.getBoundingClientRect(),yield _("rect"),f=null===(l=c.R.On)||void 0===l?void 0:l.getBoundingClientRect(),r&&(t<b-8?(r.style.setProperty("--container-bg","var(--b3-list-hover)"),r.style.left=t+"px",r.style.right="0",r.style.removeProperty("height"),r.style.removeProperty("top"),r.style.removeProperty("width")):(r.style.setProperty("--container-bg","var(--b3-border-color-trans)"),r.style.left=d.right-10+"px",r.style.width="2px",r.style.height="21px",r.style.top="13.5px")),null===u.v||void 0===u.v||u.v.forEach((n=>e(this,void 0,void 0,(function*(){let t,o=n.querySelector('.fn__flex-column[data-type="wnd"] > .fn__flex:first-child');t=null==o?void 0:o.getBoundingClientRect();let e=t.left<d.left?d.left-t.left-4:0,u=t.right>d.right?t.right-d.right+8:0;(0,i.Qn)(o,c.R.rt)||(0,i.Qn)(o,c.R.toolbar)?(o.style.paddingLeft=e+"px",o.style.paddingRight=u+"px",t.right-u-240<d.left&&t.left<d.left||t.left+e+240>d.right&&t.right>d.right?(o.style.paddingTop="42px",o.style.paddingLeft="0",o.style.paddingRight="0"):o.style.removeProperty("padding-top")):(o.style.removeProperty("padding-left"),o.style.removeProperty("padding-right"),o.style.removeProperty("padding-top"))})))))}))},t.kn=function(){return e(this,void 0,void 0,(function*(){!function(){if(c.S.j)return;r=g("AsriPluginsIconsDivider",void 0,c.R.rt),l=c.S.dn&&!c.S.P?g("AsriTopbarLeftSpacing",void 0,c.R.it):g("AsriTopbarLeftSpacing",void 0,c.R.ct),a=c.S.dn||c.S.P?g("AsriTopbarRightSpacing"):g("AsriTopbarRightSpacing",c.R.ut);const n=document.createElementNS("http://www.w3.org/2000/svg","svg");null==a||a.appendChild(n.cloneNode(!0)),null==r||r.appendChild(n.cloneNode(!0)),null==l||l.appendChild(n.cloneNode(!0))}()}))},t.Rn=function(){return e(this,void 0,void 0,(function*(){var n,t;yield(0,u.wn)(),function(){r&&(r.remove(),r=void 0);l&&(l.remove(),l=void 0);a&&(a.remove(),a=void 0)}(),null===u.v||void 0===u.v||u.v.forEach((n=>{let t=n.firstElementChild;t.style.removeProperty("padding-top"),t.style.removeProperty("padding-left"),t.style.removeProperty("padding-right")})),c.R.On.dataset.Un=void 0,document.body.dataset.Un=void 0,null===(n=c.R.W)||void 0===n||n.style.removeProperty("--avoid-topbar"),null===(t=c.R.Zn)||void 0===t||t.style.removeProperty("--avoid-topbar")}))},t.Vn=function(){return e(this,void 0,void 0,(function*(){l&&a&&(l.style.setProperty("width","0px"),a.style.setProperty("width","0px"),yield _("initials"),l.style.removeProperty("width"),a.style.removeProperty("width"))}))};const i=o(629),c=o(49),u=o(216);let r,l,a,s,d,f,m,v,h,b,p=c.R.toolbar,y=!1;function _(){return e(this,arguments,void 0,(function*(n="rect",...t){const o=c.R.rt||(yield(0,i.J)("#drag"));return!o||c.S.Xn?-1:new Promise((e=>{"initials"===n?(t.length&&!t.includes("L")||(h=o.getBoundingClientRect().left,e(h)),t.length&&!t.includes("R")||(b=o.getBoundingClientRect().right,e(b))):(d=o.getBoundingClientRect(),e(d))}))}))}function g(n,t=void 0,o=void 0){if(document.getElementById(n))return;if(!c.R.toolbar)return;let e=document.createElement("div");return e.id=n,t?c.R.toolbar.insertBefore(e,t):o?c.R.toolbar.insertBefore(e,o.nextSibling):c.R.toolbar.appendChild(e),e}},130:(n,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._n=function(){i.S.dn&&(i.S.P||c(16),i.S.Xn&&c(14))},t.Ln=function(){i.S.dn&&(i.S.P||c(8),i.S.Xn&&c(8,13))};const e=o(571),i=o(49);function c(n,t=n){e.remote&&e.remote.getCurrentWindow().setWindowButtonPosition({x:n,y:t})}},613:function(n,t){var o=this&&this.__awaiter||function(n,t,o,e){return new(o||(o=Promise))((function(i,c){function u(n){try{l(e.next(n))}catch(n){c(n)}}function r(n){try{l(e.throw(n))}catch(n){c(n)}}function l(n){var t;n.done?i(n.value):(t=n.value,t instanceof o?t:new o((function(n){n(t)}))).then(u,r)}l((e=e.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getFile=function(n){return o(this,void 0,void 0,(function*(){const t=yield fetch("/api/file/getFile",{method:"POST",headers:{lt:"Token ''"},body:JSON.stringify({path:n})});return t.ok?t:null}))},t.N=function(n,t){return o(this,arguments,void 0,(function*(n,t,o=!1,e=Date.now()){let i=new Blob([t]),c=n.split("/").pop(),u=new File([i],c),r=new FormData;r.append("path",n),r.append("file",u),r.append("isDir",String(o)),r.append("modTime",String(e));const l=yield fetch("/api/file/putFile",{body:r,method:"POST",headers:{lt:"Token ''"}});return l.ok?yield l.json():null}))}},571:(n,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.remote=void 0;const e=o(49);t.remote=e.S.P||e.S.j?null:o(21)},796:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Bn=void 0;t.Bn=class{constructor(n){this.st=n}start(n,t,o){n.addEventListener(t,this.st,o)}remove(n,t,o){n.removeEventListener(t,this.st,o)}}},629:function(n,t){var o=this&&this.__awaiter||function(n,t,o,e){return new(o||(o=Promise))((function(i,c){function u(n){try{l(e.next(n))}catch(n){c(n)}}function r(n){try{l(e.throw(n))}catch(n){c(n)}}function l(n){var t;n.done?i(n.value):(t=n.value,t instanceof o?t:new o((function(n){n(t)}))).then(u,r)}l((e=e.apply(n,t||[])).next())}))};function e(n,t){let o=!1;return n&&t&&(o=n.right>t.left&&n.bottom>t.top&&n.left<t.left+t.width&&n.top<t.top+t.height),o}Object.defineProperty(t,"__esModule",{value:!0}),t.dt=function(n,t){n.includes(t)||n.push(t)},t.p=function(n,t=200){let o=null;return(...e)=>{o&&clearTimeout(o),o=setTimeout((()=>{n(...e),o=null}),t)}},t.I=function(n){if(!n)return;const t=parseInt(n.substring(1,3),16)/255,o=parseInt(n.substring(3,5),16)/255,e=parseInt(n.substring(5,7),16)/255,i=Math.max(t,o,e),c=Math.min(t,o,e),u=(i+c)/2;if(i===c)return{ft:0,s:0,vt:u};let r=0;const l=i-c,a=u>.5?l/(2-i-c):l/(i+c);switch(i){case t:r=(o-e)/l+(o<e?6:0);break;case o:r=(e-t)/l+2;break;case e:r=(t-o)/l+4}return r/=6,{ft:r,s:a,vt:u}},t.$=function(n){if(!n)return;4===(n=n.replace(/^#/,"")).length?n.substring(0,3):8===n.length&&n.substring(0,6);3===n.length&&(n=n.split("").map((function(n){return n+n})).join(""));let t=parseInt(n.slice(0,2),16)/255,o=parseInt(n.slice(2,4),16)/255,e=parseInt(n.slice(4,6),16)/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92,e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92;let i=.4124564*t+.3575761*o+.1804375*e,c=.2126729*t+.7151522*o+.072175*e,u=.0193339*t+.119192*o+.9503041*e,r=.8189330101*i+.3618667424*c-.1288597137*u,l=.0329845436*i+.9293118715*c+.0361456387*u,a=.0482003018*i+.2643662691*c+.633851707*u;return r=Math.cbrt(r),l=Math.cbrt(l),a=Math.cbrt(a),.2104542553*r+.793617785*l-.0040720468*a},t.ht=function(){document.body.classList.add("asri-mode-transition"),setTimeout((()=>{document.body.classList.remove("asri-mode-transition")}),350)},t.Qn=function(n,t){if(!n||!t)return!1;let o,i;o=n.getBoundingClientRect(),i=t.getBoundingClientRect();return e(o,i)},t.bt=function(n,t){return o(this,void 0,void 0,(function*(){return!(!n||!t)&&new Promise((o=>{let i,c;i=n.getBoundingClientRect(),c=t.getBoundingClientRect();o(e(i,c))}))}))},t.yt=function(n,t){if(!n.length||!t.length)return!1;const o=new Set(n),e=new Set(t);if(o.size!==e.size)return!1;for(const n of o)if(!e.has(n))return!1;return!0},t.J=function(n){return o(this,arguments,void 0,(function*(n,t=document,o=10,e=200){let i=0;for(;i<o;){const o=t.querySelector(n);if(o)return o;yield new Promise((n=>setTimeout(n,e))),i++}}))},t.rn=function(n){return o(this,arguments,void 0,(function*(n,t=document,o=10,e=200){let i=0;for(;i<o;){const o=t.querySelectorAll(n);if(o.length>0)return o;yield new Promise((n=>setTimeout(n,e))),i++}}))}},766:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Sn=t.Nn=t.zn=void 0;t.zn=class{constructor(n){this.st=(t,o)=>n(t,o),this._t=new ResizeObserver(this.st)}observe(n,t){this._t.observe(n,t)}disconnect(n){this._t.disconnect(),n&&n()}unobserve(n){this._t.unobserve(n)}};t.Nn=class{constructor(n){this.st=(t,o)=>n(t,o),this.gt=new MutationObserver(this.st)}observe(n,t){this.gt.observe(n,t)}disconnect(n){this.gt.disconnect(),n&&n()}},t.Sn={attributes:!0,subtree:!0,attributeFilter:["class"],attributeOldValue:!0}},49:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.S=t.R=void 0;const o=navigator.userAgent;let e=null,i=null,c=null,u=null,r=null,l=null,a=null,s=null,d=null,f=null,m=null,v=null,h=null,b=null,p=null,y=null,_=null,g=null;t.R={get Gn(){return null!=e?e:e=document.getElementById("layouts")},get On(){return null!=i?i:i=document.querySelector(".layout__center")},get toolbar(){return null!=c?c:c=document.getElementById("toolbar")},get H(){return null!=u?u:u=document.getElementById("dockLeft")},get W(){return null!=r?r:r=document.getElementById("dockRight")},get Z(){return null!=l?l:l=document.getElementById("dockBottom")},get status(){return null!=a?a:a=document.getElementById("status")},get K(){return null!=s?s:s=document.querySelector(".layout__dockl")},get Zn(){return null!=d?d:d=document.querySelector(".layout__dockr")},get nt(){return null!=f?f:f=document.querySelector(".layout__dockb")},get it(){return null!=m?m:m=document.getElementById("barSync")},get ct(){return null!=v?v:v=document.getElementById("barForward")},get wt(){return null!=h?h:h=document.getElementById("toolbarVIP")},get rt(){return null!=b?b:b=document.getElementById("drag")},get xt(){return null!=p?p:p=document.getElementById("barPlugins")},get ut(){return null!=y?y:y=document.getElementById("barSearch")},get T(){return null!=_?_:_=document.getElementById("barMode")},get kt(){return null!=g?g:g=document.getElementById("barMore")}},t.S={dn:navigator.platform.indexOf("Mac")>-1,L:navigator.platform.indexOf("Linux")>-1,fn:/Android/.test(o),j:!!document.getElementById("sidebar"),P:!o.startsWith("SiYuan")||o.indexOf("iPad")>-1||/Android/.test(o)&&!/(?:Mobile)/.test(o),Xn:document.body.classList.contains("body--window"),M:(/iOS/i.test(o)||/iPad/i.test(o))&&/AppleWebKit/i.test(o)&&o.startsWith("SiYuan/"),lang:window.siyuan.config.lang,O:CSS.supports("color","oklch(from red calc(l * 0.5) 0 h)"),mn:window.siyuan.config.readonly,F:window.siyuan.config.appearance.mode>0?"dark":"light"}},216:function(n,t,o){var e=this&&this.__awaiter||function(n,t,o,e){return new(o||(o=Promise))((function(i,c){function u(n){try{l(e.next(n))}catch(n){c(n)}}function r(n){try{l(e.throw(n))}catch(n){c(n)}}function l(n){var t;n.done?i(n.value):(t=n.value,t instanceof o?t:new o((function(n){n(t)}))).then(u,r)}l((e=e.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.v=t.Mt=t.$n=void 0,t.Jn=r,t.Y=function(n){const t="B"===n?u.R.nt:"L"===n?u.R.K:u.R.Zn;return!(!t||t.classList.contains("layout--float"))},t.q=function(n){const t="B"===n?u.R.nt:"L"===n?u.R.K:u.R.Zn;let o;if(!t)return!1;o="B"===n?t.style.height:t.style.width;return!(!o||"0px"===o)},t.tt=function(n="L"){const t="B"===n?u.R.Z:"L"===n?u.R.H:u.R.W;return!(!t||!t.classList.contains("fn__none"))},t.X=function(){return e(this,void 0,void 0,(function*(){return u.R.Z||(yield(0,c.J)(".layout__dockb")),!(!u.R.Z||u.R.Z.classList.contains("fn__none"))}))},t.isFullScreen=function(){return!(!i.remote||!i.remote.getCurrentWindow().isFullScreen())},t.qn=function(){return!(!u.R.status||!u.R.status.classList.contains("fn__none"))},t.wn=function(){return e(this,void 0,void 0,(function*(){return yield(0,c.rn)('.layout__center [data-type="wnd"]').then((n=>{t.v=n})),t.v}))};const i=o(571),c=o(629),u=o(49);function r(){var n,o;u.R.toolbar&&(t.$n=(null===(n=u.R.toolbar)||void 0===n?void 0:n.scrollWidth)>u.R.toolbar.clientWidth,(null===(o=u.R.kt)||void 0===o?void 0:o.classList.contains("fn__none"))||(t.$n=!0))}t.$n=!1,t.Mt=(0,c.p)(r),t.v=document.querySelectorAll('.layout__center [data-type="wnd"]')},21:n=>{n.exports=require("@electron/remote")}},t={};function o(e){var i=t[e];if(void 0!==i)return i.exports;var c=t[e]={exports:{}};return n[e].call(c.exports,c,c.exports,o),c.exports}(()=>{const n=o(2),t=o(629);(0,n.pn)(),window.destroyTheme=()=>{(0,t.ht)(),(0,n.Pn)()}})()})();