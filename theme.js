(()=>{var e={551:function(e,t,n){var o;!function(t){"use strict";var i=function(){},r=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||function(e){return setTimeout(e,16)};function s(){var e=this;e.reads=[],e.writes=[],e.raf=r.bind(t),i("initialized",e)}function a(e){e.scheduled||(e.scheduled=!0,e.raf(l.bind(null,e)),i("flush scheduled"))}function l(e){i("flush");var t,n=e.writes,o=e.reads;try{i("flushing reads",o.length),e.runTasks(o),i("flushing writes",n.length),e.runTasks(n)}catch(e){t=e}if(e.scheduled=!1,(o.length||n.length)&&a(e),t){if(i("task errored",t.message),!e.catch)throw t;e.catch(t)}}function u(e,t){var n=e.indexOf(t);return!!~n&&!!e.splice(n,1)}s.prototype={constructor:s,runTasks:function(e){var t;for(i("run tasks");t=e.shift();)t()},measure:function(e,t){i("measure");var n=t?e.bind(t):e;return this.reads.push(n),a(this),n},mutate:function(e,t){i("mutate");var n=t?e.bind(t):e;return this.writes.push(n),a(this),n},clear:function(e){return i("clear",e),u(this.reads,e)||u(this.writes,e)},extend:function(e){if(i("extend",e),"object"!=typeof e)throw new Error("expected object");var t=Object.create(this);return function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}(t,e),t.fastdom=this,t.initialize&&t.initialize(),t},catch:null};var c=t.fastdom=t.fastdom||new s;void 0===(o=function(){return c}.call(c,n,c,e))||(e.exports=o)}("undefined"!=typeof window?window:void 0!==this?this:globalThis)},927:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(629),r=n(2);setTimeout((()=>o(void 0,void 0,void 0,(function*(){(0,r.loadAsriJSModules)(),window.destroyTheme=()=>{(0,r.unloadAsriJSModules)(),(0,i.modeTransition)()}}))),0)},12:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.removeProtyleSpacings=t.calcProtyleSpacings=void 0;const i=o(n(551)),r=n(216);t.calcProtyleSpacings=function(){null===r.wndElements||void 0===r.wndElements||r.wndElements.forEach((e=>{let t=e.querySelector(".file-tree")?[]:e.querySelectorAll(".protyle-wysiwyg");setTimeout((()=>{t.forEach((e=>{let t;i.default.measure((()=>{t=e.style.paddingLeft,i.default.mutate((()=>{t!==e.dataset.prevpadding&&(e.style.setProperty("--protyle-spacing",t),e.dataset.prevpadding=t)}))}))}))}),300)}))},t.removeProtyleSpacings=function(){null===r.wndElements||void 0===r.wndElements||r.wndElements.forEach((e=>{(e.querySelector(".file-tree")?[]:e.querySelectorAll(".protyle-wysiwyg")).forEach((e=>{e.style.removeProperty("--protyle-spacing"),e.dataset.prevpadding=void 0}))}))}},344:(e,t)=>{"use strict";function n(){document.body.classList.toggle("has-exportimg",!!document.querySelector('[data-key="dialog-exportimage"]'))}Object.defineProperty(t,"__esModule",{value:!0}),t.addExportImgClassName=t.docBodyMoCallback=void 0,t.docBodyMoCallback=function(e,t){n()},t.addExportImgClassName=n},818:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.destroyDockBg=t.updateDockLBgAndBorder=void 0;const r=i(n(551)),s=n(629),a=n(49),l=n(216);t.updateDockLBgAndBorder=function(){return o(this,void 0,void 0,(function*(){const e=a.asriDoms.dockL?a.asriDoms.dockL:yield(0,s.querySelectorPromise)("#dockLeft");a.asriDoms.layoutDockL||(yield(0,s.querySelectorPromise)(".layout__dockl"));const t=a.asriDoms.dockR;for(let n of[e,t])r.default.measure((()=>{let t=(0,l.isDockLytPinned)(n===e?"L":"R"),o=(0,l.isDockLytExpanded)(n===e?"L":"R");r.default.mutate((()=>{t&&o?null==n||n.classList.add("dock-layout-expanded"):null==n||n.classList.remove("dock-layout-expanded")}))}))}))},t.destroyDockBg=function(){var e;null===(e=document.querySelector(".dock-layout-expanded"))||void 0===e||e.classList.remove("dock-layout-expanded")}},937:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.removeProtyleWithBgImageOnlyClassName=t.formatProtyleWithBgImageOnly=t.debouncedFormatProtyleWithBgImageOnly=void 0;const r=i(n(551)),s=n(629);function a(){return o(this,void 0,void 0,(function*(){let e=yield(0,s.querySelectorAllPromise)(".protyle-top>.protyle-background");null==e||e.forEach((e=>{r.default.mutate((()=>{var t;!(null===(t=e.querySelector(".protyle-background__img img"))||void 0===t?void 0:t.classList.contains("fn__none"))&&e.querySelector(".protyle-background__icon.fn__none")?e.classList.add("without-icon"):e.classList.remove("without-icon")}))}))}))}t.debouncedFormatProtyleWithBgImageOnly=(0,s.debounce)(a),t.formatProtyleWithBgImageOnly=a,t.removeProtyleWithBgImageOnlyClassName=function(){document.querySelectorAll(".protyle .protyle-background.without-icon").forEach((e=>{e.classList.remove("without-icon")}))}},261:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeEnvClassNames=t.addEnvClassNames=void 0;const o=n(49),i=[{condition:o.environment.isMacOS,className:"body-asri--mac"},{condition:o.environment.isLinux,className:"body-asri--linux"},{condition:o.environment.isMobile,className:"body-asri--mobile"},{condition:o.environment.isInBrowser,className:"body-asri--browser"},{condition:o.environment.isAndroid,className:"body-asri--android"},{condition:o.environment.isIOSApp,className:"body-asri--iosApp"},{condition:o.environment.isReadOnly,className:"body-asri--readOnly"}];t.addEnvClassNames=function(){i.forEach((({condition:e,className:t})=>{e&&document.body.classList.add(t)}))},t.removeEnvClassNames=function(){i.forEach((({className:e})=>{document.body.classList.remove(e)}))}},2:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.unloadAsriJSModules=t.loadAsriJSModules=t.fromFullscreen=t.isWinResizing=void 0;const i=n(796),r=n(629),s=n(766),a=n(49),l=n(216),u=n(12),c=n(344),d=n(818),f=n(937),m=n(261),y=n(832),v=n(844),p=n(414),h=n(376),g=n(130),b=new i.AsriEventListener((function(e){D(e)})),w=new s.AsriMutationObserver((0,r.debounce)(c.docBodyMoCallback,500)),_=new s.AsriMutationObserver((function(e,t){for(let t of e)t.target.classList.contains("b3-list-item--focus")&&((0,v.debouncedFormatIndentGuidesForFocusedItems)(),(0,f.debouncedFormatProtyleWithBgImageOnly)())})),S=new s.AsriResizeObserver((function(e,n){for(let n of e){const{inlineSize:e}=n.contentBoxSize[0];if(n.target instanceof HTMLElement){if(!n.target.dataset.prevWidth){n.target.dataset.prevWidth=e+"";continue}const o=e-parseFloat(n.target.dataset.prevWidth);n.target.dataset.prevWidth=e+"",(0,h.calcTopbarSpacings)(o,t.isWinResizing),(0,h.calcTabbarSpacings)(!0)}}})),P=new s.AsriResizeObserver((function(e,n){t.isWinResizing=!0,x()}));function D(e){return o(this,void 0,void 0,(function*(){function t(){setTimeout((()=>o(this,void 0,void 0,(function*(){(0,d.updateDockLBgAndBorder)(),(0,f.debouncedFormatProtyleWithBgImageOnly)(),yield(0,l.updateWndEls)(),(0,u.calcProtyleSpacings)()}))),0)}e?e.type.startsWith("mouse")&&(t(),(0,h.calcTopbarSpacings)().then(h.calcTabbarSpacings)):(t(),(0,h.calcTopbarSpacings)().then(h.calcTabbarSpacings))}))}t.isWinResizing=!1,t.loadAsriJSModules=function(){return o(this,void 0,void 0,(function*(){(0,m.addEnvClassNames)(),(0,y.useMacSysScrollbar)(),(0,g.applyTrafficLightPosition)(),(0,p.setStatusHeightVar)(),yield(0,l.updateWndEls)(),yield(0,h.updateDragRect)("initials"),(0,h.loadTopbarFusion)(),D(),b.start(document.body,"mouseup"),_.observe(document.body,s.MOConfigForClassNames),w.observe(document.body,{childList:!0}),a.asriDoms.layoutCenter||(yield(0,r.querySelectorPromise)(".layout__center")),S.observe(a.asriDoms.layoutCenter),P.observe(document.body)}))},t.unloadAsriJSModules=function(){(0,m.removeEnvClassNames)(),(0,y.restoreDefaultSiyuanScrollbar)(),(0,g.restoreTrafficLightPosition)(),(0,p.removeStatusHeightVar)(),(0,h.unloadTopbarFusion)(),(0,d.destroyDockBg)(),(0,v.removeIndentGuidesFormatClassName)(),(0,f.removeProtyleWithBgImageOnlyClassName)(),(0,u.removeProtyleSpacings)(),b.remove(document,"mouseup"),w.disconnect((()=>document.body.classList.remove("has-exportimg")))};const x=(0,r.debounce)((()=>{t.isWinResizing=!1,(0,l.updateTopBarOverflow)()}),200)},832:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.restoreDefaultSiyuanScrollbar=t.useMacSysScrollbar=void 0;const i=n(49),{isMacOS:r,isMobile:s}=i.environment,a=[];t.useMacSysScrollbar=function(){return o(this,void 0,void 0,(function*(){if(r||s)for(let e=0;e<document.styleSheets.length;e++){let t=document.styleSheets[e];try{for(let e=0;e<t.cssRules.length;e++){let n=t.cssRules[e];n.selectorText&&n.selectorText.includes("::-webkit-scrollbar")&&(n.style.width||n.style.height||n.style.backgroundColor)&&(a.push({styleSheet:t,rule:n.cssText}),t.deleteRule(e),e--)}}catch(e){console.log(e)}}}))},t.restoreDefaultSiyuanScrollbar=function(){return o(this,void 0,void 0,(function*(){if(a)for(let e=0;e<a.length;e++){let t=a[e];t.styleSheet.insertRule(t.rule,t.styleSheet.cssRules.length)}}))}},844:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.removeIndentGuidesFormatClassName=t.formatIndentGuidesForFocusedItems=t.debouncedFormatIndentGuidesForFocusedItems=void 0;const r=i(n(551)),s=n(629),a=n(49),{isMobile:l}=a.environment;function u(){return o(this,void 0,void 0,(function*(){if(l)return;a.asriDoms.layoutDockL||(yield(0,s.querySelectorPromise)(".layout__dockl"));let e=document.querySelectorAll(".file-tree .b3-list-item--focus");e.length&&r.default.mutate((()=>{document.querySelectorAll(".file-tree .has-focus").forEach((e=>e.classList.remove("has-focus"))),e.forEach((e=>{e.nextElementSibling&&"UL"===e.nextElementSibling.tagName&&!e.nextElementSibling.classList.contains("fn__none")||e.parentNode instanceof Element&&e.parentNode.classList.add("has-focus")}))}))}))}t.debouncedFormatIndentGuidesForFocusedItems=(0,s.debounce)(u),t.formatIndentGuidesForFocusedItems=u,t.removeIndentGuidesFormatClassName=function(){document.querySelectorAll(".file-tree .has-focus").forEach((e=>e.classList.remove("has-focus")))}},414:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.removeStatusHeightVar=t.setStatusHeightVar=void 0;const i=o(n(551)),r=n(216);t.setStatusHeightVar=function(){const e=(0,r.isStatusHidden)()?0:32;i.default.mutate((()=>{document.body.style.setProperty("--status-height",`${e}px`)}))},t.removeStatusHeightVar=function(){document.body.style.removeProperty("--status-height")}},376:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.unloadTopbarFusion=t.loadTopbarFusion=t.calcTabbarSpacings=t.calcTopbarSpacings=t.updateDragRect=void 0;const r=i(n(551)),s=n(629),a=n(49),l=n(216);let u,c,d,f,m,y,v,p,h,g,b=a.asriDoms.toolbar;function w(){return o(this,arguments,void 0,(function*(e="rect",...t){const n=a.asriDoms.drag||(yield(0,s.querySelectorPromise)("#drag"));if(!n)throw new Error("updateDragRect(): drag not found");return new Promise((o=>{r.default.measure((()=>{"initials"===e?(t.length&&!t.includes("L")||(h=n.getBoundingClientRect().left),t.length&&!t.includes("R")||(g=n.getBoundingClientRect().right)):m=n.getBoundingClientRect(),o("drag updated")}))}))}))}function _(e,t=void 0,n=void 0){if(document.getElementById(e))return;if(!a.asriDoms.toolbar)return;let o=document.createElement("div");return o.id=e,t?a.asriDoms.toolbar.insertBefore(o,t):n?a.asriDoms.toolbar.insertBefore(o,n.nextSibling):a.asriDoms.toolbar.appendChild(o),o}t.updateDragRect=w,t.calcTopbarSpacings=function(){return o(this,arguments,void 0,(function*(e=0,t=!1,n=!1){if(a.environment.isMiniWindow||a.environment.isMobile)return!1;let i=a.asriDoms.layoutCenter?a.asriDoms.layoutCenter:yield(0,s.querySelectorPromise)(".layout__center");return new Promise((s=>o(this,void 0,void 0,(function*(){t&&(g+=e),h&&g||(yield w()),r.default.measure((()=>{y=i.getBoundingClientRect(),p=a.asriDoms.barSync.getBoundingClientRect(),v=a.asriDoms.barForward.getBoundingClientRect();let e=y.left,l=y.right,d=a.asriDoms.barSearch.getBoundingClientRect().left,f=window.innerWidth;r.default.mutate((()=>o(this,void 0,void 0,(function*(){var o,i,r,y,_,S;t||(e>h+8?(null==b||b.style.setProperty("--topbar-left-spacing","0"),yield w("initials","L"),null==c||c.classList.remove("asri-expanded")):a.environment.isMacOS&&!a.environment.isInBrowser?(b.style.setProperty("--topbar-left-spacing",e-p.right+4+"px"),null==c||c.classList.add("asri-expanded")):(b.style.setProperty("--topbar-left-spacing",e-v.right+4+"px"),null==c||c.classList.add("asri-expanded")),l<g-8&&!n?(b.style.setProperty("--topbar-right-spacing","0"),yield w("initials","R"),null===(o=a.asriDoms.dockR)||void 0===o||o.style.removeProperty("--avoid-topbar"),null===(i=a.asriDoms.layoutDockR)||void 0===i||i.style.removeProperty("--avoid-topbar")):a.environment.isMacOS||a.environment.isInBrowser?(b.style.setProperty("--topbar-right-spacing",window.innerWidth-l+1+"px"),null===(r=a.asriDoms.dockR)||void 0===r||r.style.setProperty("--avoid-topbar","4px"),null===(y=a.asriDoms.layoutDockR)||void 0===y||y.style.setProperty("--avoid-topbar","4px")):(b.style.setProperty("--topbar-right-spacing",d-l+6+"px"),null===(_=a.asriDoms.dockR)||void 0===_||_.style.setProperty("--avoid-topbar","calc(var(--toolbar-height) - 6px)"),null===(S=a.asriDoms.layoutDockR)||void 0===S||S.style.setProperty("--avoid-topbar","calc(var(--toolbar-height) - 6px)"))),l<g-8?(u.style.setProperty("--container-bg","var(--b3-list-hover)"),u.style.left=l+"px",u.style.right="0",u.style.removeProperty("height"),u.style.removeProperty("top")):(yield w("rect"),null==u||u.style.setProperty("--container-bg","var(--b3-border-color-trans)"),u.style.left=m.right-10+"px",u.style.right=f-m.right+8+"px",u.style.height="21px",u.style.top="13.5px"),s(!0)}))))}))}))))}))},t.calcTabbarSpacings=function(e){e&&(r.default.measure((()=>{var e,t,n;f=null===(e=a.asriDoms.toolbar)||void 0===e?void 0:e.getBoundingClientRect(),m=null===(t=a.asriDoms.drag)||void 0===t?void 0:t.getBoundingClientRect(),y=null===(n=a.asriDoms.layoutCenter)||void 0===n?void 0:n.getBoundingClientRect()})),null===l.wndElements||void 0===l.wndElements||l.wndElements.forEach((e=>{let t,n=e.querySelector('.fn__flex-column[data-type="wnd"] > .fn__flex:first-child');r.default.measure((()=>{t=null==n?void 0:n.getBoundingClientRect();let e=t.left<m.left?m.left-t.left-4:0,i=t.right>m.right?t.right-m.right+8:0;r.default.mutate((()=>o(this,void 0,void 0,(function*(){(yield(0,s.isOverlapping)(n,a.asriDoms.drag))||(yield(0,s.isOverlapping)(n,a.asriDoms.toolbar))?(n.style.paddingLeft=e+"px",n.style.paddingRight=i+"px",t.right-i-240<m.left&&t.left<m.left||t.left+e+240>m.right&&t.right>m.right?(n.style.paddingTop="42px",n.style.paddingLeft="0",n.style.paddingRight="0"):n.style.removeProperty("padding-top")):(n.style.removeProperty("padding-left"),n.style.removeProperty("padding-right"))}))))}))})))},t.loadTopbarFusion=function(){return o(this,void 0,void 0,(function*(){!function(){if(a.environment.isMobile)return;u=_("AsriPluginsIconsDivider",void 0,a.asriDoms.drag),c=a.environment.isMacOS&&!a.environment.isInBrowser?_("AsriTopbarLeftSpacing",void 0,a.asriDoms.barSync):_("AsriTopbarLeftSpacing",void 0,a.asriDoms.barForward),d=a.environment.isMacOS||a.environment.isInBrowser?_("AsriTopbarRightSpacing"):_("AsriTopbarRightSpacing",a.asriDoms.barSearch);const e=document.createElementNS("http://www.w3.org/2000/svg","svg");null==d||d.appendChild(e.cloneNode(!0)),null==u||u.appendChild(e.cloneNode(!0)),null==c||c.appendChild(e.cloneNode(!0))}()}))},t.unloadTopbarFusion=function(){u&&(u.remove(),u=void 0),c&&(c.remove(),c=void 0),d&&(d.remove(),d=void 0),null===l.wndElements||void 0===l.wndElements||l.wndElements.forEach((e=>{let t=e.querySelector('.fn__flex-column[data-type="wnd"] > .fn__flex:first-child');t.style.removeProperty("padding-top"),t.style.removeProperty("padding-left"),t.style.removeProperty("padding-right")})),a.asriDoms.layoutCenter.dataset.prevWidth=void 0}},130:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.restoreTrafficLightPosition=t.applyTrafficLightPosition=void 0;const o=n(951),i=n(49),{isMacOS:r,isInBrowser:s,isMiniWindow:a}=i.environment;function l(e,t=e){o.remote&&o.remote.getCurrentWindow().setWindowButtonPosition({x:e,y:t})}t.applyTrafficLightPosition=function(){r&&(s?a&&l(14):l(16))},t.restoreTrafficLightPosition=function(){r&&(s?a&&l(8,13):l(8))}},951:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.remote=void 0;const o=n(49);t.remote=o.environment.isInBrowser||o.environment.isMobile?null:n(21)},796:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsriEventListener=void 0,t.AsriEventListener=class{constructor(e){this.callback=e}start(e,t,n){e.addEventListener(t,this.callback,n)}remove(e,t,n){e.removeEventListener(t,this.callback,n)}}},629:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.querySelectorAllPromise=t.querySelectorPromise=t.nodeListsHaveSameElements=t.isOverlapping=t.modeTransition=t.hexToHSL=t.debounce=t.pushUnique=void 0;const r=i(n(551));t.pushUnique=function(e,t){e.includes(t)||e.push(t)},t.debounce=function(e,t=200){let n=null;return(...o)=>{n&&clearTimeout(n),n=setTimeout((()=>{e(...o),n=null}),t)}},t.hexToHSL=function(e){if(!e)return;const t=parseInt(e.substring(1,3),16)/255,n=parseInt(e.substring(3,5),16)/255,o=parseInt(e.substring(5,7),16)/255,i=Math.max(t,n,o),r=Math.min(t,n,o),s=(i+r)/2;if(i===r)return{h:0,s:0,l:s};let a=0;const l=i-r,u=s>.5?l/(2-i-r):l/(i+r);switch(i){case t:a=(n-o)/l+(n<o?6:0);break;case n:a=(o-t)/l+2;break;case o:a=(t-n)/l+4}return a/=6,{h:a,s:u,l:s}},t.modeTransition=function(){document.body.classList.add("asri-mode-transition"),setTimeout((()=>{document.body.classList.remove("asri-mode-transition")}),350)},t.isOverlapping=function(e,t){return o(this,void 0,void 0,(function*(){return e&&t?new Promise((n=>{r.default.measure((()=>{let o,i;o=e.getBoundingClientRect(),i=t.getBoundingClientRect();const r=function(e,t){let n=!1;return e&&t&&(n=e.right>t.left&&e.bottom>t.top&&e.left<t.left+t.width&&e.top<t.top+t.height),n}(o,i);n(r)}))})):(console.warn("isOverlapping called with null element"),!1)}))},t.nodeListsHaveSameElements=function(e,t){if(!e.length||!t.length)return!1;const n=new Set(e),o=new Set(t);if(n.size!==o.size)return!1;for(const e of n)if(!o.has(e))return!1;return!0},t.querySelectorPromise=function(e){return o(this,arguments,void 0,(function*(e,t=10,n=200){let o=0;for(;o<t;){const t=document.querySelector(e);if(t)return t;yield new Promise((e=>setTimeout(e,n))),o++}}))},t.querySelectorAllPromise=function(e){return o(this,arguments,void 0,(function*(e,t=10,n=200){let o=0;for(;o<t;){const t=document.querySelectorAll(e);if(t.length>0)return t;yield new Promise((e=>setTimeout(e,n))),o++}}))}},766:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MOConfigForClassNames=t.AsriMutationObserver=t.AsriResizeObserver=void 0,t.AsriResizeObserver=class{constructor(e){this.callback=(t,n)=>e(t,n),this.ro=new ResizeObserver(this.callback)}observe(e,t){this.ro.observe(e,t)}disconnect(e){this.ro.disconnect(),e&&e()}unobserve(e){this.ro.unobserve(e)}},t.AsriMutationObserver=class{constructor(e){this.callback=(t,n)=>e(t,n),this.mo=new MutationObserver(this.callback)}observe(e,t){this.mo.observe(e,t)}disconnect(e){this.mo.disconnect(),e&&e()}},t.MOConfigForClassNames={attributes:!0,subtree:!0,attributeFilter:["class"]}},49:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.environment=t.asriDoms=void 0;const n=navigator.userAgent;let o=null,i=null,r=null,s=null,a=null,l=null,u=null,c=null,d=null,f=null,m=null,y=null,v=null,p=null,h=null,g=null,b=null,w=null;t.asriDoms={get layouts(){return null!=o?o:o=document.getElementById("layouts")},get layoutCenter(){return null!=i?i:i=document.querySelector(".layout__center")},get toolbar(){return null!=r?r:r=document.getElementById("toolbar")},get dockL(){return null!=s?s:s=document.getElementById("dockLeft")},get dockR(){return null!=a?a:a=document.getElementById("dockRight")},get dockB(){return null!=l?l:l=document.getElementById("dockBottom")},get status(){return null!=u?u:u=document.getElementById("status")},get layoutDockL(){return null!=c?c:c=document.querySelector(".layout__dockl")},get layoutDockR(){return null!=d?d:d=document.querySelector(".layout__dockr")},get layoutDockB(){return null!=f?f:f=document.querySelector(".layout__dockb")},get barSync(){return null!=m?m:m=document.getElementById("barSync")},get barForward(){return null!=y?y:y=document.getElementById("barForward")},get toolbarVIP(){return null!=v?v:v=document.getElementById("toolbarVIP")},get drag(){return null!=p?p:p=document.getElementById("drag")},get barPlugins(){return null!=h?h:h=document.getElementById("barPlugins")},get barSearch(){return null!=g?g:g=document.getElementById("barSearch")},get barMode(){return null!=b?b:b=document.getElementById("barMode")},get barMore(){return null!=w?w:w=document.getElementById("barMore")}},t.environment={isMacOS:navigator.platform.indexOf("Mac")>-1,isLinux:navigator.platform.indexOf("Linux")>-1,isAndroid:/Android/.test(n),isMobile:!!document.getElementById("sidebar"),isInBrowser:!n.startsWith("SiYuan")||n.indexOf("iPad")>-1||/Android/.test(n)&&!/(?:Mobile)/.test(n),isMiniWindow:document.body.classList.contains("body--window"),isIOSApp:(/iOS/i.test(n)||/iPad/i.test(n))&&/AppleWebKit/i.test(n)&&n.startsWith("SiYuan/"),lang:window.siyuan.config.lang,doesSupportOklch:CSS.supports("color","oklch(from red calc(l * 0.5) 0 h)"),isReadOnly:window.siyuan.config.readonly}},216:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateWndEls=t.wndElements=t.isStatusHidden=t.isFullScreen=t.hasDockb=t.isDockHidden=t.isDockLytExpanded=t.isDockLytPinned=t.updateTopBarOverflow=t.doesTopBarOverflow=void 0;const r=n(951),s=n(629),a=n(49),l=i(n(551));t.doesTopBarOverflow=!1,t.updateTopBarOverflow=function(){l.default.measure((()=>{var e,n;a.asriDoms.toolbar&&(t.doesTopBarOverflow=(null===(e=a.asriDoms.toolbar)||void 0===e?void 0:e.scrollWidth)>a.asriDoms.toolbar.clientWidth,(null===(n=a.asriDoms.barMore)||void 0===n?void 0:n.classList.contains("fn__none"))||(t.doesTopBarOverflow=!0))}))},t.isDockLytPinned=function(e){const t=a.asriDoms[`layoutDock${e}`];return!(!t||t.classList.contains("layout--float"))},t.isDockLytExpanded=function(e){const t=a.asriDoms[`layoutDock${e}`];let n;return!(!t||(n="B"===e?t.style.height:t.style.width,!n||"0px"===n))},t.isDockHidden=function(e="L"){const t=a.asriDoms[`dock${e}`];return!(!t||!t.classList.contains("fn__none"))},t.hasDockb=function(){return!(!a.asriDoms.dockB||a.asriDoms.dockB.classList.contains("fn__none"))},t.isFullScreen=function(){return!(!r.remote||!r.remote.getCurrentWindow().isFullScreen())},t.isStatusHidden=function(){return!(!a.asriDoms.status||!a.asriDoms.status.classList.contains("fn__none"))},t.wndElements=document.querySelectorAll('.layout__center [data-type="wnd"]'),t.updateWndEls=function(){return o(this,void 0,void 0,(function*(){return yield(0,s.querySelectorAllPromise)('.layout__center [data-type="wnd"]').then((e=>{t.wndElements=e})),t.wndElements}))}},21:e=>{"use strict";e.exports=require("@electron/remote")}},t={};!function n(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}(927)})();