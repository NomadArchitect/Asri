(()=>{"use strict";var e={927:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{a(o.next(e))}catch(e){r(e)}}function l(e){try{a(o.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,l)}a((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(2),r=n(629);setTimeout((()=>o(void 0,void 0,void 0,(function*(){(0,i.loadAsriJSModules)(),window.destroyTheme=()=>{(0,i.unloadAsriJSModules)(),(0,r.modeTransition)()}}))),0)},12:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeProtyleSpacings=t.calcProtyleSpacings=t.debouncedCalcProtyleSpacings=void 0;const o=n(629),i=n(216);function r(){null===i.wndElements||void 0===i.wndElements||i.wndElements.forEach((e=>{let t=e.querySelector(".file-tree")?[]:e.querySelectorAll(".protyle-wysiwyg");setTimeout((()=>{t.forEach((e=>{let t;t=e.style.paddingLeft,t!==e.dataset.prevpadding&&(e.style.setProperty("--protyle-spacing",t),e.dataset.prevpadding=t)}))}),300)}))}t.debouncedCalcProtyleSpacings=(0,o.debounce)(r,200),t.calcProtyleSpacings=r,t.removeProtyleSpacings=function(){null===i.wndElements||void 0===i.wndElements||i.wndElements.forEach((e=>{(e.querySelector(".file-tree")?[]:e.querySelectorAll(".protyle-wysiwyg")).forEach((e=>{e.style.removeProperty("--protyle-spacing"),e.dataset.prevpadding=void 0}))}))}},344:(e,t)=>{function n(){document.body.classList.toggle("has-exportimg",!!document.querySelector('[data-key="dialog-exportimage"]'))}Object.defineProperty(t,"__esModule",{value:!0}),t.addExportImgClassName=t.docBodyMoCallback=void 0,t.docBodyMoCallback=function(e,t){n()},t.addExportImgClassName=n},818:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{a(o.next(e))}catch(e){r(e)}}function l(e){try{a(o.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,l)}a((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.destroyDockBg=t.updateDockLBgAndBorder=void 0;const i=n(629),r=n(49),s=n(216);t.updateDockLBgAndBorder=function(){return o(this,void 0,void 0,(function*(){const e=r.asriDoms.dockL?r.asriDoms.dockL:yield(0,i.querySelectorPromise)("#dockLeft");r.asriDoms.layoutDockL||(yield(0,i.querySelectorPromise)(".layout__dockl"));const t=r.asriDoms.dockR;for(let n of[e,t]){let t=(0,s.isDockLytPinned)(n===e?"L":"R"),o=(0,s.isDockLytExpanded)(n===e?"L":"R");t&&o?null==n||n.classList.add("dock-layout-expanded"):null==n||n.classList.remove("dock-layout-expanded")}}))},t.destroyDockBg=function(){var e;null===(e=document.querySelector(".dock-layout-expanded"))||void 0===e||e.classList.remove("dock-layout-expanded")}},937:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{a(o.next(e))}catch(e){r(e)}}function l(e){try{a(o.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,l)}a((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.removeProtyleWithBgImageOnlyClassName=t.formatProtyleWithBgImageOnly=t.debouncedFormatProtyleWithBgImageOnly=void 0;const i=n(629);function r(){return o(this,void 0,void 0,(function*(){let e=yield(0,i.querySelectorAllPromise)(".protyle-top>.protyle-background");null==e||e.forEach((e=>{var t;!(null===(t=e.querySelector(".protyle-background__img img"))||void 0===t?void 0:t.classList.contains("fn__none"))&&e.querySelector(".protyle-background__icon.fn__none")?e.classList.add("without-icon"):e.classList.remove("without-icon")}))}))}t.debouncedFormatProtyleWithBgImageOnly=(0,i.debounce)(r),t.formatProtyleWithBgImageOnly=r,t.removeProtyleWithBgImageOnlyClassName=function(){document.querySelectorAll(".protyle .protyle-background.without-icon").forEach((e=>{e.classList.remove("without-icon")}))}},261:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeEnvClassNames=t.addEnvClassNames=void 0;const o=n(49),i=[{condition:o.environment.isMacOS,className:"body-asri--mac"},{condition:o.environment.isLinux,className:"body-asri--linux"},{condition:o.environment.isMobile,className:"body-asri--mobile"},{condition:o.environment.isInBrowser,className:"body-asri--browser"},{condition:o.environment.isAndroid,className:"body-asri--android"},{condition:o.environment.isIOSApp,className:"body-asri--iosApp"},{condition:o.environment.isReadOnly,className:"body-asri--readOnly"}];t.addEnvClassNames=function(){i.forEach((({condition:e,className:t})=>{e&&document.body.classList.add(t)}))},t.removeEnvClassNames=function(){i.forEach((({className:e})=>{document.body.classList.remove(e)}))}},2:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{a(o.next(e))}catch(e){r(e)}}function l(e){try{a(o.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,l)}a((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.unloadAsriJSModules=t.loadAsriJSModules=t.protyleWidthChange=t.fromFullscreen=t.isWinResizing=void 0;const i=n(796),r=n(629),s=n(766),l=n(49),a=n(216),c=n(12),d=n(344),u=n(818),y=n(937),m=n(261),f=n(832),v=n(844),p=n(414),g=n(376),h=n(130),b=new i.AsriEventListener((function(e){D(e)})),w=new s.AsriMutationObserver((0,r.debounce)(d.docBodyMoCallback,500)),S=new s.AsriMutationObserver((function(e,t){for(let t of e)t.target.classList.contains("b3-list-item--focus")&&((0,v.debouncedFormatIndentGuidesForFocusedItems)(),(0,y.debouncedFormatProtyleWithBgImageOnly)())})),P=new s.AsriResizeObserver((function(e,n){for(let n of e){const{inlineSize:e}=n.contentBoxSize[0];setTimeout((()=>{if(n.target instanceof HTMLElement){if(!n.target.dataset.prevWidth)return void(n.target.dataset.prevWidth=e+"");const o=parseFloat(n.target.dataset.prevWidth),i=e-o;n.target.dataset.prevWidth=e+"",x(),(0,g.calcTopbarSpacings)(i,t.isWinResizing).then(g.calcTabbarSpacings),(0,c.debouncedCalcProtyleSpacings)(),t.protyleWidthChange=i}}),0)}console.log("lytCenterRoCallback")})),_=new s.AsriResizeObserver((function(e,n){t.isWinResizing=!0,x(),console.log("winRoCallback")}));function D(e){return o(this,void 0,void 0,(function*(){function t(){setTimeout((()=>o(this,void 0,void 0,(function*(){(0,u.updateDockLBgAndBorder)(),(0,y.debouncedFormatProtyleWithBgImageOnly)(),yield(0,a.updateWndEls)(),(0,c.calcProtyleSpacings)()}))),0)}e?e.type.startsWith("mouse")&&(t(),setTimeout((()=>{(0,g.calcTopbarSpacings)().then(g.calcTabbarSpacings),(0,g.recalcDragInitials)()}),0)):(t(),(0,g.calcTopbarSpacings)().then(g.calcTabbarSpacings))}))}t.isWinResizing=!1,t.protyleWidthChange=0,t.loadAsriJSModules=function(){return o(this,void 0,void 0,(function*(){(0,m.addEnvClassNames)(),(0,f.useMacSysScrollbar)(),(0,h.applyTrafficLightPosition)(),(0,p.setStatusHeightVar)(),yield(0,a.updateWndEls)(),yield(0,g.updateDragRect)("initials"),(0,g.loadTopbarFusion)(),D(),b.start(document.body,"mouseup"),S.observe(document.body,s.MOConfigForClassNames),w.observe(document.body,{childList:!0}),l.asriDoms.layoutCenter||(yield(0,r.querySelectorPromise)(".layout__center")),P.observe(l.asriDoms.layoutCenter),_.observe(document.body)}))},t.unloadAsriJSModules=function(){(0,m.removeEnvClassNames)(),(0,f.restoreDefaultSiyuanScrollbar)(),(0,h.restoreTrafficLightPosition)(),(0,p.removeStatusHeightVar)(),(0,g.unloadTopbarFusion)(),(0,u.destroyDockBg)(),(0,v.removeIndentGuidesFormatClassName)(),(0,y.removeProtyleWithBgImageOnlyClassName)(),(0,c.removeProtyleSpacings)(),b.remove(document,"mouseup"),S.disconnect(),P.disconnect(),_.disconnect(),w.disconnect((()=>{document.body.classList.remove("has-exportimg")}))};const x=(0,r.debounce)((()=>{t.isWinResizing=!1,(0,g.handleMacFullScreen)(),(0,a.debouncedUpdateTopbarOverflow)(),(0,g.calcTopbarSpacings)(t.protyleWidthChange,t.isWinResizing).then(g.calcTabbarSpacings)}),200)},832:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{a(o.next(e))}catch(e){r(e)}}function l(e){try{a(o.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,l)}a((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.restoreDefaultSiyuanScrollbar=t.useMacSysScrollbar=void 0;const i=n(49),{isMacOS:r,isMobile:s}=i.environment,l=[];t.useMacSysScrollbar=function(){return o(this,void 0,void 0,(function*(){if(r||s)for(let e=0;e<document.styleSheets.length;e++){let t=document.styleSheets[e];try{for(let e=0;e<t.cssRules.length;e++){let n=t.cssRules[e];n.selectorText&&n.selectorText.includes("::-webkit-scrollbar")&&(n.style.width||n.style.height||n.style.backgroundColor)&&(l.push({styleSheet:t,rule:n.cssText}),t.deleteRule(e),e--)}}catch(e){console.log(e)}}}))},t.restoreDefaultSiyuanScrollbar=function(){return o(this,void 0,void 0,(function*(){if(l)for(let e=0;e<l.length;e++){let t=l[e];t.styleSheet.insertRule(t.rule,t.styleSheet.cssRules.length)}}))}},844:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{a(o.next(e))}catch(e){r(e)}}function l(e){try{a(o.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,l)}a((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.removeIndentGuidesFormatClassName=t.formatIndentGuidesForFocusedItems=t.debouncedFormatIndentGuidesForFocusedItems=void 0;const i=n(629),r=n(49),{isMobile:s}=r.environment;function l(){return o(this,void 0,void 0,(function*(){if(s)return;r.asriDoms.layoutDockL||(yield(0,i.querySelectorPromise)(".layout__dockl"));let e=document.querySelectorAll(".file-tree .b3-list-item--focus");e.length&&(document.querySelectorAll(".file-tree .has-focus").forEach((e=>e.classList.remove("has-focus"))),e.forEach((e=>{e.nextElementSibling&&"UL"===e.nextElementSibling.tagName&&!e.nextElementSibling.classList.contains("fn__none")||e.parentNode instanceof Element&&e.parentNode.classList.add("has-focus")})))}))}t.debouncedFormatIndentGuidesForFocusedItems=(0,i.debounce)(l),t.formatIndentGuidesForFocusedItems=l,t.removeIndentGuidesFormatClassName=function(){document.querySelectorAll(".file-tree .has-focus").forEach((e=>e.classList.remove("has-focus")))}},414:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeStatusHeightVar=t.setStatusHeightVar=void 0;const o=n(216);t.setStatusHeightVar=function(){const e=(0,o.isStatusHidden)()?0:32;document.body.style.setProperty("--status-height",`${e}px`)},t.removeStatusHeightVar=function(){document.body.style.removeProperty("--status-height")}},376:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{a(o.next(e))}catch(e){r(e)}}function l(e){try{a(o.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,l)}a((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.recalcDragInitials=t.unloadTopbarFusion=t.loadTopbarFusion=t.calcTabbarSpacings=t.calcTopbarSpacings=t.handleMacFullScreen=t.updateDragRect=void 0;const i=n(2),r=n(629),s=n(49),l=n(216);let a,c,d,u,y,m,f,v,p,g,h=s.asriDoms.toolbar,b=!1;function w(){return o(this,arguments,void 0,(function*(e="rect",...t){const n=s.asriDoms.drag||(yield(0,r.querySelectorPromise)("#drag"));if(!n)throw new Error("updateDragRect(): drag not found");return new Promise((o=>{"initials"===e?(t.length&&!t.includes("L")||(p=n.getBoundingClientRect().left,o(p)),t.length&&!t.includes("R")||(g=n.getBoundingClientRect().right,o(g))):(y=n.getBoundingClientRect(),o(-1))}))}))}function S(e,t=void 0,n=void 0){if(document.getElementById(e))return;if(!s.asriDoms.toolbar)return;let o=document.createElement("div");return o.id=e,t?s.asriDoms.toolbar.insertBefore(o,t):n?s.asriDoms.toolbar.insertBefore(o,n.nextSibling):s.asriDoms.toolbar.appendChild(o),o}t.updateDragRect=w,t.handleMacFullScreen=function(){return o(this,void 0,void 0,(function*(){s.environment.isMacOS&&((0,l.isFullScreen)()?(document.body.classList.add("body--fullscreen"),p-=b?0:88,g+=i.protyleWidthChange,b=!0):(document.body.classList.remove("body--fullscreen"),null==c||c.style.setProperty("width","0px"),p=yield w("initials","L"),null==c||c.style.removeProperty("width"),b=!1))}))},t.calcTopbarSpacings=function(){return o(this,arguments,void 0,(function*(e=0,t=!1,n=!1){if(s.environment.isMiniWindow||s.environment.isMobile)return!1;let i=s.asriDoms.layoutCenter?s.asriDoms.layoutCenter:yield(0,r.querySelectorPromise)(".layout__center");return new Promise((r=>o(this,void 0,void 0,(function*(){var o,l,d,u,S,P;t&&(g+=e),p&&g||(yield w()),m=i.getBoundingClientRect(),v=s.asriDoms.barSync.getBoundingClientRect(),f=s.asriDoms.barForward.getBoundingClientRect();let _=m.left,D=m.right,x=s.asriDoms.barSearch.getBoundingClientRect().left,L=window.innerWidth;t||(_>p+8?(null==h||h.style.setProperty("--topbar-left-spacing","0"),s.environment.isMacOS&&b||(yield w("initials","L")),null==c||c.classList.remove("asri-expanded")):s.environment.isMacOS&&!s.environment.isInBrowser?(h.style.setProperty("--topbar-left-spacing",_-v.right+4+"px"),null==c||c.classList.add("asri-expanded")):(h.style.setProperty("--topbar-left-spacing",_-f.right+4+"px"),null==c||c.classList.add("asri-expanded")),D<g-8&&!n?(h.style.setProperty("--topbar-right-spacing","0"),yield w("initials","R"),null===(o=s.asriDoms.dockR)||void 0===o||o.style.removeProperty("--avoid-topbar"),null===(l=s.asriDoms.layoutDockR)||void 0===l||l.style.removeProperty("--avoid-topbar")):s.environment.isMacOS||s.environment.isInBrowser?(h.style.setProperty("--topbar-right-spacing",window.innerWidth-D+1+"px"),null===(d=s.asriDoms.dockR)||void 0===d||d.style.setProperty("--avoid-topbar","4px"),null===(u=s.asriDoms.layoutDockR)||void 0===u||u.style.setProperty("--avoid-topbar","4px")):(h.style.setProperty("--topbar-right-spacing",x-D+6+"px"),null===(S=s.asriDoms.dockR)||void 0===S||S.style.setProperty("--avoid-topbar","calc(var(--toolbar-height) - 6px)"),null===(P=s.asriDoms.layoutDockR)||void 0===P||P.style.setProperty("--avoid-topbar","calc(var(--toolbar-height) - 6px)")),console.log("center right:",D,"drag initial right",g)),D<g-8?(a.style.setProperty("--container-bg","var(--b3-list-hover)"),a.style.left=D+"px",a.style.right="0",a.style.removeProperty("height"),a.style.removeProperty("top")):(yield w("rect"),null==a||a.style.setProperty("--container-bg","var(--b3-border-color-trans)"),a.style.left=y.right-10+"px",a.style.right=L-y.right+8+"px",a.style.height="21px",a.style.top="13.5px"),r(!0)}))))}))},t.calcTabbarSpacings=function(e=!0){var t,n,i;e&&(u=null===(t=s.asriDoms.toolbar)||void 0===t?void 0:t.getBoundingClientRect(),y=null===(n=s.asriDoms.drag)||void 0===n?void 0:n.getBoundingClientRect(),m=null===(i=s.asriDoms.layoutCenter)||void 0===i?void 0:i.getBoundingClientRect(),null===l.wndElements||void 0===l.wndElements||l.wndElements.forEach((e=>o(this,void 0,void 0,(function*(){let t,n=e.querySelector('.fn__flex-column[data-type="wnd"] > .fn__flex:first-child');t=null==n?void 0:n.getBoundingClientRect();let o=t.left<y.left?y.left-t.left-4:0,i=t.right>y.right?t.right-y.right+8:0;(yield(0,r.isOverlapping)(n,s.asriDoms.drag))||(yield(0,r.isOverlapping)(n,s.asriDoms.toolbar))?(n.style.paddingLeft=o+"px",n.style.paddingRight=i+"px",t.right-i-240<y.left&&t.left<y.left||t.left+o+240>y.right&&t.right>y.right?(n.style.paddingTop="42px",n.style.paddingLeft="0",n.style.paddingRight="0"):n.style.removeProperty("padding-top")):(n.style.removeProperty("padding-left"),n.style.removeProperty("padding-right"))})))))},t.loadTopbarFusion=function(){return o(this,void 0,void 0,(function*(){!function(){if(s.environment.isMobile)return;a=S("AsriPluginsIconsDivider",void 0,s.asriDoms.drag),c=s.environment.isMacOS&&!s.environment.isInBrowser?S("AsriTopbarLeftSpacing",void 0,s.asriDoms.barSync):S("AsriTopbarLeftSpacing",void 0,s.asriDoms.barForward),d=s.environment.isMacOS||s.environment.isInBrowser?S("AsriTopbarRightSpacing"):S("AsriTopbarRightSpacing",s.asriDoms.barSearch);const e=document.createElementNS("http://www.w3.org/2000/svg","svg");null==d||d.appendChild(e.cloneNode(!0)),null==a||a.appendChild(e.cloneNode(!0)),null==c||c.appendChild(e.cloneNode(!0))}()}))},t.unloadTopbarFusion=function(){a&&(a.remove(),a=void 0),c&&(c.remove(),c=void 0),d&&(d.remove(),d=void 0),null===l.wndElements||void 0===l.wndElements||l.wndElements.forEach((e=>{let t=e.querySelector('.fn__flex-column[data-type="wnd"] > .fn__flex:first-child');t.style.removeProperty("padding-top"),t.style.removeProperty("padding-left"),t.style.removeProperty("padding-right")})),s.asriDoms.layoutCenter.dataset.prevWidth=void 0},t.recalcDragInitials=function(){return o(this,void 0,void 0,(function*(){null==c||c.style.setProperty("width","0px"),null==d||d.style.setProperty("width","0px"),yield w("initials"),null==c||c.style.removeProperty("width"),null==d||d.style.removeProperty("width")}))}},130:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.restoreTrafficLightPosition=t.applyTrafficLightPosition=void 0;const o=n(951),i=n(49),{isMacOS:r,isInBrowser:s,isMiniWindow:l}=i.environment;function a(e,t=e){o.remote&&o.remote.getCurrentWindow().setWindowButtonPosition({x:e,y:t})}t.applyTrafficLightPosition=function(){r&&(s?l&&a(14):a(16))},t.restoreTrafficLightPosition=function(){r&&(s?l&&a(8,13):a(8))}},951:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.remote=void 0;const o=n(49);t.remote=o.environment.isInBrowser||o.environment.isMobile?null:n(21)},796:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AsriEventListener=void 0,t.AsriEventListener=class{constructor(e){this.callback=e}start(e,t,n){e.addEventListener(t,this.callback,n)}remove(e,t,n){e.removeEventListener(t,this.callback,n)}}},629:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{a(o.next(e))}catch(e){r(e)}}function l(e){try{a(o.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,l)}a((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.querySelectorAllPromise=t.querySelectorPromise=t.nodeListsHaveSameElements=t.isOverlapping=t.modeTransition=t.hexToHSL=t.debounce=t.pushUnique=void 0,t.pushUnique=function(e,t){e.includes(t)||e.push(t)},t.debounce=function(e,t=200){let n=null;return(...o)=>{n&&clearTimeout(n),n=setTimeout((()=>{e(...o),n=null}),t)}},t.hexToHSL=function(e){if(!e)return;const t=parseInt(e.substring(1,3),16)/255,n=parseInt(e.substring(3,5),16)/255,o=parseInt(e.substring(5,7),16)/255,i=Math.max(t,n,o),r=Math.min(t,n,o),s=(i+r)/2;if(i===r)return{h:0,s:0,l:s};let l=0;const a=i-r,c=s>.5?a/(2-i-r):a/(i+r);switch(i){case t:l=(n-o)/a+(n<o?6:0);break;case n:l=(o-t)/a+2;break;case o:l=(t-n)/a+4}return l/=6,{h:l,s:c,l:s}},t.modeTransition=function(){document.body.classList.add("asri-mode-transition"),setTimeout((()=>{document.body.classList.remove("asri-mode-transition")}),350)},t.isOverlapping=function(e,t){return n(this,void 0,void 0,(function*(){return e&&t?new Promise((n=>{let o,i;o=e.getBoundingClientRect(),i=t.getBoundingClientRect(),n(function(e,t){let n=!1;return e&&t&&(n=e.right>t.left&&e.bottom>t.top&&e.left<t.left+t.width&&e.top<t.top+t.height),n}(o,i))})):(console.warn("isOverlapping called with null element"),!1)}))},t.nodeListsHaveSameElements=function(e,t){if(!e.length||!t.length)return!1;const n=new Set(e),o=new Set(t);if(n.size!==o.size)return!1;for(const e of n)if(!o.has(e))return!1;return!0},t.querySelectorPromise=function(e){return n(this,arguments,void 0,(function*(e,t=10,n=200){let o=0;for(;o<t;){const t=document.querySelector(e);if(t)return t;yield new Promise((e=>setTimeout(e,n))),o++}}))},t.querySelectorAllPromise=function(e){return n(this,arguments,void 0,(function*(e,t=10,n=200){let o=0;for(;o<t;){const t=document.querySelectorAll(e);if(t.length>0)return t;yield new Promise((e=>setTimeout(e,n))),o++}}))}},766:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MOConfigForClassNames=t.AsriMutationObserver=t.AsriResizeObserver=void 0,t.AsriResizeObserver=class{constructor(e){this.callback=(t,n)=>e(t,n),this.ro=new ResizeObserver(this.callback)}observe(e,t){this.ro.observe(e,t)}disconnect(e){this.ro.disconnect(),e&&e()}unobserve(e){this.ro.unobserve(e)}},t.AsriMutationObserver=class{constructor(e){this.callback=(t,n)=>e(t,n),this.mo=new MutationObserver(this.callback)}observe(e,t){this.mo.observe(e,t)}disconnect(e){this.mo.disconnect(),e&&e()}},t.MOConfigForClassNames={attributes:!0,subtree:!0,attributeFilter:["class"]}},49:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.environment=t.asriDoms=void 0;const n=navigator.userAgent;let o=null,i=null,r=null,s=null,l=null,a=null,c=null,d=null,u=null,y=null,m=null,f=null,v=null,p=null,g=null,h=null,b=null,w=null;t.asriDoms={get layouts(){return null!=o?o:o=document.getElementById("layouts")},get layoutCenter(){return null!=i?i:i=document.querySelector(".layout__center")},get toolbar(){return null!=r?r:r=document.getElementById("toolbar")},get dockL(){return null!=s?s:s=document.getElementById("dockLeft")},get dockR(){return null!=l?l:l=document.getElementById("dockRight")},get dockB(){return null!=a?a:a=document.getElementById("dockBottom")},get status(){return null!=c?c:c=document.getElementById("status")},get layoutDockL(){return null!=d?d:d=document.querySelector(".layout__dockl")},get layoutDockR(){return null!=u?u:u=document.querySelector(".layout__dockr")},get layoutDockB(){return null!=y?y:y=document.querySelector(".layout__dockb")},get barSync(){return null!=m?m:m=document.getElementById("barSync")},get barForward(){return null!=f?f:f=document.getElementById("barForward")},get toolbarVIP(){return null!=v?v:v=document.getElementById("toolbarVIP")},get drag(){return null!=p?p:p=document.getElementById("drag")},get barPlugins(){return null!=g?g:g=document.getElementById("barPlugins")},get barSearch(){return null!=h?h:h=document.getElementById("barSearch")},get barMode(){return null!=b?b:b=document.getElementById("barMode")},get barMore(){return null!=w?w:w=document.getElementById("barMore")}},t.environment={isMacOS:navigator.platform.indexOf("Mac")>-1,isLinux:navigator.platform.indexOf("Linux")>-1,isAndroid:/Android/.test(n),isMobile:!!document.getElementById("sidebar"),isInBrowser:!n.startsWith("SiYuan")||n.indexOf("iPad")>-1||/Android/.test(n)&&!/(?:Mobile)/.test(n),isMiniWindow:document.body.classList.contains("body--window"),isIOSApp:(/iOS/i.test(n)||/iPad/i.test(n))&&/AppleWebKit/i.test(n)&&n.startsWith("SiYuan/"),lang:window.siyuan.config.lang,doesSupportOklch:CSS.supports("color","oklch(from red calc(l * 0.5) 0 h)"),isReadOnly:window.siyuan.config.readonly}},216:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{a(o.next(e))}catch(e){r(e)}}function l(e){try{a(o.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,l)}a((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.updateWndEls=t.wndElements=t.isStatusHidden=t.isFullScreen=t.hasDockb=t.isDockHidden=t.isDockLytExpanded=t.isDockLytPinned=t.debouncedUpdateTopbarOverflow=t.doesTopBarOverflow=void 0;const i=n(951),r=n(629),s=n(49);t.doesTopBarOverflow=!1,t.debouncedUpdateTopbarOverflow=(0,r.debounce)((function(){var e,n;s.asriDoms.toolbar&&(t.doesTopBarOverflow=(null===(e=s.asriDoms.toolbar)||void 0===e?void 0:e.scrollWidth)>s.asriDoms.toolbar.clientWidth,(null===(n=s.asriDoms.barMore)||void 0===n?void 0:n.classList.contains("fn__none"))||(t.doesTopBarOverflow=!0))})),t.isDockLytPinned=function(e){const t=s.asriDoms[`layoutDock${e}`];return!(!t||t.classList.contains("layout--float"))},t.isDockLytExpanded=function(e){const t=s.asriDoms[`layoutDock${e}`];let n;return!(!t||(n="B"===e?t.style.height:t.style.width,!n||"0px"===n))},t.isDockHidden=function(e="L"){const t=s.asriDoms[`dock${e}`];return!(!t||!t.classList.contains("fn__none"))},t.hasDockb=function(){return!(!s.asriDoms.dockB||s.asriDoms.dockB.classList.contains("fn__none"))},t.isFullScreen=function(){return!(!i.remote||!i.remote.getCurrentWindow().isFullScreen())},t.isStatusHidden=function(){return!(!s.asriDoms.status||!s.asriDoms.status.classList.contains("fn__none"))},t.wndElements=document.querySelectorAll('.layout__center [data-type="wnd"]'),t.updateWndEls=function(){return o(this,void 0,void 0,(function*(){return yield(0,r.querySelectorAllPromise)('.layout__center [data-type="wnd"]').then((e=>{t.wndElements=e})),t.wndElements}))}},21:e=>{e.exports=require("@electron/remote")}},t={};!function n(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}(927)})();