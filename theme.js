(()=>{"use strict";var n={12:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,c){function u(n){try{r(o.next(n))}catch(n){c(n)}}function s(n){try{r(o.throw(n))}catch(n){c(n)}}function r(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}r((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.t=void 0,t.o=r,t.i=function(n){return o(this,void 0,void 0,(function*(){if("mouseup"!==n.type)return;const t=n.target,e=t.closest(".ariaLabel"),o=t.closest(".protyle");if(!e||!o)return;const i=e.dataset.type,c=t.closest(".protyle-title__icon")||"doc"===e.dataset.type?"doc":void 0,r=s.includes(i)?i:c;if(!r)return;const a="doc"===r?o.dataset.id:e.dataset.nodeId;setTimeout((()=>{!function(n,t){var e;const o="doc"===n?document.querySelector(`.protyle[data-id="${t}"] .protyle-wysiwyg`):document.querySelector(`.protyle-wysiwyg>[data-node-id="${t}"]:not([data-sb-layout="row"])`);if(!o)return;!function(n){var t;const e=document.getElementById("commonMenu");if(!e)return;const o=e.lastChild,i=document.createElement("button");i.className="b3-menu__item";const c=document.createElement("button");c.className="b3-menu__separator";const s=`\n        <button class="b3-menu__item b3-menu__item--custom" id="afwdDocMenuItem-switch">\n            <span class="b3-menu__label">\n                <div class="fn__flex">\n                    <span>${u.u["afwdDocMenuItem-switch"]}</span>\n                    <span class="fn__space fn__flex-1"></span>\n                    <input type="checkbox" class="b3-switch fn__flex-center">\n                </div>\n            </span>\n        </button>\n    `,r=`    \n        <button class="b3-menu__item b3-menu__item--custom" id="afwdDocMenuItem-all">\n            <span class="b3-menu__label">\n                <div class="fn__flex">\n                    <span>${u.u["afwdDocMenuItem-all"]}</span>\n                    <span class="fn__space fn__flex-1"></span>\n                    <input type="checkbox" class="b3-switch fn__flex-center">\n                </div>\n            </span>\n        </button>\n        <button class="b3-menu__item b3-menu__item--custom" id="afwdDocMenuItem-db">\n            <span class="b3-menu__label">\n                <div class="fn__flex">\n                    <span>${u.u["afwdDocMenuItem-db"]}</span>\n                    <span class="fn__space fn__flex-1"></span>\n                    <input type="checkbox" class="b3-switch fn__flex-center">\n                </div>\n            </span>\n        </button>\n        <button class="b3-menu__item b3-menu__item--custom" id="afwdDocMenuItem-t">\n            <span class="b3-menu__label">\n                <div class="fn__flex">\n                    <span>${u.u["afwdDocMenuItem-t"]}</span>\n                    <span class="fn__space fn__flex-1"></span>\n                    <input type="checkbox" class="b3-switch fn__flex-center">\n                </div>\n            </span>\n        </button>\n        <button class="b3-menu__item b3-menu__item--custom" id="afwdDocMenuItem-p">\n            <span class="b3-menu__label">\n                <div class="fn__flex">\n                    <span>${u.u["afwdDocMenuItem-p"]}</span>\n                    <span class="fn__space fn__flex-1"></span>\n                    <input type="checkbox" class="b3-switch fn__flex-center">\n                </div>\n            </span>\n        </button>\n        <button class="b3-menu__item b3-menu__item--custom" id="afwdDocMenuItem-iframe">\n            <span class="b3-menu__label">\n                <div class="fn__flex">\n                    <span>${u.u["afwdDocMenuItem-iframe"]}</span>\n                    <span class="fn__space fn__flex-1"></span>\n                    <input type="checkbox" class="b3-switch fn__flex-center">\n                </div>\n            </span>\n        </button>\n        <button class="b3-menu__item b3-menu__item--custom" id="afwdDocMenuItem-sb">\n            <span class="b3-menu__label">\n                <div class="fn__flex">\n                    <span>${u.u["afwdDocMenuItem-sb"]}</span>\n                    <span class="fn__space fn__flex-1"></span>\n                    <input type="checkbox" class="b3-switch fn__flex-center">\n                </div>\n            </span>\n        </button>\n    `,a=`\n        <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 18 18">\n            <path fill="currentColor" d="m15.503 15.003l-.735.71a.75.75 0 1 0 1.042 1.078l1.886-1.82a1 1 0 0 0 0-1.44l-1.886-1.82a.75.75 0 0 0-1.042 1.079l.739.713H12.75a.75.75 0 0 0 0 1.5zM15 3a2 2 0 0 1 2 2v4.25a.75.75 0 0 1-1.5 0V5a.5.5 0 0 0-.5-.5H5a.5.5 0 0 0-.5.5v4.25a.75.75 0 0 1-1.5 0V5a2 2 0 0 1 2-2zM5.234 15.712l-.735-.71h2.752a.75.75 0 1 0 0-1.5H4.495l.739-.713a.75.75 0 0 0-1.042-1.078l-1.886 1.82a1 1 0 0 0 0 1.44l1.886 1.82a.75.75 0 0 0 1.042-1.079"/>\n        </svg>\n        <span class="b3-menu__label">${u.u.afwdDocMenuLabel}</span>\n        <svg class="b3-menu__icon b3-menu__icon--small">\n            <use xlink:href="#iconRight"></use>\n        </svg>\n        <div class="b3-menu__submenu">\n            <div class="b3-menu__items">\n                ${"doc"===n?r:s}\n            </div>\n        </div>\n    `;i.innerHTML=a,o.insertBefore(i,null===(t=o.lastChild)||void 0===t?void 0:t.previousSibling),o.insertBefore(c,i)}(n);if(!(null===(e=o.getAttribute("custom-afwd"))||void 0===e?void 0:e.split(" ")))return}(r,a)}),100)}))},t.l=function(){null===c.m||void 0===c.m||c.m.forEach((n=>{(n.querySelector(".file-tree")?[]:n.querySelectorAll(".protyle-wysiwyg")).forEach((n=>{n.style.removeProperty("--protyle-spacing"),n.dataset.v=void 0}))}))};const i=e(629),c=e(216),u=e(787);t.t=(0,i._)(r,200);const s=["NodeParagraph","NodeTable","NodeAttributeView","NodeSuperBlock","NodeVideo","NodeWidget","NodeIFrame"];function r(){null===c.m||void 0===c.m||c.m.forEach((n=>{let t=n.querySelector(".file-tree")?[]:n.querySelectorAll(".protyle-wysiwyg");setTimeout((()=>{t.forEach((n=>{let t;t=n.style.paddingLeft,t!==n.dataset.v&&(n.style.setProperty("--protyle-spacing",t),n.dataset.v=t)}))}),300)}))}},787:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,c){function u(n){try{r(o.next(n))}catch(n){c(n)}}function s(n){try{r(o.throw(n))}catch(n){c(n)}}function r(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}r((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.followSysAccentColor=t.u=void 0,t.p=function(){return o(this,void 0,void 0,(function*(){var n;s.k.h||(t.u=yield b(),function(){return o(this,void 0,void 0,(function*(){yield(0,i.getFile)("/data/snippets/Asri.config.json").then((n=>n&&200===n.status?n.json():null)).then((n=>{var e,o;n?(t.followSysAccentColor=!!n.followSysAccentColor,r.followSysAccentColor=t.followSysAccentColor,r.chroma=null!==(e=n.chroma)&&void 0!==e?e:"1",r.userCustomColor=null!==(o=n.userCustomColor)&&void 0!==o?o:"#3478f6"):t.followSysAccentColor=r.followSysAccentColor}))}))}().then((()=>{s.k.M&&(s.k.S||s.k.O||s.k.P?(document.documentElement.style.setProperty("--asri-user-custom-accent",r.userCustomColor),k(r.userCustomColor)):t.followSysAccentColor?document.documentElement.style.removeProperty("--asri-user-custom-accent"):(document.documentElement.style.setProperty("--asri-user-custom-accent",r.userCustomColor),k(r.userCustomColor)),document.documentElement.style.setProperty("--asri-c-factor",r.chroma),_="0"===r.chroma,w(r.chroma),g())})),s.k.M&&(null===(n=s.T.j)||void 0===n||n.addEventListener("click",h)))}))},t.L=function(){var n;document.documentElement.style.removeProperty("--asri-user-custom-accent"),document.documentElement.style.removeProperty("--asri-sys-accent-grayscale"),document.documentElement.style.removeProperty("--asri-c-factor"),document.documentElement.style.removeProperty("--asri-sys-accent"),document.documentElement.style.removeProperty("--asri-sys-accent-accessible"),document.documentElement.style.removeProperty("--asri-c-0"),document.documentElement.style.removeProperty("--asri-on-primary-reverse"),null===(n=s.T.j)||void 0===n||n.removeEventListener("click",h),document.querySelectorAll(".asri-config").forEach((n=>n.remove()))},t.R=b,t.A=g;const i=e(613),c=e(571),u=e(629),s=e(49),r={followSysAccentColor:!0,chroma:"1",userCustomColor:""};let a,l,d,f,m,v=!1,_=!1;function b(){return o(this,void 0,void 0,(function*(){if(["zh_CN","zh_CHT","en_US"].includes(s.k.lang)){const n=yield fetch(`/appearance/themes/Asri/i18n/${s.k.lang}.json`);return t.u=n.json()}{const n=yield fetch("/appearance/themes/Asri/i18n/en_US.json");return t.u=n.json()}}))}function p(){return o(this,void 0,void 0,(function*(){yield(0,i.C)("/data/snippets/Asri.config.json",JSON.stringify(r,void 0,4))}))}function h(){return o(this,void 0,void 0,(function*(){Object.keys(t.u).length||(t.u=yield b()),setTimeout(y,0)}))}function y(){var n,e;if(document.querySelector(".asri-config"))return;const o=document.querySelector('#commonMenu[data-name="barmode"] .b3-menu__items');if(!o)return;const i=`\n        <button class="b3-menu__separator asri-config"></button>\n        <button class="b3-menu__item asri-config" id="pickColor">\n            <svg class="b3-menu__icon"></svg>\n            <label for="asriColorPicker" class="be-menu__label">${t.u.pickColor}</label>\n            <input id="asriColorPicker" type="color" value="${r.userCustomColor}">\n        </button>\n        <button class="b3-menu__item asri-config" id="followSysAccent">\n            <svg class="b3-menu__icon"></svg>\n            <label for="" class="be-menu__label">${t.u.followSysAccent}</label>\n        </button>\n        <button class="b3-menu__item asri-config" data-type="nobg" id="asriChroma">\n            <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">\n                <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 11l-8-8l-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0zM5 2l5 5m-8 6h15m5 7a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4c.3 1.6 2 2.4 2 4" />\n            </svg>\n            <div aria-label="${t.u.asriChroma+(null!==(e=null!==(n=null==f?void 0:f.value)&&void 0!==n?n:r.chroma)&&void 0!==e?e:"1")}" class="b3-tooltips b3-tooltips__n">\n                <input style="box-sizing: border-box" type="range" id="asriChromaSlider" class="b3-slider fn__block" min="0" max="5" step="0.1" value="1">\n            </div>\n        </button>\n`,c=document.createRange().createContextualFragment(i);o.appendChild(c),l=document.getElementById("followSysAccent"),d=document.getElementById("pickColor"),f=document.getElementById("asriChromaSlider"),m=d.lastElementChild,l&&d&&f&&m&&(l.classList.toggle("b3-menu__item--selected",t.followSysAccentColor),d.classList.toggle("b3-menu__item--selected",!t.followSysAccentColor),f.value=r.chroma||"1",f.parentElement.ariaLabel=t.u.asriChroma+r.chroma,function(){if(!(l&&d&&f&&m))return;const n=(0,u._)((()=>p()),200);s.k.S||s.k.O||s.k.P?l.classList.add("fn__none"):l.addEventListener("click",e);function e(){t.followSysAccentColor?(t.followSysAccentColor=!1,l.classList.remove("b3-menu__item--selected"),d.classList.add("b3-menu__item--selected"),document.documentElement.style.setProperty("--asri-user-custom-accent",r.userCustomColor||a||"#3478f6"),w(r.chroma),k(r.userCustomColor||a||"#3478f6"),r.followSysAccentColor=!1):(t.followSysAccentColor=!0,l.classList.add("b3-menu__item--selected"),d.classList.remove("b3-menu__item--selected"),document.documentElement.style.removeProperty("--asri-user-custom-accent"),r.followSysAccentColor=!0,g()),p()}function o(){t.followSysAccentColor&&(t.followSysAccentColor=!1,l.classList.remove("b3-menu__item--selected"),d.classList.add("b3-menu__item--selected"),document.documentElement.style.setProperty("--asri-user-custom-accent",r.userCustomColor),w(r.chroma),k(r.userCustomColor),r.userCustomColor=r.userCustomColor,r.followSysAccentColor=!1,p())}function i(){const n=m.value;document.documentElement.style.setProperty("--asri-user-custom-accent",n),k(n)}function c(){l.classList.remove("b3-menu__item--selected"),d.classList.add("b3-menu__item--selected"),k(m.value),r.userCustomColor=m.value,t.followSysAccentColor=!1,r.followSysAccentColor=!1,p()}function v(){const e=this.value;document.documentElement.style.setProperty("--asri-c-factor",e),this.parentElement.ariaLabel=t.u.asriChroma+e,r.chroma=e,_="0"===e,w(e),n()}d.addEventListener("click",o),m.addEventListener("input",i),m.addEventListener("change",c),f.addEventListener("input",v)}())}function g(){if(!(s.k.S||s.k.O||s.k.P)){const n="#"+c.remote.systemPreferences.getAccentColor().slice(0,6),e=(0,u.I)(n);if(!e)return;a!==n&&(document.documentElement.style.setProperty("--asri-sys-accent",n),e.s>.28?document.documentElement.style.setProperty("--asri-sys-accent-accessible",n):document.documentElement.style.removeProperty("--asri-sys-accent-accessible"),v=0===e.s,document.body.classList.add("asri-mode-transition"),setTimeout((()=>{document.body.classList.remove("asri-mode-transition")}),350),a=n),t.followSysAccentColor&&(w(e.s),k(n))}}function w(n){return"0"===String(n)||t.followSysAccentColor&&v||_?(document.documentElement.style.setProperty("--asri-c-0","0"),!0):(document.documentElement.style.removeProperty("--asri-c-0"),!1)}t.followSysAccentColor=!0;const x="light"===s.k.N?.81:.79;function k(n){const t=(0,u.$)(n);t&&(t>x?document.documentElement.style.setProperty("--asri-on-primary-reverse","light"===s.k.N?".4":".3"):document.documentElement.style.removeProperty("--asri-on-primary-reverse"))}},344:(n,t)=>{function e(){document.body.classList.toggle("has-exportimg",!!document.querySelector('[data-key="dialog-exportimage"]'))}Object.defineProperty(t,"__esModule",{value:!0}),t.B=function(n,t){e()},t.D=e},818:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,c){function u(n){try{r(o.next(n))}catch(n){c(n)}}function s(n){try{r(o.throw(n))}catch(n){c(n)}}function r(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}r((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.F=function(){return o(this,void 0,void 0,(function*(){const n=c.T.V?c.T.V:yield(0,i.H)("#dockLeft");c.T.U||(yield(0,i.H)(".layout__dockl"));const t=c.T.W;for(let e of[n,t]){let t=(0,u.J)(e===n?"L":"R"),o=(0,u.K)(e===n?"L":"R");t&&o?null==e||e.classList.add("dock-layout-expanded"):null==e||e.classList.remove("dock-layout-expanded")}}))},t.Y=function(){return o(this,void 0,void 0,(function*(){var n,t,e;if(c.k.O)return;const o=yield(0,u.q)(),i=!(0,u.J)("B")&&(0,u.K)("B");null===(n=c.T.toolbar)||void 0===n||n.nextElementSibling.classList.toggle("has-dockb",o),null===(t=c.T.toolbar)||void 0===t||t.nextElementSibling.classList.toggle("has-layout-dockb-float",i),null===(e=c.T.G)||void 0===e||e.classList.toggle("has-layout-dockb-float",i)}))},t.X=function(){var n,t;null===(n=c.T.toolbar)||void 0===n||n.nextElementSibling.classList.remove("has-dockb"),null===(t=c.T.toolbar)||void 0===t||t.nextElementSibling.classList.remove("has-layout-dockb-float")},t.Z=function(){var n;null===(n=document.querySelector(".dock-layout-expanded"))||void 0===n||n.classList.remove("dock-layout-expanded")};const i=e(629),c=e(49),u=e(216)},937:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,c){function u(n){try{r(o.next(n))}catch(n){c(n)}}function s(n){try{r(o.throw(n))}catch(n){c(n)}}function r(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}r((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.nn=void 0,t.tn=c,t.en=function(){document.querySelectorAll(".protyle .protyle-background.without-icon").forEach((n=>{n.classList.remove("without-icon")}))};const i=e(629);function c(){return o(this,void 0,void 0,(function*(){let n=yield(0,i.cn)(".protyle-top>.protyle-background");null==n||n.forEach((n=>{var t;!(null===(t=n.querySelector(".protyle-background__img img"))||void 0===t?void 0:t.classList.contains("fn__none"))&&n.querySelector(".protyle-background__icon.fn__none")?n.classList.add("without-icon"):n.classList.remove("without-icon")}))}))}t.nn=(0,i._)(c)},261:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.un=function(){i.forEach((({sn:n,className:t})=>{n&&document.body.classList.add(t)}))},t.rn=function(){i.forEach((({className:n})=>{document.body.classList.remove(n)}))};const o=e(49),i=[{sn:o.k.an,className:"body-asri--mac"},{sn:o.k.P,className:"body-asri--linux"},{sn:o.k.O,className:"body-asri--mobile"},{sn:o.k.S,className:"body-asri--browser"},{sn:o.k.ln,className:"body-asri--android"},{sn:o.k.h,className:"body-asri--iosApp"},{sn:o.k.dn,className:"body-asri--readOnly"}]},2:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,c){function u(n){try{r(o.next(n))}catch(n){c(n)}}function s(n){try{r(o.throw(n))}catch(n){c(n)}}function r(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}r((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.fn=t.mn=t.vn=void 0,t._n=function(){return o(this,void 0,void 0,(function*(){(0,v.un)(),(0,_.bn)(),(0,y.pn)(),(0,p.hn)(),(0,l.p)(),s.k.O||(yield(0,r.yn)(),yield(0,h.gn)("initials"),(0,h.wn)()),j(),(0,f.Y)(),(0,p.xn)(),g.start(document,"mouseup"),w.start(document,"dragend"),x.start(document,"keyup"),M.observe(document.body,u.kn),k.observe(document.body,{childList:!0}),s.T.Mn||(yield(0,c.H)(".layout__center")),s.k.O||(S.observe(s.T.Mn),O.observe(document.body))}))},t.Sn=function(){return o(this,void 0,void 0,(function*(){(0,v.rn)(),(0,_.On)(),(0,y.Pn)(),(0,p.jn)(),s.k.O||(yield(0,h.Tn)()),(0,f.Z)(),(0,b.Ln)(),(0,m.en)(),(0,a.l)(),(0,f.X)(),(0,p.Rn)(),g.remove(document,"mouseup"),w.remove(document,"dragend"),x.remove(document,"keyup"),M.disconnect(),k.disconnect((()=>{document.body.classList.remove("has-exportimg")})),document.body.classList.remove("body-asri--fullscreen"),s.k.O||(S.disconnect(),O.disconnect()),(0,l.L)()}))};const i=e(796),c=e(629),u=e(766),s=e(49),r=e(216),a=e(12),l=e(787),d=e(344),f=e(818),m=e(937),v=e(261),_=e(832),b=e(844),p=e(414),h=e(376),y=e(130),g=new i.An(P),w=new i.An(P),x=new i.An(P),k=new u.Cn((0,c._)(d.B,500)),M=new u.Cn((function(n,t){var e;for(let t of n)t.target.classList.contains("b3-list-item--focus")&&((0,b.In)(),(0,m.nn)()),t.target===document.body&&((null===(e=t.oldValue)||void 0===e?void 0:e.includes("body--blur"))||t.target.className.includes("body--blur"))&&(0,r.yn)().then((()=>{j(),!s.k.h&&l.followSysAccentColor&&s.k.M&&(0,l.A)()}))})),S=new u.Nn((function(n,e){(0,h.$n)(0,t.vn,r.Bn).then(h.Dn),(0,a.t)(),(0,p.zn)()})),O=new u.Nn((function(n,e){for(let e of n){t.vn=!0,T();const{inlineSize:n}=e.contentBoxSize[0];if(e.target instanceof HTMLElement){if(!e.target.dataset.Fn){e.target.dataset.Fn=n+"";continue}const o=n-parseFloat(e.target.dataset.Fn);e.target.dataset.Fn=n+"",t.fn=o}}}));function P(n){j(n)}function j(n){return o(this,void 0,void 0,(function*(){function t(){setTimeout((()=>o(this,void 0,void 0,(function*(){(0,f.F)(),(0,m.nn)(),(0,p.zn)(),(0,p.hn)(),yield(0,r.yn)(),(0,a.o)(),(0,f.Y)(),(0,p.xn)(),!s.k.h&&l.followSysAccentColor&&s.k.M&&(0,l.A)()}))),0)}n?(n.type.startsWith("mouse")||n.type.startsWith("drag")||n instanceof KeyboardEvent&&("Control"===n.key||"Alt"===n.key||"Shift"===n.key||"Meta"===n.key))&&(t(),setTimeout((()=>{(0,h.Vn)(),(0,h.$n)(0,!1,r.Bn).then(h.Dn)}),0)):(t(),(0,h.$n)().then(h.Dn))}))}t.vn=!1,t.fn=0;const T=(0,c._)((()=>{t.vn=!1,(0,h.Hn)(),(0,r.En)(),r.Bn||(0,h.Vn)(),(0,h.$n)(t.fn,t.vn,r.Bn).then(h.Dn),t.fn=0}),200)},832:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,c){function u(n){try{r(o.next(n))}catch(n){c(n)}}function s(n){try{r(o.throw(n))}catch(n){c(n)}}function r(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}r((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.bn=function(){return o(this,void 0,void 0,(function*(){if(c||u)for(let n=0;n<document.styleSheets.length;n++){let t=document.styleSheets[n];try{for(let n=0;n<t.cssRules.length;n++){let e=t.cssRules[n];e.selectorText&&e.selectorText.includes("::-webkit-scrollbar")&&(e.style.width||e.style.height||e.style.backgroundColor)&&(s.push({styleSheet:t,Un:e.cssText}),t.deleteRule(n),n--)}}catch(n){}}}))},t.On=function(){return o(this,void 0,void 0,(function*(){if(s)for(let n=0;n<s.length;n++){let t=s[n];t.styleSheet.insertRule(t.Un,t.styleSheet.cssRules.length)}}))};const i=e(49),{an:c,O:u}=i.k,s=[]},844:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,c){function u(n){try{r(o.next(n))}catch(n){c(n)}}function s(n){try{r(o.throw(n))}catch(n){c(n)}}function r(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}r((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.In=void 0,t.Wn=s,t.Ln=function(){document.querySelectorAll(".file-tree .has-focus").forEach((n=>n.classList.remove("has-focus")))};const i=e(629),c=e(49),{O:u}=c.k;function s(){return o(this,void 0,void 0,(function*(){if(u)return;c.T.U||(yield(0,i.H)(".layout__dockl"));let n=document.querySelectorAll(".file-tree .b3-list-item--focus");n.length&&(document.querySelectorAll(".file-tree .has-focus").forEach((n=>n.classList.remove("has-focus"))),n.forEach((n=>{n.nextElementSibling&&"UL"===n.nextElementSibling.tagName&&!n.nextElementSibling.classList.contains("fn__none")||n.parentNode instanceof Element&&n.parentNode.classList.add("has-focus")})))}))}t.In=(0,i._)(s)},414:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,c){function u(n){try{r(o.next(n))}catch(n){c(n)}}function s(n){try{r(o.throw(n))}catch(n){c(n)}}function r(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}r((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.zn=void 0,t.Jn=s,t.hn=function(){const n=(0,i.Kn)()?0:32;document.body.style.setProperty("--status-height",`${n}px`)},t.jn=function(){document.body.style.removeProperty("--status-height"),setTimeout((()=>{var n,t;null===(n=document.getElementById("status"))||void 0===n||n.style.removeProperty("max-width"),null===(t=document.getElementById("status"))||void 0===t||t.style.removeProperty("transform")}),200)},t.xn=function(){var n,t;if(!(0,i.Kn)()){const e=null===(n=c.T.Yn)||void 0===n?void 0:n.querySelectorAll(".layout__center .layout-tab-container"),o=c.T.status;null==e||e.forEach((n=>{let t=n.querySelector(".file-tree");t&&!t.classList.contains("fn__none")&&(0,u.qn)(n,o)?n.style.paddingBottom="35px":n.style.removeProperty("padding-bottom")}));const i=document.getElementById("searchList"),s=document.getElementById("searchPreview");(i||s)&&((0,u.qn)(i,o)?i.style.paddingBottom="35px":i.style.removeProperty("padding-bottom"),(0,u.qn)(s,o)?s.style.paddingBottom="35px":s.style.removeProperty("padding-bottom"));const r=document.getElementById("viewerContainer");r&&((0,u.qn)(r,o)?r.style.paddingBottom="35px":r.style.removeProperty("padding-bottom")),null===(t=c.T.Yn)||void 0===t||t.querySelectorAll(".card__main").forEach((n=>{n&&((0,u.qn)(n,o)?n.style.paddingBottom="35px":n.style.removeProperty("padding-bottom"))}))}},t.Rn=function(){var n,t;null===(n=c.T.Yn)||void 0===n||n.querySelectorAll(".layout__center .layout-tab-container").forEach((n=>{n.style.removeProperty("padding-bottom")})),null===(t=c.T.Yn)||void 0===t||t.querySelectorAll(".card__main").forEach((n=>{n.style.removeProperty("padding-bottom")}));const e=document.getElementById("searchList"),o=document.getElementById("searchPreview"),i=document.getElementById("viewerContainer");for(const n of[e,o,i])n&&n.style.removeProperty("padding-bottom")};const i=e(216),c=e(49),u=e(629);function s(){return o(this,void 0,void 0,(function*(){var n,t;if(!c.k.O&&!c.k.Gn)if(c.T.status||(yield(0,u.H)("#status")),yield(0,i.q)())null===(n=c.T.status)||void 0===n||n.style.removeProperty("max-width"),null===(t=c.T.status)||void 0===t||t.style.removeProperty("transform");else{function e(n,t){c.T.status.style.transform=`translate(${n}px, ${t}px)`}let o=(c.T.Yn||(yield(0,u.H)("#layouts"))).querySelector(".layout__center");if(o&&c.T.Qn&&!c.T.status.classList.contains(".fn__none")){let s=c.T.Qn.clientWidth,r=o.clientWidth,a=0;c.T.Xn||(yield(0,u.H)(".layout__dockb")),a=c.T.Xn&&!c.T.Xn.classList.contains(".fn__none")&&(0,i.J)("B")?-1*c.T.Xn.clientHeight:0,c.T.status.style.maxWidth=r-12+"px";let l=(0,i.Zn)("R"),d=!(0,i.J)("R")&&(0,i.K)("R");l&&d?e(0,a):!l&&d?e(-40,a):l||d?l&&!d&&e(-1*s,a):e(-1*(s+40),a)}}}))}t.zn=(0,u._)(s)},376:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,c){function u(n){try{r(o.next(n))}catch(n){c(n)}}function s(n){try{r(o.throw(n))}catch(n){c(n)}}function r(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}r((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.gn=y,t.Hn=function(){return o(this,void 0,void 0,(function*(){c.k.an&&((0,u.isFullScreen)()?(document.body.classList.add("body-asri--fullscreen"),_-=h?0:88,h=!0):(document.body.classList.remove("body-asri--fullscreen"),null==r||r.style.setProperty("width","0px"),_=yield y("initials","L"),null==r||r.style.removeProperty("width"),h=!1))}))},t.$n=function(){return o(this,arguments,void 0,(function*(n=0,t=!1,e=!1){if(c.k.Gn||c.k.O)return{nt:!1,tt:0};let u=c.T.Mn||(yield(0,i.H)(".layout__center"));return new Promise((i=>o(this,void 0,void 0,(function*(){var o,s,a,l,d,g;t&&(b+=n),_&&b||(yield y("initials")),f=u.getBoundingClientRect(),v=c.T.et.getBoundingClientRect(),m=c.T.ot.getBoundingClientRect();let w=f.left,x=f.right,k=c.T.it.getBoundingClientRect().left;t||(w>_+8?(null==p||p.style.setProperty("--topbar-left-spacing","0"),c.k.an&&h||(yield y("initials","L")),null==r||r.classList.remove("asri-expanded")):c.k.an&&!c.k.S?(p.style.setProperty("--topbar-left-spacing",w-v.right+4+"px"),null==r||r.classList.add("asri-expanded")):(p.style.setProperty("--topbar-left-spacing",w-m.right+4+"px"),null==r||r.classList.add("asri-expanded")),x<b-8&&!e?(p.style.setProperty("--topbar-right-spacing","0"),yield y("initials","R"),null===(o=c.T.W)||void 0===o||o.style.removeProperty("--avoid-topbar"),null===(s=c.T.Qn)||void 0===s||s.style.removeProperty("--avoid-topbar")):c.k.an||c.k.S?(p.style.setProperty("--topbar-right-spacing",window.innerWidth-x+1+"px"),null===(a=c.T.W)||void 0===a||a.style.setProperty("--avoid-topbar","4px"),null===(l=c.T.Qn)||void 0===l||l.style.setProperty("--avoid-topbar","4px")):(p.style.setProperty("--topbar-right-spacing",k-x+6+"px"),null===(d=c.T.W)||void 0===d||d.style.setProperty("--avoid-topbar","calc(var(--toolbar-height) - 6px)"),null===(g=c.T.Qn)||void 0===g||g.style.setProperty("--avoid-topbar","calc(var(--toolbar-height) - 6px)"))),i({nt:!0,tt:x})}))))}))},t.Dn=function(){return o(this,arguments,void 0,(function*({nt:n,tt:t}={nt:!1,tt:0}){var e,r;n&&(l=null===(e=c.T.toolbar)||void 0===e?void 0:e.getBoundingClientRect(),yield y("rect"),f=null===(r=c.T.Mn)||void 0===r?void 0:r.getBoundingClientRect(),s&&(t<b-8?(s.style.setProperty("--container-bg","var(--b3-list-hover)"),s.style.left=t+"px",s.style.right="0",s.style.removeProperty("height"),s.style.removeProperty("top"),s.style.removeProperty("width")):(s.style.setProperty("--container-bg","var(--b3-border-color-trans)"),s.style.left=d.right-10+"px",s.style.width="2px",s.style.height="21px",s.style.top="13.5px")),null===u.m||void 0===u.m||u.m.forEach((n=>o(this,void 0,void 0,(function*(){let t,e=n.querySelector('.fn__flex-column[data-type="wnd"] > .fn__flex:first-child');t=null==e?void 0:e.getBoundingClientRect();let o=t.left<d.left?d.left-t.left-4:0,u=t.right>d.right?t.right-d.right+8:0;(0,i.qn)(e,c.T.ct)||(0,i.qn)(e,c.T.toolbar)?(e.style.paddingLeft=o+"px",e.style.paddingRight=u+"px",t.right-u-240<d.left&&t.left<d.left||t.left+o+240>d.right&&t.right>d.right?(e.style.paddingTop="42px",e.style.paddingLeft="0",e.style.paddingRight="0"):e.style.removeProperty("padding-top")):(e.style.removeProperty("padding-left"),e.style.removeProperty("padding-right"),e.style.removeProperty("padding-top"))})))))}))},t.wn=function(){return o(this,void 0,void 0,(function*(){!function(){if(c.k.O)return;s=g("AsriPluginsIconsDivider",void 0,c.T.ct),r=c.k.an&&!c.k.S?g("AsriTopbarLeftSpacing",void 0,c.T.et):g("AsriTopbarLeftSpacing",void 0,c.T.ot),a=c.k.an||c.k.S?g("AsriTopbarRightSpacing"):g("AsriTopbarRightSpacing",c.T.it);const n=document.createElementNS("http://www.w3.org/2000/svg","svg");null==a||a.appendChild(n.cloneNode(!0)),null==s||s.appendChild(n.cloneNode(!0)),null==r||r.appendChild(n.cloneNode(!0))}()}))},t.Tn=function(){return o(this,void 0,void 0,(function*(){var n,t;yield(0,u.yn)(),function(){s&&(s.remove(),s=void 0);r&&(r.remove(),r=void 0);a&&(a.remove(),a=void 0)}(),null===u.m||void 0===u.m||u.m.forEach((n=>{let t=n.firstElementChild;t.style.removeProperty("padding-top"),t.style.removeProperty("padding-left"),t.style.removeProperty("padding-right")})),c.T.Mn.dataset.Fn=void 0,document.body.dataset.Fn=void 0,null===(n=c.T.W)||void 0===n||n.style.removeProperty("--avoid-topbar"),null===(t=c.T.Qn)||void 0===t||t.style.removeProperty("--avoid-topbar")}))},t.Vn=function(){return o(this,void 0,void 0,(function*(){r&&a&&(r.style.setProperty("width","0px"),a.style.setProperty("width","0px"),yield y("initials"),r.style.removeProperty("width"),a.style.removeProperty("width"))}))};const i=e(629),c=e(49),u=e(216);let s,r,a,l,d,f,m,v,_,b,p=c.T.toolbar,h=!1;function y(){return o(this,arguments,void 0,(function*(n="rect",...t){const e=c.T.ct||(yield(0,i.H)("#drag"));return!e||c.k.Gn?-1:new Promise((o=>{"initials"===n?(t.length&&!t.includes("L")||(_=e.getBoundingClientRect().left,o(_)),t.length&&!t.includes("R")||(b=e.getBoundingClientRect().right,o(b))):(d=e.getBoundingClientRect(),o(d))}))}))}function g(n,t=void 0,e=void 0){if(document.getElementById(n))return;if(!c.T.toolbar)return;let o=document.createElement("div");return o.id=n,t?c.T.toolbar.insertBefore(o,t):e?c.T.toolbar.insertBefore(o,e.nextSibling):c.T.toolbar.appendChild(o),o}},130:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.pn=function(){i.k.an&&(i.k.S||c(16),i.k.Gn&&c(14))},t.Pn=function(){i.k.an&&(i.k.S||c(8),i.k.Gn&&c(8,13))};const o=e(571),i=e(49);function c(n,t=n){o.remote&&o.remote.getCurrentWindow().setWindowButtonPosition({x:n,y:t})}},613:function(n,t){var e=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,c){function u(n){try{r(o.next(n))}catch(n){c(n)}}function s(n){try{r(o.throw(n))}catch(n){c(n)}}function r(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}r((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getFile=function(n){return e(this,void 0,void 0,(function*(){const t=yield fetch("/api/file/getFile",{method:"POST",headers:{ut:"Token ''"},body:JSON.stringify({path:n})});return t.ok?t:null}))},t.C=function(n,t){return e(this,arguments,void 0,(function*(n,t,e=!1,o=Date.now()){let i=new Blob([t]),c=n.split("/").pop(),u=new File([i],c),s=new FormData;s.append("path",n),s.append("file",u),s.append("isDir",String(e)),s.append("modTime",String(o));const r=yield fetch("/api/file/putFile",{body:s,method:"POST",headers:{ut:"Token ''"}});return r.ok?yield r.json():null}))}},571:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.remote=void 0;const o=e(49);t.remote=o.k.S||o.k.O?null:e(21)},796:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.An=void 0;t.An=class{constructor(n){this.st=n}start(n,t,e){n.addEventListener(t,this.st,e)}remove(n,t,e){n.removeEventListener(t,this.st,e)}}},629:function(n,t){var e=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,c){function u(n){try{r(o.next(n))}catch(n){c(n)}}function s(n){try{r(o.throw(n))}catch(n){c(n)}}function r(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}r((o=o.apply(n,t||[])).next())}))};function o(n,t){let e=!1;return n&&t&&(e=n.right>t.left&&n.bottom>t.top&&n.left<t.left+t.width&&n.top<t.top+t.height),e}Object.defineProperty(t,"__esModule",{value:!0}),t.rt=function(n,t){n.includes(t)||n.push(t)},t._=function(n,t=200){let e=null;return(...o)=>{e&&clearTimeout(e),e=setTimeout((()=>{n(...o),e=null}),t)}},t.I=function(n){if(!n)return;const t=parseInt(n.substring(1,3),16)/255,e=parseInt(n.substring(3,5),16)/255,o=parseInt(n.substring(5,7),16)/255,i=Math.max(t,e,o),c=Math.min(t,e,o),u=(i+c)/2;if(i===c)return{lt:0,s:0,dt:u};let s=0;const r=i-c,a=u>.5?r/(2-i-c):r/(i+c);switch(i){case t:s=(e-o)/r+(e<o?6:0);break;case e:s=(o-t)/r+2;break;case o:s=(t-e)/r+4}return s/=6,{lt:s,s:a,dt:u}},t.$=function(n){if(!n)return;4===(n=n.replace(/^#/,"")).length?n.substring(0,3):8===n.length&&n.substring(0,6);3===n.length&&(n=n.split("").map((function(n){return n+n})).join(""));let t=parseInt(n.slice(0,2),16)/255,e=parseInt(n.slice(2,4),16)/255,o=parseInt(n.slice(4,6),16)/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92;let i=.4124564*t+.3575761*e+.1804375*o,c=.2126729*t+.7151522*e+.072175*o,u=.0193339*t+.119192*e+.9503041*o,s=.8189330101*i+.3618667424*c-.1288597137*u,r=.0329845436*i+.9293118715*c+.0361456387*u,a=.0482003018*i+.2643662691*c+.633851707*u;return s=Math.cbrt(s),r=Math.cbrt(r),a=Math.cbrt(a),.2104542553*s+.793617785*r-.0040720468*a},t.ft=function(){document.body.classList.add("asri-mode-transition"),setTimeout((()=>{document.body.classList.remove("asri-mode-transition")}),350)},t.qn=function(n,t){if(!n||!t)return!1;let e,i;e=n.getBoundingClientRect(),i=t.getBoundingClientRect();return o(e,i)},t.vt=function(n,t){return e(this,void 0,void 0,(function*(){return!(!n||!t)&&new Promise((e=>{let i,c;i=n.getBoundingClientRect(),c=t.getBoundingClientRect();e(o(i,c))}))}))},t._t=function(n,t){if(!n.length||!t.length)return!1;const e=new Set(n),o=new Set(t);if(e.size!==o.size)return!1;for(const n of e)if(!o.has(n))return!1;return!0},t.H=function(n){return e(this,arguments,void 0,(function*(n,t=document,e=10,o=200){let i=0;for(;i<e;){const e=t.querySelector(n);if(e)return e;yield new Promise((n=>setTimeout(n,o))),i++}}))},t.cn=function(n){return e(this,arguments,void 0,(function*(n,t=document,e=10,o=200){let i=0;for(;i<e;){const e=t.querySelectorAll(n);if(e.length>0)return e;yield new Promise((n=>setTimeout(n,o))),i++}}))}},766:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.kn=t.Cn=t.Nn=void 0;t.Nn=class{constructor(n){this.st=(t,e)=>n(t,e),this.bt=new ResizeObserver(this.st)}observe(n,t){this.bt.observe(n,t)}disconnect(n){this.bt.disconnect(),n&&n()}unobserve(n){this.bt.unobserve(n)}};t.Cn=class{constructor(n){this.st=(t,e)=>n(t,e),this.ht=new MutationObserver(this.st)}observe(n,t){this.ht.observe(n,t)}disconnect(n){this.ht.disconnect(),n&&n()}},t.kn={attributes:!0,subtree:!0,attributeFilter:["class"],attributeOldValue:!0}},49:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.k=t.T=void 0;const e=navigator.userAgent;let o=null,i=null,c=null,u=null,s=null,r=null,a=null,l=null,d=null,f=null,m=null,v=null,_=null,b=null,p=null,h=null,y=null,g=null;t.T={get Yn(){return null!=o?o:o=document.getElementById("layouts")},get Mn(){return null!=i?i:i=document.querySelector(".layout__center")},get toolbar(){return null!=c?c:c=document.getElementById("toolbar")},get V(){return null!=u?u:u=document.getElementById("dockLeft")},get W(){return null!=s?s:s=document.getElementById("dockRight")},get G(){return null!=r?r:r=document.getElementById("dockBottom")},get status(){return null!=a?a:a=document.getElementById("status")},get U(){return null!=l?l:l=document.querySelector(".layout__dockl")},get Qn(){return null!=d?d:d=document.querySelector(".layout__dockr")},get Xn(){return null!=f?f:f=document.querySelector(".layout__dockb")},get et(){return null!=m?m:m=document.getElementById("barSync")},get ot(){return null!=v?v:v=document.getElementById("barForward")},get yt(){return null!=_?_:_=document.getElementById("toolbarVIP")},get ct(){return null!=b?b:b=document.getElementById("drag")},get gt(){return null!=p?p:p=document.getElementById("barPlugins")},get it(){return null!=h?h:h=document.getElementById("barSearch")},get j(){return null!=y?y:y=document.getElementById("barMode")},get wt(){return null!=g?g:g=document.getElementById("barMore")}},t.k={an:navigator.platform.indexOf("Mac")>-1,P:navigator.platform.indexOf("Linux")>-1,ln:/Android/.test(e),O:!!document.getElementById("sidebar"),S:!e.startsWith("SiYuan")||e.indexOf("iPad")>-1||/Android/.test(e)&&!/(?:Mobile)/.test(e),Gn:document.body.classList.contains("body--window"),h:(/iOS/i.test(e)||/iPad/i.test(e))&&/AppleWebKit/i.test(e)&&e.startsWith("SiYuan/"),lang:window.siyuan.config.lang,M:CSS.supports("color","oklch(from red calc(l * 0.5) 0 h)"),dn:window.siyuan.config.readonly,N:window.siyuan.config.appearance.mode>0?"dark":"light"}},216:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,c){function u(n){try{r(o.next(n))}catch(n){c(n)}}function s(n){try{r(o.throw(n))}catch(n){c(n)}}function r(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}r((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.m=t.xt=t.Bn=void 0,t.En=s,t.J=function(n){const t="B"===n?u.T.Xn:"L"===n?u.T.U:u.T.Qn;return!(!t||t.classList.contains("layout--float"))},t.K=function(n){const t="B"===n?u.T.Xn:"L"===n?u.T.U:u.T.Qn;let e;if(!t)return!1;e="B"===n?t.style.height:t.style.width;return!(!e||"0px"===e)},t.Zn=function(n="L"){const t="B"===n?u.T.G:"L"===n?u.T.V:u.T.W;return!(!t||!t.classList.contains("fn__none"))},t.q=function(){return o(this,void 0,void 0,(function*(){return u.T.G||(yield(0,c.H)(".layout__dockb")),!(!u.T.G||u.T.G.classList.contains("fn__none"))}))},t.isFullScreen=function(){return!(!i.remote||!i.remote.getCurrentWindow().isFullScreen())},t.Kn=function(){return!(!u.T.status||!u.T.status.classList.contains("fn__none"))},t.yn=function(){return o(this,void 0,void 0,(function*(){return yield(0,c.cn)('.layout__center [data-type="wnd"]').then((n=>{t.m=n})),t.m}))};const i=e(571),c=e(629),u=e(49);function s(){var n,e;u.T.toolbar&&(t.Bn=(null===(n=u.T.toolbar)||void 0===n?void 0:n.scrollWidth)>u.T.toolbar.clientWidth,(null===(e=u.T.wt)||void 0===e?void 0:e.classList.contains("fn__none"))||(t.Bn=!0))}t.Bn=!1,t.xt=(0,c._)(s),t.m=document.querySelectorAll('.layout__center [data-type="wnd"]')},21:n=>{n.exports=require("@electron/remote")}},t={};function e(o){var i=t[o];if(void 0!==i)return i.exports;var c=t[o]={exports:{}};return n[o].call(c.exports,c,c.exports,e),c.exports}(()=>{const n=e(2),t=e(629);(0,n._n)(),window.destroyTheme=()=>{(0,t.ft)(),(0,n.Sn)()}})()})();