!function(){const u={layouts:document.getElementById("layouts"),status:document.getElementById("status"),dockl:document.getElementById("dockLeft"),dockr:document.getElementById("dockRight"),dockb:document.getElementById("dockBottom"),layoutDockl:document.querySelector(".layout__dockl"),layoutDockr:document.querySelector(".layout__dockr"),layoutDockb:document.querySelector(".layout__dockb"),toolbar:document.getElementById("toolbar"),barSync:document.getElementById("barSync"),barForward:document.getElementById("barForward"),toolbarVIP:document.getElementById("toolbarVIP"),drag:document.getElementById("drag"),barPlugins:document.getElementById("barPlugins"),barSearch:document.getElementById("barSearch"),barMode:document.getElementById("barMode")},s=-1<navigator.platform.indexOf("Mac"),c=-1<navigator.platform.indexOf("Linux"),l=document.getElementById("sidebar")&&document.getElementById("editor"),d=0<u.toolbar?.classList.contains("toolbar--browser"),a=0<document.body.classList.contains("body--window");var o="android"===window.siyuan.config.system.container,n=navigator.userAgent;const e=(/iOS/i.test(n)||/iPad/i.test(n))&&/AppleWebKit/i.test(n),t=window.siyuan.config.lang,R=0<window.siyuan.config.appearance.mode?"dark":"light",i=CSS.supports("color","oklch(from red calc(l * 0.5) 0 h)"),m=[],r=[],b=[],f=(s&&(document.body.classList.add("body--mac"),m.push(".body--mac")),c&&(document.body.classList.add("body--linux"),m.push(".body--linux")),l&&(document.body.classList.add("body--mobile"),m.push(".body--mobile")),d&&(document.body.classList.add("body--browser"),m.push(".body--browser")),o&&(document.body.classList.add("body--android"),m.push(".body--android")),e&&(document.body.classList.add("body--iosApp"),m.push(".body--iosApp")),!l&&u.toolbar&&(x("AsriPluginsIconsDivider",void 0,u.drag),s&&!d?x("AsriTopbarLeftSpacing",void 0,u.barSync):x("AsriTopbarLeftSpacing",void 0,u.barForward),s||d?x("AsriTopbarRightSpacing"):x("AsriTopbarRightSpacing",u.barSearch)),document.getElementById("AsriPluginsIconsDivider")),j=document.getElementById("AsriTopbarLeftSpacing"),B=document.getElementById("AsriTopbarRightSpacing"),p=u.toolbar;function h(e,t){e.includes(t)||e.push(t)}const g={useSeparateScheme:!1,curScheme:"universal",schemes:{light:{followSysAccentColor:!0,userCustomColor:"#3478f6",chroma:"1",hueShift:"0"},dark:{followSysAccentColor:!0,userCustomColor:"#3478f6",chroma:"1",hueShift:"0"},universal:{followSysAccentColor:!0,userCustomColor:"#3478f6",chroma:"1",hueShift:"0"}}},O={zh_CN:{followSysAccent:"跟随系统强调色",useSeparateScheme:"当前配置：",pickColor:"自定义主题色",asriChroma:"色度：",asriHueShift:"色相偏移：",light:"亮色",dark:"暗色",universal:"全局"},zh_CHT:{followSysAccent:"跟隨系統強調色",useSeparateScheme:"當前配置：",pickColor:"自定義主題色",asriChroma:"色度：",asriHueShift:"色相偏移：",light:"淺色",dark:"深色",universal:"全局"},en_US:{followSysAccent:"Follow system accent color",useSeparateScheme:"Current config: ",pickColor:"Customize theme color",asriChroma:"Chroma: ",asriHueShift:"Hue shift: ",light:"Light mode",dark:"Dark mode",universal:"Universal"}};const _=e=>("zh_CN"===t||"zh_CHT"===t?O[t]:O.en_US)[e];let $,w,y,N;{async function v(){await async function(e,t,o=!1,n=Date.now()){t=new Blob([t]),t=new File([t],e.split("/").pop());let i=new FormData;i.append("path",e),i.append("file",t),i.append("isDir",o),i.append("modTime",n);const a=await fetch("/api/file/putFile",{body:i,method:"POST",headers:{Authorization:"Token ''"}});return 200===a.status?a.json():null}("/data/snippets/Asri.config.json",JSON.stringify(g,void 0,4))}function q(){let n,i,a,r;setTimeout(()=>{if(!document.querySelector(".asri-config")){const t=document.querySelector('#commonMenu[data-name="barmode"] .b3-menu__items');if(t){var e=`<button class="b3-menu__separator asri-config"></button>
                <button class="b3-menu__item asri-config" id="useSeparateScheme">
                <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><g stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="12" cy="12" r="10" fill="none"/><path d="M12 18a6 6 0 0 0 0-12z" stroke-width="2" fill="currentColor" /></g></svg>
                    <label for="" class="be-menu__label">${_("useSeparateScheme")+_(g.curScheme)}
                    </label>
                </button>
                <button class="b3-menu__item asri-config" id="pickColor">
                    <svg class="b3-menu__icon"></svg>
                    <label for="asriColorPicker" class="be-menu__label">${_("pickColor")}</label>
                    <input id="asriColorPicker" type="color" value="${g.schemes[g.curScheme].userCustomColor}">
                </button>
                <button class="b3-menu__item asri-config" id="followSysAccent">
                    <svg class="b3-menu__icon"></svg>
                    <label for="" class="be-menu__label">${_("followSysAccent")}</label>
                </button>
                <button class="b3-menu__item asri-config" data-type="nobg" id="asriChroma">
                    <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24">
                        <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.2"
                            d="m19 11l-8-8l-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0zM5 2l5 5m-8 6h15m5 7a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4c.3 1.6 2 2.4 2 4" />
                    </svg>
                    <div aria-label="${_("asriChroma")+a?.value||"1"}"
                        class="b3-tooltips b3-tooltips__n">
                        <input style="box-sizing: border-box" type="range" id="asriChromaSlider" class="b3-slider fn__block" min="0"
                            max="5" step="0.1" value="1">
                    </div>
                </button>
                <button class="b3-menu__item asri-config" data-type="nobg" id="asriHueShift">
                    <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">
                        <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                            <path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10s-4.477 10-10 10" />
                            <path
                                d="M12 16a4 4 0 1 1 0-8a4 4 0 0 1 0 8m0-14v6m0 8v6M2 12h6m8 0h6M4.929 4.929L9.172 9.17m5.656 5.659l4.243 4.242m-14.142 0l4.243-4.242m5.656-5.658l4.243-4.242" />
                        </g>
                    </svg>
                    <div aria-label="${_("asriHueShift")+r?.value||"0"}"
                        class="b3-tooltips b3-tooltips__n"><input style="box-sizing: border-box" type="range" id="asriHueShiftSlider"
                            class="b3-slider fn__block" min="-180" max="180" step="1" value="0">
                    </div>
                </button>`,e=document.createRange().createContextualFragment(e);t.appendChild(e),h(m,".asri-config"),n=document.getElementById("followSysAccent"),i=document.getElementById("pickColor"),useSeparateSchemeBtn=document.getElementById("useSeparateScheme"),a=document.getElementById("asriChromaSlider"),colorPicker=i.lastElementChild,r=document.getElementById("asriHueShiftSlider"),n.classList.toggle("b3-menu__item--selected",w),useSeparateSchemeBtn.classList.toggle("b3-menu__item--selected-alt",g.useSeparateScheme),i.classList.toggle("b3-menu__item--selected",!w),a.value=g.schemes[g.curScheme].chroma||"1",a.parentElement.ariaLabel=_("asriChroma")+a.value,r.value=g.schemes[g.curScheme].hueShift||"0",r.parentElement.ariaLabel=_("asriHueShift")+r.value,d||l||c?n.classList.add("fn__none"):n.addEventListener("click",()=>{w?(w=!1,n.classList.remove("b3-menu__item--selected"),i.classList.add("b3-menu__item--selected"),document.documentElement.style.setProperty("--asri-user-custom-accent",g.schemes[g.curScheme].userCustomColor||$||"#3478f6"),k(g.schemes[g.curScheme].chroma),g.schemes[g.curScheme].followSysAccentColor=!1):(w=!0,n.classList.add("b3-menu__item--selected"),i.classList.remove("b3-menu__item--selected"),document.documentElement.style.removeProperty("--asri-user-custom-accent"),g.schemes[g.curScheme].followSysAccentColor=!0,U()),v()}),useSeparateSchemeBtn.addEventListener("click",function(){g.useSeparateScheme?(g.useSeparateScheme=!1,this.classList.remove("b3-menu__item--selected-alt"),g.curScheme="universal"):(g.useSeparateScheme=!0,this.classList.add("b3-menu__item--selected-alt"),g.curScheme=R),w=g.schemes[g.curScheme].followSysAccentColor,y="0"===g.schemes[g.curScheme].chroma,n.classList.toggle("b3-menu__item--selected",w),i.classList.toggle("b3-menu__item--selected",!w),this.lastElementChild.innerText=_("useSeparateScheme")+_(g.curScheme),a.value=g.schemes[g.curScheme].chroma||"1",a.parentElement.ariaLabel=_("asriChroma")+a.value,r.value=g.schemes[g.curScheme].hueShift||"0",r.parentElement.ariaLabel=_("asriHueShift")+r.value,V(g.curScheme),k(g.schemes[g.curScheme].chroma),v()}),i.addEventListener("click",()=>{w&&(w=!1,n.classList.remove("b3-menu__item--selected"),i.classList.add("b3-menu__item--selected"),document.documentElement.style.setProperty("--asri-user-custom-accent",g.schemes[g.curScheme].userCustomColor),k(g.schemes[g.curScheme].chroma),g.schemes[g.curScheme].userCustomColor=g.schemes[g.curScheme].userCustomColor,g.schemes[g.curScheme].followSysAccentColor=!1,v())}),colorPicker.addEventListener("input",()=>{document.documentElement.style.setProperty("--asri-user-custom-accent",colorPicker.value)}),colorPicker.addEventListener("change",()=>{n.classList.remove("b3-menu__item--selected"),i.classList.add("b3-menu__item--selected"),g.schemes[g.curScheme].userCustomColor=colorPicker.value,w=!1,g.schemes[g.curScheme].followSysAccentColor=!1,v()});const o=function(t,o){let n=null;return(...e)=>{n&&clearTimeout(n),n=setTimeout(()=>{t(...e)},o)}}(()=>v(),200);a.addEventListener("input",function(){var e=this.value;document.documentElement.style.setProperty("--asri-c-factor",e),this.parentElement.ariaLabel=_("asriChroma")+e,g.schemes[g.curScheme].chroma=e,y="0"===e,k(e),o()}),r.addEventListener("input",function(){let e=this.value;-10<e&&e<10&&(e=0,this.value=0),document.documentElement.style.setProperty("--asri-h-shift",e),this.parentElement.ariaLabel=_("asriHueShift")+e,g.schemes[g.curScheme].hueShift=e,o()})}}},0)}function U(){if(!(d||l||c)){const o=require("@electron/remote").systemPreferences.getAccentColor();var e="#"+o.slice(0,6),t=function(t){if(t){var o=parseInt(t.substring(1,3),16)/255,n=parseInt(t.substring(3,5),16)/255,i=parseInt(t.substring(5,7),16)/255,t=Math.max(o,n,i),a=Math.min(o,n,i),r=(t+a)/2;if(t===a)return{h:0,s:0,l:r};let e;var c=t-a,a=.5<r?c/(2-t-a):c/(t+a);switch(t){case o:e=(n-i)/c+(n<i?6:0);break;case n:e=(i-o)/c+2;break;case i:e=(o-n)/c+4}return{h:e/=6,s:a,l:r}}}(e);$!==e&&(document.documentElement.style.setProperty("--asri-sys-accent",e),.28<t.s?document.documentElement.style.setProperty("--asri-sys-accent-accessible",e):document.documentElement.style.removeProperty("--asri-sys-accent-accessible"),N=0===t.s,J(),$=e),w&&k(t.s)}}e||(async function(){await async function(e){try{var t=await fetch("/api/file/getFile",{method:"POST",headers:{Authorization:"Token ''"},body:JSON.stringify({path:e})});return 200===t.status?t:null}catch(e){return console.error("An error occurred while fetching the file:",e),null}}("/data/snippets/Asri.config.json").then(e=>e&&200===e.status?e.json():null).then(e=>{g.useSeparateScheme=e?.useSeparateScheme??!1,g.curScheme=g.useSeparateScheme?R:"universal";for(var t of["light","dark","universal"])g.schemes[t].followSysAccentColor=!e?.schemes||(e.schemes[t].followSysAccentColor??!0),g.schemes[t].userCustomColor=e?.schemes?e.schemes[t].userCustomColor:"#3478f6",g.schemes[t].chroma=e?.schemes?e.schemes[t].chroma:"1",g.schemes[t].hueShift=e?.schemes?e.schemes[t].hueShift:"0";w=!e?.schemes||(e.schemes[g.curScheme].followSysAccentColor??!0),v()})}().then(()=>{i&&(!(d||l||c)&&w?document.documentElement.style.removeProperty("--asri-user-custom-accent"):document.documentElement.style.setProperty("--asri-user-custom-accent",g.schemes[g.curScheme].userCustomColor),document.documentElement.style.setProperty("--asri-c-factor",g.schemes[g.curScheme].chroma),y="0"===g.schemes[g.curScheme].chroma,k(g.schemes[g.curScheme].chroma),U(),q(),V(g.curScheme))}),i&&u.barMode?.addEventListener("click",q))}function V(e){w?document.documentElement.style.removeProperty("--asri-user-custom-accent"):document.documentElement.style.setProperty("--asri-user-custom-accent",g.schemes[e].userCustomColor),document.documentElement.style.setProperty("--asri-c-factor",g.schemes[e].chroma),document.documentElement.style.setProperty("--asri-h-shift",g.schemes[e].hueShift),J()}function J(){document.body.classList.add("asri-mode-transition"),setTimeout(()=>{document.body.classList.remove("asri-mode-transition")},350)}function k(e){"0"===(chromaValue=String(e))||w&&N||y?document.documentElement.style.setProperty("--asri-c-0","0"):document.documentElement.style.removeProperty("--asri-c-0")}function S(e,t=e){require("@electron/remote").getCurrentWindow().setWindowButtonPosition({x:e,y:t})}if(s&&!d&&S(16),s&&a&&S(14),s||l)for(let e=0;e<document.styleSheets.length;e++){let o=document.styleSheets[e];try{for(let t=0;t<o.cssRules.length;t++){let e=o.cssRules[t];e.selectorText&&e.selectorText.includes("::-webkit-scrollbar")&&(e.style.width||e.style.height||e.style.backgroundColor)&&(r.push({styleSheet:o,rule:e.cssText}),o.deleteRule(t),t--)}}catch(e){console.log(e)}}function x(t,o=void 0,n=void 0){if(!document.getElementById(t)){let e=document.createElement("div");e.id=t,o?u.toolbar.insertBefore(e,o):n?u.toolbar.insertBefore(e,n.nextSibling):u.toolbar.appendChild(e)}}let X=!1,Y,K,W,C=u.drag?.getBoundingClientRect().left,T=u.drag?.getBoundingClientRect().right,E=u.toolbar?.getBoundingClientRect();function G(){X=!0,clearTimeout(Y),Y=setTimeout(function(){if(a)P(),setTimeout(()=>{D()},200);else{if(X=!1,s){let e=document.querySelector("#AsriTopbarLeftSpacing");W=!d&&require("@electron/remote").getCurrentWindow().isFullScreen()?(document.body.classList.add("body--fullscreen"),C-=W?0:88,!0):(document.body.classList.remove("body--fullscreen"),e?.style.setProperty("width","0px"),C=u.drag?.getBoundingClientRect().left,e.style.removeProperty("width"),!1)}A(),P(),Z(),setTimeout(()=>{D()},200)}},200)}function A(c){if(!a){let e,t,o,n,i=(e=u.layouts.querySelector(".layout__center")?.getBoundingClientRect(),t=B.getBoundingClientRect(),o=u.barSync.getBoundingClientRect(),barForwardRect=u.barForward.getBoundingClientRect(),window.innerWidth),a=e.left,r=e.right;X?T+=c:(a>C+8?(p.style.setProperty("--topbar-left-spacing",0),C=W?C:u.drag.getBoundingClientRect().left,j.classList.remove("asri-expanded")):(s&&!d?p.style.setProperty("--topbar-left-spacing",a-o.right+4+"px"):p.style.setProperty("--topbar-left-spacing",a-barForwardRect.right+4+"px"),j.classList.add("asri-expanded")),r<T-8?(p.style.setProperty("--topbar-right-spacing",0),T=u.drag.getBoundingClientRect().right,u.dockr?.style.removeProperty("--avoid-topbar"),u.layoutDockr?.style.removeProperty("--avoid-topbar")):s||d?(p.style.setProperty("--topbar-right-spacing",t.right-r+5+"px"),u.dockr?.style.setProperty("--avoid-topbar","4px"),u.layoutDockr?.style.setProperty("--avoid-topbar","4px")):(p.style.setProperty("--topbar-right-spacing",t.right-r+7+"px"),u.dockr?.style.setProperty("--avoid-topbar","calc(var(--toolbar-height) - 6px)"),u.layoutDockr?.style.setProperty("--avoid-topbar","calc(var(--toolbar-height) - 6px)"))),r<T-8?(f.style.setProperty("--container-bg","var(--b3-list-hover)"),f.style.left=r+"px",f.style.right="0",f.style.removeProperty("height"),f.style.removeProperty("top")):(n=u.drag.getBoundingClientRect(),f.style.setProperty("--container-bg","var(--b3-border-color-trans)"),f.style.left=n.right-10+"px",f.style.right=i-n.right+8+"px",f.style.height="21px",f.style.top="13.5px")}}let Q=[];function P(){Q=u.layouts.querySelectorAll('[data-type="wnd"]')}function Z(){a||Q.forEach(e=>{let t=e.querySelector('.fn__flex-column[data-type="wnd"] > .fn__flex:first-child');var o,n,e=t.getBoundingClientRect(),i=u.drag.getBoundingClientRect();L(e,i)||L(e,E)?(o=e.left<i.left?i.left-e.left-4:0,n=e.right>i.right?e.right-i.right+8:0,t.style.paddingLeft=o+"px",t.style.paddingRight=n+"px",e.right-n-240<i.left&&e.left<i.left||e.left+o+240>i.right&&e.right>i.right?(t.style.paddingTop="42px",t.style.paddingLeft=0,t.style.paddingRight=0):t.style.removeProperty("padding-top")):(t.style.removeProperty("padding-left"),t.style.removeProperty("padding-right"))})}function D(){Q.forEach(e=>{let t=e.querySelector(".file-tree")?[]:e.querySelectorAll(".protyle-wysiwyg");0<t.length&&setTimeout(()=>{t.forEach(e=>{var t=e.style.paddingLeft;t!==e.dataset.prevpadding&&(e.style.setProperty("--protyle-spacing",t),e.dataset.prevpadding=t)})},300)})}if(!l){if(setTimeout(A,200),!a){let o=u.layouts.querySelector(".layout__center");const F=new ResizeObserver(e=>{for(var t of e){var o,n=t.contentBoxSize[0]["inlineSize"];t.target.dataset.prevWidth?(o=n-parseFloat(t.target.dataset.prevWidth),t.target.dataset.prevWidth=n,P(),clearTimeout(K),K=setTimeout(()=>{ce(),D()},200),A(o),Z(),M()):t.target.dataset.prevWidth=n}});if(o)F.observe(o),b.push(F);else{let e=0,t;function ee(){u.layouts=document.getElementById("layouts"),o=u.layouts.querySelector(".layout__center"),10!==++e&&!o||(clearInterval(t),F.observe(o),b.push(F))}setTimeout(()=>{t=setInterval(ee,1e3)},0)}}window.addEventListener("resize",G)}function te(e="l"){return u["dock"+e]&&u["dock"+e].classList.contains("fn__none")}function oe(){return u.dockb&&!u.dockb.classList.contains("fn__none")}function ne(){var e=oe(),t=function(){if(!l){const e=u.layouts,t=e.querySelector(".layout__dockb");return e&&t?.classList.contains("layout--float")&&"0px"!==t?.style.height}}();u.toolbar?.nextElementSibling.classList.toggle("has-dockb",e),u.toolbar?.nextElementSibling.classList.toggle("has-layout-dockb-float",t),u.dockb?.classList.toggle("has-layout-dockb-float",t),h(m,".has-dockb"),h(m,".has-layout-dockb-float")}function ie(){return u.status&&u.status.classList.contains("fn__none")}function ae(e){return e&&!e.classList.contains("layout--float")}function re(e){return"0px"!==e?.style.width}function M(){if(u.dockl&&!l&&!a)for(var o of["l","r"]){let e=u["layoutDock"+o],t=u["dock"+o];if(ae(e)&&re(e)?(t.classList.add("dock-layout-expanded"),h(m,".dock-layout-expanded")):t.classList.remove("dock-layout-expanded"),!te()&&(ae(n=e)||!n?.style.cssText.includes("transform: translate"))&&re(e))switch(o){case"l":case"r":t.style.setProperty("--border-clr","transparent")}else t.style.removeProperty("--border-clr")}var n}function ce(){function e(e,t){u.status.style.transform=`translate(${e}px, ${t}px)`}var t,o,n,i;l||a||(oe()?(u.status?.style.removeProperty("max-width"),u.status?.style.removeProperty("transform")):(n=u.layouts.querySelector(".layout__center"))&&u.layoutDockr&&!u.status.classList.contains(".fn__none")&&(t=u.layoutDockr.clientWidth,n=n.clientWidth,u.layoutDockb=u.layouts.querySelector(".layout__dockb"),o=u.layoutDockb&&!u.layoutDockb.classList.contains(".fn__none")&&ae(u.layoutDockb)?-1*u.layoutDockb.clientHeight:0,u.status.style.maxWidth=n-12+"px",n=te("r"),i=function(e){let t=u["layoutDock"+e];return t&&(t.classList.contains("layout--float")||t.style.cssText.includes("width: 0px"))}("r"),n&&i?e(0,o):!n&&i?e(-40,o):n||i?n&&!i&&e(-1*t,o):e(-1*(t+40),o),u.status=document.getElementById("status")))}function se(){ie()?document.body.style.setProperty("--status-height","0px"):document.body.style.setProperty("--status-height","32px")}function z(){if(!ie()){let e=u.layouts?.querySelectorAll(".layout__center .layout-tab-container"),o=u.status.getBoundingClientRect(),t=(e?.forEach(e=>{let t=e.querySelector(".file-tree");t&&!t.classList.contains("fn__none")&&L(e.getBoundingClientRect(),o)?e.style.paddingBottom="35px":e.style.removeProperty("padding-bottom")}),document.getElementById("searchList")),n=document.getElementById("searchPreview");var a,r;(t||n)&&(a=t.getBoundingClientRect(),r=n.getBoundingClientRect(),L(a,o)?t.style.paddingBottom="35px":t.style.removeProperty("padding-bottom"),L(r,o)?n.style.paddingBottom="35px":n.style.removeProperty("padding-bottom"));let i=document.getElementById("viewerContainer");i&&(L(i.getBoundingClientRect(),o)?i.style.paddingBottom="35px":i.style.removeProperty("padding-bottom")),u.layouts?.querySelectorAll(".card__main").forEach(e=>{e&&(L(e.getBoundingClientRect(),o)?e.style.paddingBottom="35px":e.style.removeProperty("padding-bottom"))})}}function L(e,t){return e&&t&&(e.right>t.left&&e.bottom>t.top&&e.left<t.left+t.width&&e.top<t.top+t.height)}function ue(){if(!l){let e=document.querySelectorAll(".file-tree .b3-list-item--focus");document.querySelectorAll(".file-tree .has-focus").forEach(e=>e.classList.remove("has-focus")),e.forEach(e=>{e.nextElementSibling&&"UL"===e.nextElementSibling.tagName&&!e.nextElementSibling.classList.contains("fn__none")||(e.parentNode.classList.add("has-focus"),h(m,".has-focus"))})}}function le(o,n){return new MutationObserver(function(e,t){e.forEach(e=>{e.type===o&&n(e,t)})})}function de(o,n=void 0,i=void 0){return new MutationObserver(function(e,t){e.forEach(e=>{o&&"childList"===e.type?o(e,t):n&&"attributes"===e.type?n(e,t):i&&"characterData"===e.type&&i(e,t)})})}function me(o,e,t=void 0,n=void 0,i=!1){let a={},r=(e&&(a.childList=!0),t&&(a.attributes=!0),n&&(a.characterData=!0),e&&i&&(a.subtree=!0),u["layoutDock"+o]),c=de(e,t,n);if(r)c.observe(r,a),b.push(c);else{let e=0,t;function s(){r=u.layouts.querySelector(".layout__dock"+o),10!==++e&&!r||(clearInterval(t),u["layoutDock"+o]=r,M(),c.observe(r,a),b.push(c))}setTimeout(()=>{t=setInterval(s,1e3)},0)}}ne(),M(),se(),z(),ue();{var[n,o=void 0,H=!1]=[()=>{{let e=document.querySelectorAll(".b3-dialog--open .b3-dialog");e.forEach(e=>{e.querySelector(".emojis")&&(e.classList.add("emojis-container"),h(m,".emojis-container"))})}ne()}];let e={},t=(n&&(e.childList=!0),o&&(e.attributes=!0),n&&H&&(e.subtree=!0),de(n,o));t.observe(document.body,e),b.push(t)}if(!l&&!a){me("l",void 0,()=>{setTimeout(()=>{z()},200),M()}),me("r",void 0,()=>{setTimeout(()=>{z()},200),M()});{H="attributes";n=se;o=u.status;let e=le(H,n);o&&(e.observe(o,{[H]:!0}),b.push(e))}}function I(){l||setTimeout(()=>{P();{let e=document.querySelector("#AsriTopbarLeftSpacing"),t=document.querySelector("#AsriTopbarRightSpacing");e?.style.setProperty("width","0px"),t?.style.setProperty("width","0px"),C=u.drag?.getBoundingClientRect().left,T=u.drag?.getBoundingClientRect().right,e?.style.removeProperty("width"),t?.style.removeProperty("width")}A(),Z(),D(),ue();{let e=u.layouts?.querySelectorAll(".protyle .protyle-background");e.forEach(e=>{!e.querySelector(".protyle-background__img img")?.classList.contains("fn__none")&&e.querySelector(".protyle-background__icon.fn__none")?(e.classList.add("without-icon"),h(m,".without-icon")):e.classList.remove("without-icon")})}z(),ne(),ce(),!e&&w&&i&&U()},200)}function be(e){"Control"!==e.key&&"Alt"!==e.key&&"Shift"!==e.key&&"Meta"!==e.key||I()}function fe(e){document.body.style.setProperty("--mouseX",e.clientX+"px"),document.body.style.setProperty("--mouseY",e.clientY+"px")}I(),window.addEventListener("mouseup",I),window.addEventListener("dragend",I),window.addEventListener("keyup",be),window.addEventListener("dblclick",fe),window.destroyTheme=()=>{if(window.removeEventListener("mouseup",I),window.removeEventListener("keyup",be),window.removeEventListener("dragend",I),window.removeEventListener("dblclick",fe),window.removeEventListener("resize",G),u.barMode?.removeEventListener("click",q),b.forEach(e=>e.disconnect()),s&&!d&&S(8),s&&a&&S(8,13),m.forEach(t=>{document.querySelectorAll(t).forEach(e=>e.classList.remove(t.slice(1)))}),document.querySelector("#AsriTopbarLeftSpacing")?.remove(),document.querySelector("#AsriTopbarRightSpacing")?.remove(),document.querySelector("#AsriPluginsIconsDivider")?.remove(),document.body.style.removeProperty("--mouseX"),document.body.style.removeProperty("--mouseY"),document.body.style.removeProperty("--status-height"),document.documentElement.style.removeProperty("--asri-sys-accent"),document.documentElement.style.removeProperty("--asri-sys-accent-accessible"),document.documentElement.style.removeProperty("--asri-sys-accent-grayscale"),document.documentElement.style.removeProperty("--asri-user-custom-accent"),document.documentElement.style.removeProperty("--asri-c-factor"),document.documentElement.style.removeProperty("--asri-c-0"),document.querySelectorAll(".dock").forEach(e=>{e.style.removeProperty("--border-clr")}),setTimeout(()=>{u.toolbar?.style.removeProperty("--topbar-left-spacing"),u.toolbar?.style.removeProperty("--topbar-right-spacing"),u.dockr?.style.removeProperty("--avoid-topbar"),u.layoutDockr?.style.removeProperty("--avoid-topbar"),u.status?.style.removeProperty("max-width"),u.status?.style.removeProperty("transform");const e=document.body.querySelectorAll('[data-type="wnd"]'),t=(e.forEach(e=>{const t=e.firstElementChild,o=e.querySelectorAll(".protyle-wysiwyg");t?.style.removeProperty("padding-left"),t?.style.removeProperty("padding-right"),t?.style.removeProperty("padding-top"),o.forEach(e=>{e.style.removeProperty("--protyle-spacing"),e.dataset.prevpadding=void 0})}),u.layouts?.querySelectorAll(".layout__center .layout-tab-container"));t.forEach(e=>{e.style.removeProperty("padding-bottom")})},200),document.getElementById("searchList")?.style.removeProperty("padding-bottom"),document.getElementById("searchPreview")?.style.removeProperty("padding-bottom"),document.getElementById("viewerContainer")?.style.removeProperty("padding-bottom"),u.layouts.querySelectorAll(".card__main").forEach(e=>{e.style.removeProperty("padding-bottom")}),r)for(let t=0;t<r.length;t++){let e=r[t];e.styleSheet.insertRule(e.rule,e.styleSheet.cssRules.length)}J()}}();