!function(){const u={layouts:document.getElementById("layouts"),status:document.getElementById("status"),dockl:document.getElementById("dockLeft"),dockr:document.getElementById("dockRight"),dockb:document.getElementById("dockBottom"),layoutDockl:document.querySelector(".layout__dockl"),layoutDockr:document.querySelector(".layout__dockr"),layoutDockb:document.querySelector(".layout__dockb"),toolbar:document.getElementById("toolbar"),barSync:document.getElementById("barSync"),barForward:document.getElementById("barForward"),toolbarVIP:document.getElementById("toolbarVIP"),drag:document.getElementById("drag"),barPlugins:document.getElementById("barPlugins"),barSearch:document.getElementById("barSearch"),barMode:document.getElementById("barMode")},c=-1<navigator.platform.indexOf("Mac"),l=-1<navigator.platform.indexOf("Linux"),d=document.getElementById("sidebar")&&document.getElementById("editor"),m=0<u.toolbar?.classList.contains("toolbar--browser");var o=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);const n=0<document.body.classList.contains("body--window");var i="android"===window.siyuan.config.system.container,r=navigator.userAgent;const e=(/iOS/i.test(r)||/iPad/i.test(r))&&/AppleWebKit/i.test(r),t=window.siyuan.config.lang,h=0<window.siyuan.config.appearance.mode?"dark":"light",j=CSS.supports("color","oklch(from red calc(l * 0.5) 0 h)"),f=[],a=[],p=[],b=(c&&(document.body.classList.add("body--mac"),f.push(".body--mac")),l&&(document.body.classList.add("body--linux"),f.push(".body--linux")),d&&(document.body.classList.add("body--mobile"),f.push(".body--mobile")),m&&(document.body.classList.add("body--browser"),f.push(".body--browser")),i&&(document.body.classList.add("body--android"),f.push(".body--android")),e&&(document.body.classList.add("body--iosApp"),f.push(".body--iosApp")),o&&(document.documentElement.dataset.ua="safari"),!d&&u.toolbar&&(x("AsriPluginsIconsDivider",void 0,u.drag),c&&!m?x("AsriTopbarLeftSpacing",void 0,u.barSync):x("AsriTopbarLeftSpacing",void 0,u.barForward),c||m?x("AsriTopbarRightSpacing"):x("AsriTopbarRightSpacing",u.barSearch)),document.getElementById("AsriPluginsIconsDivider")),R=document.getElementById("AsriTopbarLeftSpacing"),B=document.getElementById("AsriTopbarRightSpacing"),g=u.toolbar;function _(e,t){e.includes(t)||e.push(t)}const v={useSeparateScheme:!1,curScheme:"universal",schemes:{light:{followSysAccentColor:!0,userCustomColor:"#3478f6",chroma:"1",hueShift:"0"},dark:{followSysAccentColor:!0,userCustomColor:"#3478f6",chroma:"1",hueShift:"0"},universal:{followSysAccentColor:!0,userCustomColor:"#3478f6",chroma:"1",hueShift:"0"}},userPreferredPresets:{light:"",dark:"",universal:""}},O={zh_CN:{followSysAccent:"跟随系统强调色",useSeparateScheme:"当前配色主题：",pickColor:"自定义主题色",asriChroma:"色度：",asriHueShift:"色相偏移：",light:"亮色",dark:"暗色",universal:"全局"},zh_CHT:{followSysAccent:"跟隨系統強調色",useSeparateScheme:"當前配色主题：",pickColor:"自定義主題色",asriChroma:"色度：",asriHueShift:"色相偏移：",light:"淺色",dark:"深色",universal:"全局"},en_US:{followSysAccent:"Follow system accent color",useSeparateScheme:"Current scheme: ",pickColor:"Customize theme color",asriChroma:"Chroma: ",asriHueShift:"Hue shift: ",light:"Light mode",dark:"Dark mode",universal:"Universal"}},$={universal:[{paletteId:"asriprst-asri3",configs:{userCustomColor:"#3c51ec",chroma:"1.5",hueShift:"0"}},{paletteId:"asriprst-obsidian",configs:{userCustomColor:"#6831f2",chroma:"0",hueShift:"0"}},{paletteId:"asriprst-asri2",configs:{userCustomColor:"#3478f6",chroma:"0",hueShift:"0"}},{paletteId:"asriprst-materialdesign3",configs:{userCustomColor:"#199ef0",chroma:"1.1",hueShift:"60"}},{paletteId:"asriprst-neutral",configs:{userCustomColor:"#d7e1a3",chroma:"0.8",hueShift:"85"}},{paletteId:"asriprst-redsand",configs:{userCustomColor:"#ce985a",chroma:"1",hueShift:"-49"}},{paletteId:"asriprst-minimal",configs:{userCustomColor:"#000000",chroma:"0",hueShift:"20"}}],light:[{paletteId:"asriprst-vintage",configs:{userCustomColor:"#eeb61b",chroma:"2",hueShift:"180"}},{paletteId:"asriprst-wisteria",configs:{userCustomColor:"#49e411",chroma:"2",hueShift:"139"}},{paletteId:"asriprst-lightdream",configs:{userCustomColor:"#e576dc",chroma:"1.5",hueShift:"-70"}},{paletteId:"asriprst-notion",configs:{userCustomColor:"#e0e411",chroma:"0.3",hueShift:"145"}},{paletteId:"asriprst-sunnybeach",configs:{userCustomColor:"#ecde41",chroma:"2.1",hueShift:"100"}},{paletteId:"asriprst-foam",configs:{userCustomColor:"#df729f",chroma:"1.2",hueShift:"-125"}},{paletteId:"asriprst-morningmist",configs:{userCustomColor:"#7dd8d9",chroma:"1",hueShift:"50"}},{paletteId:"asriprst-mint",configs:{userCustomColor:"#55e299",chroma:"1.5",hueShift:"30"}},{paletteId:"asriprst-canyon",configs:{userCustomColor:"#db8757",chroma:"1.2",hueShift:"141"}},{paletteId:"asriprst-newyear",configs:{userCustomColor:"#ffdf0f",chroma:"2.5",hueShift:"-60"}}],dark:[{paletteId:"asriprst-nightglamour",configs:{userCustomColor:"#8058df",chroma:"3",hueShift:"60"}},{paletteId:"asriprst-nord",configs:{userCustomColor:"#486d7f",chroma:"1.3",hueShift:"-34"}},{paletteId:"asriprst-logseq",configs:{userCustomColor:"#08c7f7",chroma:"4.4",hueShift:"12"}},{paletteId:"asriprst-extraterrestrial",configs:{userCustomColor:"#715ace",chroma:"4",hueShift:"-132"}},{paletteId:"asriprst-cyberpunk",configs:{userCustomColor:"#ea17ee",chroma:"5",hueShift:"-134"}},{paletteId:"asriprst-eveningforest",configs:{userCustomColor:"#52cb93",chroma:"2.9",hueShift:"-80"}},{paletteId:"asriprst-lighthouse",configs:{userCustomColor:"#7086e1",chroma:"2.1",hueShift:"140"}},{paletteId:"asriprst-coffee",configs:{userCustomColor:"#bb8e86",chroma:"0.4",hueShift:"30"}},{paletteId:"asriprst-redwine",configs:{userCustomColor:"#b960d2",chroma:"1.2",hueShift:"53"}},{paletteId:"asriprst-violet",configs:{userCustomColor:"#5778db",chroma:"2.2",hueShift:"100"}}]},w=e=>("zh_CN"===t||"zh_CHT"===t?O[t]:O.en_US)[e];let q,y,S,N;{async function C(){await async function(e,t,o=!1,i=Date.now()){t=new Blob([t]),t=new File([t],e.split("/").pop());let r=new FormData;r.append("path",e),r.append("file",t),r.append("isDir",o),r.append("modTime",i);const n=await fetch("/api/file/putFile",{body:r,method:"POST",headers:{Authorization:"Token ''"}});return 200===n.status?n.json():null}("/data/snippets/Asri.config.json",JSON.stringify(v,void 0,4))}function V(){let a,s,c,u;setTimeout(()=>{if(!document.querySelector(".asri-config")){const o=document.querySelector('#commonMenu[data-name="barmode"] .b3-menu__items');if(o){var e=`<button class="b3-menu__separator asri-config"></button>
                <button class="b3-menu__item asri-config" id="useSeparateScheme">
                    <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">
                        <g stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                            <circle cx="12" cy="12" r="10" fill="none" />
                            <path d="M12 18a6 6 0 0 0 0-12z" stroke-width="2" fill="currentColor" />
                        </g>
                    </svg>
                    <label for="" class="be-menu__label">${w("useSeparateScheme")+w(v.curScheme)}
                    </label>
                </button>
                <button class="b3-menu__item asri-config" id="asriPresetPalettes">
                    <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.2"><path d="M11 17a4 4 0 0 1-8 0V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2Z"/><path d="M16.7 13H19a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H7m0-4h.01"/><path d="m11 8l2.3-2.3a2.4 2.4 0 0 1 3.404.004L18.6 7.6a2.4 2.4 0 0 1 .026 3.434L9.9 19.8"/></g></svg>
                    <span class="b3-menu__label">预置配色方案</span>
                    <svg class="b3-menu__icon b3-menu__icon--small"><use xlink:href="#iconRight"></use></svg>
                    <div class="b3-menu__submenu">
                        <div class="b3-menu__items"></div>
                    </div>
                </button>
                <button class="b3-menu__separator asri-config"></button>
                <button class="b3-menu__item asri-config" id="pickColor">
                    <svg class="b3-menu__icon"></svg>
                    <label for="asriColorPicker" class="be-menu__label">${w("pickColor")}</label>
                    <input id="asriColorPicker" type="color" value="${v.schemes[v.curScheme].userCustomColor}">
                </button>
                <button class="b3-menu__item asri-config" id="followSysAccent">
                    <svg class="b3-menu__icon"></svg>
                    <label for="" class="be-menu__label">${w("followSysAccent")}</label>
                </button>
                <button class="b3-menu__item asri-config" data-type="nobg" id="asriChroma">
                    <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24">
                        <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.2"
                            d="m19 11l-8-8l-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0zM5 2l5 5m-8 6h15m5 7a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4c.3 1.6 2 2.4 2 4" />
                    </svg>
                    <div aria-label="${w("asriChroma")+c?.value||"1"}"
                        class="b3-tooltips b3-tooltips__n">
                        <input style="box-sizing: border-box" type="range" id="asriChromaSlider" class="b3-slider fn__block" min="0"
                            max="5" step="0.1" value="1">
                    </div>
                </button>
                <button class="b3-menu__item asri-config" data-type="nobg" id="asriHueShift">
                    <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">
                        <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                            <path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10s-4.477 10-10 10" />
                            <path
                                d="M12 16a4 4 0 1 1 0-8a4 4 0 0 1 0 8m0-14v6m0 8v6M2 12h6m8 0h6M4.929 4.929L9.172 9.17m5.656 5.659l4.243 4.242m-14.142 0l4.243-4.242m5.656-5.658l4.243-4.242" />
                        </g>
                    </svg>
                    <div aria-label="${w("asriHueShift")+u?.value||"0"}"
                        class="b3-tooltips b3-tooltips__n"><input style="box-sizing: border-box" type="range" id="asriHueShiftSlider"
                            class="b3-slider fn__block" min="-180" max="180" step="1" value="0">
                    </div>
                </button>`,e=document.createRange().createContextualFragment(e);o.appendChild(e),_(f,".asri-config"),a=document.getElementById("followSysAccent"),s=document.getElementById("pickColor"),useSeparateSchemeBtn=document.getElementById("useSeparateScheme"),c=document.getElementById("asriChromaSlider"),colorPicker=s.lastElementChild,u=document.getElementById("asriHueShiftSlider");const i=document.getElementById("asriPresetPalettes").querySelector(".b3-menu__items"),r=new DocumentFragment,n=(t("universal"),t(h),i.appendChild(r),a.classList.toggle("b3-menu__item--selected",y),useSeparateSchemeBtn.classList.toggle("b3-menu__item--selected-alt",v.useSeparateScheme),s.classList.toggle("b3-menu__item--selected",!y),c.value=v.schemes[v.curScheme].chroma||"1",c.parentElement.ariaLabel=w("asriChroma")+c.value,u.value=v.schemes[v.curScheme].hueShift||"0",u.parentElement.ariaLabel=w("asriHueShift")+u.value,m||d||l?a.classList.add("fn__none"):a.addEventListener("click",()=>{y?(y=!1,a.classList.remove("b3-menu__item--selected"),s.classList.add("b3-menu__item--selected"),document.documentElement.style.setProperty("--asri-user-custom-accent",v.schemes[v.curScheme].userCustomColor||q||"#3478f6"),k(v.schemes[v.curScheme].chroma),v.schemes[v.curScheme].followSysAccentColor=!1):(y=!0,a.classList.add("b3-menu__item--selected"),s.classList.remove("b3-menu__item--selected"),document.documentElement.style.removeProperty("--asri-user-custom-accent"),v.schemes[v.curScheme].followSysAccentColor=!0,U()),C()}),useSeparateSchemeBtn.addEventListener("click",function(){v.useSeparateScheme?(v.useSeparateScheme=!1,this.classList.remove("b3-menu__item--selected-alt"),v.curScheme="universal"):(v.useSeparateScheme=!0,this.classList.add("b3-menu__item--selected-alt"),v.curScheme=h),y=v.schemes[v.curScheme].followSysAccentColor,S="0"===v.schemes[v.curScheme].chroma,a.classList.toggle("b3-menu__item--selected",y),s.classList.toggle("b3-menu__item--selected",!y),this.lastElementChild.innerText=w("useSeparateScheme")+w(v.curScheme),c.value=v.schemes[v.curScheme].chroma||"1",c.parentElement.ariaLabel=w("asriChroma")+c.value,u.value=v.schemes[v.curScheme].hueShift||"0",u.parentElement.ariaLabel=w("asriHueShift")+u.value,J(v.curScheme),k(v.schemes[v.curScheme].chroma),C()}),i.addEventListener("click",e=>{e=e.target.closest(".b3-menu__item");const t=e.id;var o,i=e.dataset.mode;0===t.indexOf("asriprst-")&&(o=$[i].find(e=>e.paletteId===t).configs,o=Object.assign(v.schemes[i],o),J(i),C(),console.log(e),console.log(o))}),s.addEventListener("click",()=>{y&&(y=!1,a.classList.remove("b3-menu__item--selected"),s.classList.add("b3-menu__item--selected"),document.documentElement.style.setProperty("--asri-user-custom-accent",v.schemes[v.curScheme].userCustomColor),k(v.schemes[v.curScheme].chroma),v.schemes[v.curScheme].userCustomColor=v.schemes[v.curScheme].userCustomColor,v.schemes[v.curScheme].followSysAccentColor=!1,C())}),colorPicker.addEventListener("input",()=>{document.documentElement.style.setProperty("--asri-user-custom-accent",colorPicker.value)}),colorPicker.addEventListener("change",()=>{a.classList.remove("b3-menu__item--selected"),s.classList.add("b3-menu__item--selected"),v.schemes[v.curScheme].userCustomColor=colorPicker.value,y=!1,v.schemes[v.curScheme].followSysAccentColor=!1,C()}),function(t,o){let i=null;return(...e)=>{i&&clearTimeout(i),i=setTimeout(()=>{t(...e)},o)}}(()=>C(),200));function t(o){for(var e in $)e===o&&$[e].forEach(e=>{e=e.paletteId;const t=document.createElement("div");t.classList.add("b3-menu__item"),t.dataset.mode=o,t.id=""+e,t.innerHTML=`<svg class="b3-menu__icon">
                                <use xlink:href="#iconFormat"></use>
                            </svg>
                            <span class="b3-menu__label">${e}</span>`,r.appendChild(t)})}c.addEventListener("input",function(){var e=this.value;document.documentElement.style.setProperty("--asri-c-factor",e),this.parentElement.ariaLabel=w("asriChroma")+e,v.schemes[v.curScheme].chroma=e,S="0"===e,k(e),n()}),u.addEventListener("input",function(){let e=this.value;-10<e&&e<10&&(e=0,this.value=0),document.documentElement.style.setProperty("--asri-h-shift",e),this.parentElement.ariaLabel=w("asriHueShift")+e,v.schemes[v.curScheme].hueShift=e,n()})}}},0)}function U(){if(!(m||d||l)){const o=require("@electron/remote").systemPreferences.getAccentColor();var e="#"+o.slice(0,6),t=function(t){if(t){var o=parseInt(t.substring(1,3),16)/255,i=parseInt(t.substring(3,5),16)/255,r=parseInt(t.substring(5,7),16)/255,t=Math.max(o,i,r),n=Math.min(o,i,r),a=(t+n)/2;if(t===n)return{h:0,s:0,l:a};let e;var s=t-n,n=.5<a?s/(2-t-n):s/(t+n);switch(t){case o:e=(i-r)/s+(i<r?6:0);break;case i:e=(r-o)/s+2;break;case r:e=(o-i)/s+4}return{h:e/=6,s:n,l:a}}}(e);q!==e&&(document.documentElement.style.setProperty("--asri-sys-accent",e),.28<t.s?document.documentElement.style.setProperty("--asri-sys-accent-accessible",e):document.documentElement.style.removeProperty("--asri-sys-accent-accessible"),N=0===t.s,X(),q=e),y&&k(t.s)}}e||(async function(){await async function(e){try{var t=await fetch("/api/file/getFile",{method:"POST",headers:{Authorization:"Token ''"},body:JSON.stringify({path:e})});return 200===t.status?t:null}catch(e){return console.error("An error occurred while fetching the file:",e),null}}("/data/snippets/Asri.config.json").then(e=>e&&200===e.status?e.json():null).then(e=>{v.useSeparateScheme=e?.useSeparateScheme??!1,v.curScheme=v.useSeparateScheme?h:"universal";for(var t of["light","dark","universal"])v.schemes[t].followSysAccentColor=!e?.schemes||(e.schemes[t].followSysAccentColor??!0),v.schemes[t].userCustomColor=e?.schemes?e.schemes[t].userCustomColor:"#3478f6",v.schemes[t].chroma=e?.schemes?e.schemes[t].chroma:"1",v.schemes[t].hueShift=e?.schemes?e.schemes[t].hueShift:"0";y=!e?.schemes||(e.schemes[v.curScheme].followSysAccentColor??!0),C()})}().then(()=>{j&&(!(m||d||l)&&y?document.documentElement.style.removeProperty("--asri-user-custom-accent"):document.documentElement.style.setProperty("--asri-user-custom-accent",v.schemes[v.curScheme].userCustomColor),document.documentElement.style.setProperty("--asri-c-factor",v.schemes[v.curScheme].chroma),S="0"===v.schemes[v.curScheme].chroma,k(v.schemes[v.curScheme].chroma),U(),V(),J(v.curScheme))}),j&&u.barMode?.addEventListener("click",V))}function J(e){y?document.documentElement.style.removeProperty("--asri-user-custom-accent"):document.documentElement.style.setProperty("--asri-user-custom-accent",v.schemes[e].userCustomColor),document.documentElement.style.setProperty("--asri-c-factor",v.schemes[e].chroma),document.documentElement.style.setProperty("--asri-h-shift",v.schemes[e].hueShift),X()}function X(){document.body.classList.add("asri-mode-transition"),setTimeout(()=>{document.body.classList.remove("asri-mode-transition")},350)}function k(e){"0"===(chromaValue=String(e))||y&&N||S?document.documentElement.style.setProperty("--asri-c-0","0"):document.documentElement.style.removeProperty("--asri-c-0")}function s(e,t=e){require("@electron/remote").getCurrentWindow().setWindowButtonPosition({x:e,y:t})}if(c&&!m&&s(16),c&&n&&s(14),c||d)for(let e=0;e<document.styleSheets.length;e++){let o=document.styleSheets[e];try{for(let t=0;t<o.cssRules.length;t++){let e=o.cssRules[t];e.selectorText&&e.selectorText.includes("::-webkit-scrollbar")&&(e.style.width||e.style.height||e.style.backgroundColor)&&(a.push({styleSheet:o,rule:e.cssText}),o.deleteRule(t),t--)}}catch(e){console.log(e)}}function x(t,o=void 0,i=void 0){if(!document.getElementById(t)){let e=document.createElement("div");e.id=t,o?u.toolbar.insertBefore(e,o):i?u.toolbar.insertBefore(e,i.nextSibling):u.toolbar.appendChild(e)}}let Y=!1,K,W,Z,I=u.drag?.getBoundingClientRect().left,T=u.drag?.getBoundingClientRect().right,E=u.toolbar?.getBoundingClientRect();function G(){Y=!0,clearTimeout(K),K=setTimeout(function(){if(n)P(),setTimeout(()=>{M()},200);else{if(Y=!1,c){let e=document.querySelector("#AsriTopbarLeftSpacing");Z=!m&&require("@electron/remote").getCurrentWindow().isFullScreen()?(document.body.classList.add("body--fullscreen"),I-=Z?0:88,!0):(document.body.classList.remove("body--fullscreen"),e?.style.setProperty("width","0px"),I=u.drag?.getBoundingClientRect().left,e.style.removeProperty("width"),!1)}A(),P(),ee(),setTimeout(()=>{M()},200)}},200)}function A(s){if(!n){let e,t,o,i,r=(e=u.layouts.querySelector(".layout__center")?.getBoundingClientRect(),t=B.getBoundingClientRect(),o=u.barSync.getBoundingClientRect(),barForwardRect=u.barForward.getBoundingClientRect(),window.innerWidth),n=e.left,a=e.right;Y?T+=s:(n>I+8?(g.style.setProperty("--topbar-left-spacing",0),I=Z?I:u.drag.getBoundingClientRect().left,R.classList.remove("asri-expanded")):(c&&!m?g.style.setProperty("--topbar-left-spacing",n-o.right+4+"px"):g.style.setProperty("--topbar-left-spacing",n-barForwardRect.right+4+"px"),R.classList.add("asri-expanded")),a<T-8?(g.style.setProperty("--topbar-right-spacing",0),T=u.drag.getBoundingClientRect().right,u.dockr?.style.removeProperty("--avoid-topbar"),u.layoutDockr?.style.removeProperty("--avoid-topbar")):c||m?(g.style.setProperty("--topbar-right-spacing",t.right-a+5+"px"),u.dockr?.style.setProperty("--avoid-topbar","4px"),u.layoutDockr?.style.setProperty("--avoid-topbar","4px")):(g.style.setProperty("--topbar-right-spacing",t.right-a+7+"px"),u.dockr?.style.setProperty("--avoid-topbar","calc(var(--toolbar-height) - 6px)"),u.layoutDockr?.style.setProperty("--avoid-topbar","calc(var(--toolbar-height) - 6px)"))),a<T-8?(b.style.setProperty("--container-bg","var(--b3-list-hover)"),b.style.left=a+"px",b.style.right="0",b.style.removeProperty("height"),b.style.removeProperty("top")):(i=u.drag.getBoundingClientRect(),b.style.setProperty("--container-bg","var(--b3-border-color-trans)"),b.style.left=i.right-10+"px",b.style.right=r-i.right+8+"px",b.style.height="21px",b.style.top="13.5px")}}let Q=[];function P(){Q=u.layouts.querySelectorAll('[data-type="wnd"]')}function ee(){n||Q.forEach(e=>{let t=e.querySelector('.fn__flex-column[data-type="wnd"] > .fn__flex:first-child');var o,i,e=t.getBoundingClientRect(),r=u.drag.getBoundingClientRect();H(e,r)||H(e,E)?(o=e.left<r.left?r.left-e.left-4:0,i=e.right>r.right?e.right-r.right+8:0,t.style.paddingLeft=o+"px",t.style.paddingRight=i+"px",e.right-i-240<r.left&&e.left<r.left||e.left+o+240>r.right&&e.right>r.right?(t.style.paddingTop="42px",t.style.paddingLeft=0,t.style.paddingRight=0):t.style.removeProperty("padding-top")):(t.style.removeProperty("padding-left"),t.style.removeProperty("padding-right"))})}function M(){Q.forEach(e=>{let t=e.querySelector(".file-tree")?[]:e.querySelectorAll(".protyle-wysiwyg");0<t.length&&setTimeout(()=>{t.forEach(e=>{var t=e.style.paddingLeft;t!==e.dataset.prevpadding&&(e.style.setProperty("--protyle-spacing",t),e.dataset.prevpadding=t)})},300)})}if(!d){if(setTimeout(A,200),!n){let o=u.layouts.querySelector(".layout__center");const F=new ResizeObserver(e=>{for(var t of e){var o,i=t.contentBoxSize[0]["inlineSize"];t.target.dataset.prevWidth?(o=i-parseFloat(t.target.dataset.prevWidth),t.target.dataset.prevWidth=i,P(),clearTimeout(W),W=setTimeout(()=>{ce(),M()},200),A(o),ee(),D()):t.target.dataset.prevWidth=i}});if(o)F.observe(o),p.push(F);else{let e=0,t;function te(){u.layouts=document.getElementById("layouts"),o=u.layouts.querySelector(".layout__center"),10!==++e&&!o||(clearInterval(t),F.observe(o),p.push(F))}setTimeout(()=>{t=setInterval(te,1e3)},0)}}window.addEventListener("resize",G)}function oe(e="l"){return u["dock"+e]&&u["dock"+e].classList.contains("fn__none")}function ie(){return u.dockb&&!u.dockb.classList.contains("fn__none")}function re(){var e=ie(),t=function(){if(!d){const e=u.layouts,t=e.querySelector(".layout__dockb");return e&&t?.classList.contains("layout--float")&&"0px"!==t?.style.height}}();u.toolbar?.nextElementSibling.classList.toggle("has-dockb",e),u.toolbar?.nextElementSibling.classList.toggle("has-layout-dockb-float",t),u.dockb?.classList.toggle("has-layout-dockb-float",t),_(f,".has-dockb"),_(f,".has-layout-dockb-float")}function ne(){return u.status&&u.status.classList.contains("fn__none")}function ae(e){return e&&!e.classList.contains("layout--float")}function se(e){return"0px"!==e?.style.width}function D(){if(u.dockl&&!d&&!n)for(var o of["l","r"]){let e=u["layoutDock"+o],t=u["dock"+o];if(ae(e)&&se(e)?(t.classList.add("dock-layout-expanded"),_(f,".dock-layout-expanded")):t.classList.remove("dock-layout-expanded"),!oe()&&(ae(i=e)||!i?.style.cssText.includes("transform: translate"))&&se(e))switch(o){case"l":case"r":t.style.setProperty("--border-clr","transparent")}else t.style.removeProperty("--border-clr")}var i}function ce(){function e(e,t){u.status.style.transform=`translate(${e}px, ${t}px)`}var t,o,i,r;d||n||(ie()?(u.status?.style.removeProperty("max-width"),u.status?.style.removeProperty("transform")):(i=u.layouts.querySelector(".layout__center"))&&u.layoutDockr&&!u.status.classList.contains(".fn__none")&&(t=u.layoutDockr.clientWidth,i=i.clientWidth,u.layoutDockb=u.layouts.querySelector(".layout__dockb"),o=u.layoutDockb&&!u.layoutDockb.classList.contains(".fn__none")&&ae(u.layoutDockb)?-1*u.layoutDockb.clientHeight:0,u.status.style.maxWidth=i-12+"px",i=oe("r"),r=function(e){let t=u["layoutDock"+e];return t&&(t.classList.contains("layout--float")||t.style.cssText.includes("width: 0px"))}("r"),i&&r?e(0,o):!i&&r?e(-40,o):i||r?i&&!r&&e(-1*t,o):e(-1*(t+40),o),u.status=document.getElementById("status")))}function ue(){ne()?document.body.style.setProperty("--status-height","0px"):document.body.style.setProperty("--status-height","32px")}function L(){if(!ne()){let e=u.layouts?.querySelectorAll(".layout__center .layout-tab-container"),o=u.status.getBoundingClientRect(),t=(e?.forEach(e=>{let t=e.querySelector(".file-tree");t&&!t.classList.contains("fn__none")&&H(e.getBoundingClientRect(),o)?e.style.paddingBottom="35px":e.style.removeProperty("padding-bottom")}),document.getElementById("searchList")),i=document.getElementById("searchPreview");var n,a;(t||i)&&(n=t.getBoundingClientRect(),a=i.getBoundingClientRect(),H(n,o)?t.style.paddingBottom="35px":t.style.removeProperty("padding-bottom"),H(a,o)?i.style.paddingBottom="35px":i.style.removeProperty("padding-bottom"));let r=document.getElementById("viewerContainer");r&&(H(r.getBoundingClientRect(),o)?r.style.paddingBottom="35px":r.style.removeProperty("padding-bottom")),u.layouts?.querySelectorAll(".card__main").forEach(e=>{e&&(H(e.getBoundingClientRect(),o)?e.style.paddingBottom="35px":e.style.removeProperty("padding-bottom"))})}}function H(e,t){return e&&t&&(e.right>t.left&&e.bottom>t.top&&e.left<t.left+t.width&&e.top<t.top+t.height)}function le(){if(!d){let e=document.querySelectorAll(".file-tree .b3-list-item--focus");document.querySelectorAll(".file-tree .has-focus").forEach(e=>e.classList.remove("has-focus")),e.forEach(e=>{e.nextElementSibling&&"UL"===e.nextElementSibling.tagName&&!e.nextElementSibling.classList.contains("fn__none")||(e.parentNode.classList.add("has-focus"),_(f,".has-focus"))})}}function de(o,i){return new MutationObserver(function(e,t){e.forEach(e=>{e.type===o&&i(e,t)})})}function me(o,i=void 0,r=void 0){return new MutationObserver(function(e,t){e.forEach(e=>{o&&"childList"===e.type?o(e,t):i&&"attributes"===e.type?i(e,t):r&&"characterData"===e.type&&r(e,t)})})}function he(o,e,t=void 0,i=void 0,r=!1){let n={},a=(e&&(n.childList=!0),t&&(n.attributes=!0),i&&(n.characterData=!0),e&&r&&(n.subtree=!0),u["layoutDock"+o]),s=me(e,t,i);if(a)s.observe(a,n),p.push(s);else{let e=0,t;function c(){a=u.layouts.querySelector(".layout__dock"+o),10!==++e&&!a||(clearInterval(t),u["layoutDock"+o]=a,D(),s.observe(a,n),p.push(s))}setTimeout(()=>{t=setInterval(c,1e3)},0)}}re(),D(),ue(),L(),le();{var[r,i=void 0,o=!1]=[()=>{{let e=document.querySelectorAll(".b3-dialog--open .b3-dialog");e.forEach(e=>{e.querySelector(".emojis")&&(e.classList.add("emojis-container"),_(f,".emojis-container"))})}re()}];let e={},t=(r&&(e.childList=!0),i&&(e.attributes=!0),r&&o&&(e.subtree=!0),me(r,i));t.observe(document.body,e),p.push(t)}if(!d&&!n){he("l",void 0,()=>{setTimeout(()=>{L()},200),D()}),he("r",void 0,()=>{setTimeout(()=>{L()},200),D()});{o="attributes";r=ue;i=u.status;let e=de(o,r);i&&(e.observe(i,{[o]:!0}),p.push(e))}}function z(){d||setTimeout(()=>{P();{let e=document.querySelector("#AsriTopbarLeftSpacing"),t=document.querySelector("#AsriTopbarRightSpacing");e?.style.setProperty("width","0px"),t?.style.setProperty("width","0px"),I=u.drag?.getBoundingClientRect().left,T=u.drag?.getBoundingClientRect().right,e?.style.removeProperty("width"),t?.style.removeProperty("width")}A(),ee(),M(),le();{let e=u.layouts?.querySelectorAll(".protyle .protyle-background");e.forEach(e=>{!e.querySelector(".protyle-background__img img")?.classList.contains("fn__none")&&e.querySelector(".protyle-background__icon.fn__none")?(e.classList.add("without-icon"),_(f,".without-icon")):e.classList.remove("without-icon")})}L(),re(),ce(),!e&&y&&j&&U()},200)}function fe(e){"Control"!==e.key&&"Alt"!==e.key&&"Shift"!==e.key&&"Meta"!==e.key||z()}function pe(e){document.body.style.setProperty("--mouseX",e.clientX+"px"),document.body.style.setProperty("--mouseY",e.clientY+"px")}z(),window.addEventListener("mouseup",z),window.addEventListener("dragend",z),window.addEventListener("keyup",fe),window.addEventListener("dblclick",pe),window.destroyTheme=()=>{if(window.removeEventListener("mouseup",z),window.removeEventListener("keyup",fe),window.removeEventListener("dragend",z),window.removeEventListener("dblclick",pe),window.removeEventListener("resize",G),u.barMode?.removeEventListener("click",V),p.forEach(e=>e.disconnect()),c&&!m&&s(8),c&&n&&s(8,13),f.forEach(t=>{document.querySelectorAll(t).forEach(e=>e.classList.remove(t.slice(1)))}),document.querySelector("#AsriTopbarLeftSpacing")?.remove(),document.querySelector("#AsriTopbarRightSpacing")?.remove(),document.querySelector("#AsriPluginsIconsDivider")?.remove(),document.documentElement.dataset.ua="",document.body.style.removeProperty("--mouseX"),document.body.style.removeProperty("--mouseY"),document.body.style.removeProperty("--status-height"),document.documentElement.style.removeProperty("--asri-sys-accent"),document.documentElement.style.removeProperty("--asri-sys-accent-accessible"),document.documentElement.style.removeProperty("--asri-sys-accent-grayscale"),document.documentElement.style.removeProperty("--asri-user-custom-accent"),document.documentElement.style.removeProperty("--asri-c-factor"),document.documentElement.style.removeProperty("--asri-c-0"),document.querySelectorAll(".dock").forEach(e=>{e.style.removeProperty("--border-clr")}),setTimeout(()=>{u.toolbar?.style.removeProperty("--topbar-left-spacing"),u.toolbar?.style.removeProperty("--topbar-right-spacing"),u.dockr?.style.removeProperty("--avoid-topbar"),u.layoutDockr?.style.removeProperty("--avoid-topbar"),u.status?.style.removeProperty("max-width"),u.status?.style.removeProperty("transform");const e=document.body.querySelectorAll('[data-type="wnd"]'),t=(e.forEach(e=>{const t=e.firstElementChild,o=e.querySelectorAll(".protyle-wysiwyg");t?.style.removeProperty("padding-left"),t?.style.removeProperty("padding-right"),t?.style.removeProperty("padding-top"),o.forEach(e=>{e.style.removeProperty("--protyle-spacing"),e.dataset.prevpadding=void 0})}),u.layouts?.querySelectorAll(".layout__center .layout-tab-container"));t.forEach(e=>{e.style.removeProperty("padding-bottom")})},200),document.getElementById("searchList")?.style.removeProperty("padding-bottom"),document.getElementById("searchPreview")?.style.removeProperty("padding-bottom"),document.getElementById("viewerContainer")?.style.removeProperty("padding-bottom"),u.layouts.querySelectorAll(".card__main").forEach(e=>{e.style.removeProperty("padding-bottom")}),a)for(let t=0;t<a.length;t++){let e=a[t];e.styleSheet.insertRule(e.rule,e.styleSheet.cssRules.length)}X()}}();